{"version":3,"sources":["reportWebVitals.ts","utils/storage.ts","slices/authSlice.ts","store/store.ts","assets/logo.png","router/Path.ts","components/Header.tsx","components/Breadcrumb.tsx","components/AsideNav.tsx","utils/download.ts","utils/chart.ts","components/BarLineChart.tsx","components/DoughnutChart.tsx","components/PercentageDoughnutChart.tsx","components/HorizontalBarChart.tsx","components/InfoCard.tsx","components/VerticalProgressBarChart.tsx","apis/https.ts","apis/product.ts","components/ProductCard.tsx","assets/default.jpeg","utils/hook.ts","components/Collapse.tsx","utils/common.ts","components/ProductsDownloadDialog.tsx","apis/market.ts","apis/seo.ts","components/ProductDialog/charts/Review.tsx","components/ProductDialog/charts/Rank.tsx","components/ProductDialog/charts/StockLevel.tsx","components/ProductDialog/charts/Price.tsx","components/ProductDialog/index.tsx","components/ProductCards.tsx","pages/AmazonTop100DashBoard.tsx","components/DatePicker.tsx","types/common.ts","components/TableChart.tsx","pages/PriceDistribution.tsx","components/StockChart.tsx","pages/Inventory.tsx","pages/NewReviews.tsx","pages/ProductsRanking.tsx","components/VerticalDoughnutChart.tsx","pages/BrandRanking.tsx","components/ProgressChart.tsx","components/SeoBarLineChart.tsx","pages/AmazonsChoice/RankComparison.tsx","pages/AmazonsChoice/index.tsx","components/AverageChart.tsx","pages/Sponsored/RankComparison.tsx","pages/Sponsored/index.tsx","components/WordCloudChart.tsx","pages/KeywordAnalysis.tsx","pages/AmazonTop100.tsx","pages/CustomsDataDashBoard/BarLineChart.tsx","apis/custom.ts","pages/CustomsDataDashBoard/index.tsx","pages/CustomsData.tsx","App.tsx","index.tsx"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","TOKEN_STORAGE_KEY","authSlice","createSlice","name","initialState","token","localStorage","getItem","reducers","setStoreToken","state","action","payload","clearStoreToken","actions","store","configureStore","reducer","auth","AuthReducer","Path","Header","className","to","AmazonTop100DashBoard","src","logo","alt","CustomsDataDashBoard","Breadcrumb","pathNames","useLocation","pathname","split","filter","separator","map","index","Item","length","AsideNav","location","useState","visible","setVisible","useEffect","toggleHandler","onClick","style","width","AmazonTop100PriceDistribution","AmazonTop100Inventory","AmazonTop100NewReviews","AmazonTop100BrandRanking","AmazonTop100ProductsRanking","AmazonTop100AmazonsChoice","AmazonTop100Sponsored","AmazonTop100KeywordAnalysis","downloadPng","current","title","a","toPng","data","download","takeIntervalAxisSetting","list","isPercentage","min","max","interval","_min","reduce","m","num","_max","filterFirstWhenDocumentCamera","category","copy","splice","formatBarLineData","axis","formatBarLineAxis","info","x_axis","series","type","it","sold","yAxisIndex","count","revenue","takeChartTypeData","typeIndex","echarts","LineChart","BarChart","TitleComponent","GridComponent","TooltipComponent","LegendComponent","CanvasRenderer","DataZoomComponent","BarLineChart","props","chartRef","useRef","height","titleFontSize","names","inverse","totals","leftAxisSetting","arr","rightAxisSetting","option","text","textStyle","fontSize","grid","backgroundColor","top","right","left","bottom","legend","formatter","every","target","find","isFixed","fixed","_total","result","total","toFixed","getLegend","dataZoom","show","realtime","tooltip","trigger","xAxis","axisLine","axisTick","boundaryGap","yAxis","chart","setOption","on","params","dataIndex","onDownload","ref","PieChart","DoughnutChart","subtitle","subtitleFontSize","hasLegend","center","radius","label","position","color","labelLine","orient","PercentageDoughnutChart","chartWrapperRef","percentage","brand","onClear","itemStyle","value","HorizontalBarChart","dataItemName","yAxisData","seriesData","confine","axisLabel","fontFamily","res","substring","Array","fill","join","InfoCard","context","reviewsContext","VerticalProgressBarChart","padding","ranks","rotate","splitLine","minInterval","showBackground","barWidth","rank","axios","defaults","baseURL","interceptors","response","use","config","Promise","reject","getProducts","request","url","method","getProduct","ProductCard","imageUrl","price","code","resolution","Certification","ranking","mission","hover","setHover","overflow","onMouseEnter","onMouseLeave","clipPath","backgroundImage","content","effect","boxShadow","useUpdateEffect","cb","depend","status","setStatus","INPUT_TYPE","CollapseItem","children","active","setActive","formatTags","form","ary","forEach","group","items","item","checked","push","keys","key","Collapse","onFilter","setForm","resetForm","useCallback","formAdapter","initWebcamForm","initVideoProjectorForm","initDocumentCameraForm","default","handleClickButton","_form","isTarget","BUTTON","size","marginLeft","margin","DROPDOWN","placeholder","undefined","clearable","onChange","handleChangeSelect","Option","isFirst","closable","onClose","formatDate","dayjs","format","initDate","subtract","startOf","toDate","ProductsDownloadDialog","products","setProducts","asinValue","setAsinValue","page","setPage","totalPage","setTotalPage","fetchData","date","start_at","end_at","stock","adapter","max_page","onCancel","Body","prods","ASIN","image_url","asin","includes","layout","pageCount","currentPage","onCurrentChange","minHeight","handleCloseTag","getTopBrandPieChart","getTopProductBarChart","getNewCommentBarChart","getPriceDistributionBarLineChart","getInstockStockChart","getTable","getTableNewComments","getTableTopBrand","getTableTopProduct","getPopularPriceRange","getPopularResolutions","getSponsored","getSponsoredAvg","getSponsoredRate","getAmazonsChoice","getAmazonsChoiceRate","getTableSponsored","getTableSearchCloud","Review","Rank","StockLevel","Price","ProductDialog","region","product","setProduct","customClass","product_detail","disabled","parseFloat","average_rating","showText","indicatorPosition","autoplay","price_chart","review_number","instock","window","open","ProductCards","setAsin","dialogVisible","setDialogVisible","openDialogHandler","formatData","formatContent","sort","b","review","formatTopBrandData","avg_rank","setCategory","setRegion","sorting","setSorting","productsPage","setProductsPage","time","setTime","distribution","setDistribution","amazonsChoice","setAmazonsChoice","popularResolution","setPopularResolution","popularPriceRange","setPopularPriceRange","sponsored","setSponsored","topBrandData","setTopBrandData","brandProducts","setBrandProducts","newComment","setNewComment","amazonsBrandValue","setAmazonsBranValue","sponsoredBrandValue","setSponsoredBrandValue","ftiRanking","setFtiRanking","chartLoading","setChartLoading","categoryOptions","regionOptions","dashboard_time","handleClickTopBrandChart","dashboard","others","brands","str","handleClearTopBrandChart","handleDownloadProducts","dl","responseURL","tag","Math","round","sponsored_rate","amazons_choice_rate","model","mode","current_page","DatePicker","CHART_TYPE","setDate","disabledDate","refDatePicker","isShowTrigger","isReadOnly","refs","inputRoot","focus","TableChart","columns","border","PriceDistribution","CHART","chartType","setChartType","isChartLoading","setIsChartLoading","setFilter","setPrice","table","setTable","useMemo","matches","parseInt","minPrice","maxPrice","fetchChart","searchParams","fetchTable","fetchProducts","productsParams","min_price","max_price","TABLE","handleDownloadTable","_date","day","prop","small","StockChart","sum","obj","marker","seriesName","stack","symbolSize","areaStyle","lock","setTimeout","Inventory","setStock","stockType","setStockType","productDate","setProductDate","stockChartData","setStockChartData","console","log","handleStockChartClick","trim","maxWidth","placement","NewReviews","chartPage","setChartPage","tablePage","setTablePage","sortable","ProductsRanking","rankings","setRankings","top_product","VerticalDoughnutChart","BrandRanking","setBrand","isSetBrand","pie","pieChartItems","_brand","ProgressChart","colors","prev","curr","handleClickProgress","source","getNameColorStyles","getBarStyles","background","yAxisLabel","isNaN","RankBox","borderColor","Object","amazons_choice","not_amazons_choice","RankComparison","shotWrapperRef","rate","amazons_choice_avg","unamazons_choice_avg","SeoBarLineChart","unamazons_choice_rate","Index","ac","setAc","setRate","fetchProductsData","takeLegendData","takeSeriesData","AverageChart","no_sponsored","formatAverageData","avg","sponsored_avg","unsponsored_avg","unsponsored_rate","sp","setSp","setAvg","WordCloudChart","rotationRange","param","KeywordAnalysis","words","setWords","volume","setVolume","word","setWord","tableColumn","render","trend","isNegative","fetchVolume","isBefore","AmazonTop100","path","AmazonsChoice","Sponsored","weight","setType","slice","MAX_LENGTH","getCustomValuePie","exporter","hs_code","getCustomBillPie","getCustomValueBillBarLine","getCustomTable","getCustomTableDownload","is_excel_download","setExporter","setCode","exporterOptions","setExporterOptions","codeOptions","setCodeOptions","valuePie","setValuePie","billPie","setBillPie","barLine","setBarLine","exporters","hs_codes","bill","CustomsData","App","exact","echartTheme","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f64fb5c6.chunk.js","sourcesContent":["import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","const TOKEN_STORAGE_KEY = 'TOKEN_STORAGE';\n\nexport function setToken(token: string) {\n    localStorage.setItem(TOKEN_STORAGE_KEY, token)\n}\n\nexport function findToken(): string | null {\n    return localStorage.getItem(TOKEN_STORAGE_KEY)\n}\n\nexport function clearToken() {\n    localStorage.removeItem(TOKEN_STORAGE_KEY)\n}\n\n","import {createSlice, PayloadAction} from \"@reduxjs/toolkit\";\nimport {RootState} from \"../store/store\";\nimport {findToken} from \"../utils/storage\";\n\ninterface AuthState {\n    token: string | null\n}\n\nfunction initState(): AuthState {\n    return {\n        token: findToken()\n    }\n}\n\nconst authSlice = createSlice({\n    name: 'auth',\n    initialState: initState(),\n    reducers: {\n        setStoreToken(state, action: PayloadAction<string>) {\n            state.token = action.payload\n        },\n        clearStoreToken(state) {\n            state.token = null\n        }\n    }\n});\n\n// Selectors\nexport const selectAuthToken = (state: RootState) => state.auth.token;\n\n// Actions\nexport const {setStoreToken, clearStoreToken} = authSlice.actions;\n\n// Reducer\nexport default authSlice.reducer\n","import {configureStore} from '@reduxjs/toolkit'\nimport AuthReducer from '../slices/authSlice'\n\nconst store = configureStore({\n    reducer: {\n        auth: AuthReducer\n    }\n});\n\n// Infer the `RootState` and `AppDispatch` types from the store itself\nexport type RootState = ReturnType<typeof store.getState>\n\n// Inferred type: {posts: PostsState, comments: CommentsState, users: UsersState}\nexport type AppDispatch = typeof store.dispatch\n\nexport default store\n","export default __webpack_public_path__ + \"static/media/logo.c9ed1fb2.png\";","class Path {\n    static DashBoard() {\n        return '/web'\n    }\n\n    static LogIn() {\n        return '/web/login'\n    }\n\n    static Setting() {\n        return '/web/setting'\n    }\n\n    static AmazonTop100DashBoard() {\n        return '/web/amazon-top-100'\n    }\n\n    static AmazonTop100PriceDistribution() {\n        return '/web/amazon-top-100/price-distribution'\n    }\n\n    static AmazonTop100Inventory() {\n        return '/web/amazon-top-100/inventory'\n    }\n\n    static AmazonTop100NewReviews() {\n        return '/web/amazon-top-100/new-reviews'\n    }\n\n    static AmazonTop100BrandRanking() {\n        return '/web/amazon-top-100/brand-ranking'\n    }\n\n    static AmazonTop100ProductsRanking() {\n        return '/web/amazon-top-100/products-ranking'\n    }\n\n    static AmazonTop100AmazonsChoice() {\n        return '/web/amazon-top-100/amazons-choice'\n    }\n\n    static AmazonTop100Sponsored() {\n        return '/web/amazon-top-100/sponsored'\n    }\n\n    static AmazonTop100KeywordAnalysis() {\n        return '/web/amazon-top-100/keyword-analysis'\n    }\n\n    static CustomsDataDashBoard() {\n        return '/web/customs-data'\n    }\n}\n\nexport default Path\n","import React from 'react';\nimport logo from 'assets/logo.png';\nimport {NavLink} from \"react-router-dom\";\n// import {RiArrowDownSLine} from 'react-icons/ri'\n// import {useAppDispatch, useAppSelector} from \"../store/hooks\";\n// import {clearStoreToken, selectAuthToken} from \"../slices/authSlice\";\n// import {clearToken} from \"../utils/storage\";\nimport Path from \"../router/Path\";\n\nfunction Header() {\n    // const dispatch = useAppDispatch();\n    // const history = useHistory();\n    // const token = useAppSelector(selectAuthToken);\n    // const [isActive, setIsActive] = useState(false);\n\n    // const userToggleHandler = () => {\n    //     setIsActive(value => !value)\n    // }\n    //\n    // const settingHandler = () => {\n    //     history.push(Path.Setting())\n    // }\n    //\n    // const logOutHandler = () => {\n    //     dispatch(clearStoreToken());\n    //     clearToken();\n    //     history.push(Path.LogIn())\n    // }\n\n    return (\n        <header className=\"h-16 py-4 px-16 flex items-center bg-menu\">\n            <NavLink to={Path.AmazonTop100DashBoard()}>\n                <img src={logo} className=\"w-auto h-12 mr-24\" alt=\"logo\"/>\n            </NavLink>\n            <div className=\"flex items-center\">\n                <NavLink className=\"text-white text-xl mr-12 hover:text-primary\"\n                         to={Path.AmazonTop100DashBoard}\n                >Amazon Top 100</NavLink>\n                <NavLink className=\"text-white text-xl mr-12 hover:text-primary\"\n                         to={Path.CustomsDataDashBoard}\n                >Customs Data</NavLink>\n            </div>\n            {/*{*/}\n            {/*token*/}\n            {/*?*/}\n            {/*<div*/}\n            {/*className=\"relative text-white text-xl text-center ml-auto h-16 flex justify-center items-center px-4\"*/}\n            {/*>*/}\n            {/*<a href=\"#\" className=\"flex items-center\" onClick={userToggleHandler}>*/}\n            {/*<p className=\"mr-2\">User Name</p>*/}\n            {/*<RiArrowDownSLine className={`${isActive && '-rotate-180'} transform transition`}/>*/}\n            {/*</a>*/}\n\n            {/*<div*/}\n            {/*className={`${isActive && 'h-24'} h-0 overflow-hidden absolute -bottom-24 left-0 z-50 bg-menu w-full transition`}>*/}\n            {/*<a href=\"#\" onClick={settingHandler}>*/}\n            {/*<p className=\"border-b-2 border-solid border-white p-2\">Setting</p>*/}\n            {/*</a>*/}\n            {/*<a href=\"#\" onClick={logOutHandler}>*/}\n            {/*<p className=\"p-2\">Log out</p>*/}\n            {/*</a>*/}\n            {/*</div>*/}\n            {/*</div>*/}\n\n            {/*:*/}\n            {/*<NavLink className=\"text-white text-xl ml-auto\" to={Path.LogIn}>*/}\n            {/*Sign In*/}\n            {/*</NavLink>*/}\n            {/*}*/}\n        </header>\n    );\n}\n\nexport default Header;\n","import React from 'react'\nimport {Breadcrumb as ElementBreadcrumb} from \"element-react\";\nimport {useLocation} from \"react-router\";\n\n// function mappingPathName(name: string) {\n//     const map = {\n//         'customs-data': 'Customs Data',\n//         default: 'Unknown'\n//     }\n//     return map[name] || map.default\n// }\n\n// 按照 Router 路徑名稱顯示\n// 當數量只有一個的時候會補上 Dashboard\nfunction Breadcrumb() {\n    const location = useLocation();\n    \n    const pathNames: string[] = location.pathname.split('/').filter(name => !!name);\n\n    return (\n        <ElementBreadcrumb className=\"py-4 text-lg text-context\" separator=\">\">\n            {\n                pathNames.map((name, index) =>\n                    <ElementBreadcrumb.Item className=\"text-lg\" key={index}>{name}</ElementBreadcrumb.Item>\n                )\n            }\n            {\n                pathNames.length < 2 &&\n                <ElementBreadcrumb.Item className=\"text-lg\">Dashboard</ElementBreadcrumb.Item>\n            }\n        </ElementBreadcrumb>\n    )\n}\n\nexport default Breadcrumb\n","import React, {useEffect, useState} from 'react'\nimport {NavLink, useLocation} from \"react-router-dom\";\n\nimport {GiHamburgerMenu} from 'react-icons/gi'\nimport Path from \"../router/Path\";\n\nfunction AsideNav() {\n    const location = useLocation()\n    const [visible, setVisible] = useState(false)\n\n    useEffect(() => {\n        setVisible(false)\n    }, [location])\n\n    const toggleHandler = (visible: boolean) => {\n        setVisible(visible)\n    }\n\n    return (\n        <div>\n            {\n                !visible && (\n                    <div className=\"fixed z-50 left-8 top-24 cursor-pointer\" onClick={() => toggleHandler(true)}>\n                        <GiHamburgerMenu className=\"text-menu text-3xl\"/>\n                    </div>\n                )\n            }\n            <div\n                className={`fixed z-50 left-0 top-16 h-main px-8 pt-12 bg-menu transition transform ${!visible && '-translate-x-full'}`}\n                style={{width: '300px'}}\n            >\n                <div className=\"absolute right-4 top-4 cursor-pointer\" onClick={() => toggleHandler(false)}>\n                    <i className=\"el-icon-close text-white\"/>\n                </div>\n                <NavLink className=\"hover:text-black-100\" to={Path.AmazonTop100DashBoard()}>\n                    <p className=\"text-2xl text-white\">Dashboard</p>\n                </NavLink>\n                <div className=\"mt-8\">\n                    <h3 className=\"text-2xl text-white border-b-2 border-solid border-white px-1\">Market Analysis</h3>\n                    <div className=\"pl-2\">\n                        <NavLink to={Path.AmazonTop100PriceDistribution()}>\n                            <p className=\"mt-4 text-xl text-white\">Price Distribution</p>\n                        </NavLink>\n                        <NavLink to={Path.AmazonTop100Inventory()}>\n                            <p className=\"mt-4 text-xl text-white\">Inventory</p>\n                        </NavLink>\n                        <NavLink to={Path.AmazonTop100NewReviews()}>\n                            <p className=\"mt-4 text-xl text-white\">New Reviews</p>\n                        </NavLink>\n                        <NavLink to={Path.AmazonTop100BrandRanking()}>\n                            <p className=\"mt-4 text-xl text-white\">Brand Ranking</p>\n                        </NavLink>\n                        <NavLink to={Path.AmazonTop100ProductsRanking()}>\n                            <p className=\"mt-4 text-xl text-white\">Products Ranking</p>\n                        </NavLink>\n                    </div>\n                </div>\n                <div className=\"mt-8\">\n                    <h3 className=\"text-2xl text-white border-b-2 border-solid border-white px-1\">SEO Analysis</h3>\n                    <div className=\"pl-2\">\n                        <NavLink to={Path.AmazonTop100AmazonsChoice()}>\n                            <p className=\"mt-4 text-xl text-white\">Amazon's Choice</p>\n                        </NavLink>\n                        <NavLink to={Path.AmazonTop100Sponsored()}>\n                            <p className=\"mt-4 text-xl text-white\">Sponsored</p>\n                        </NavLink>\n                        <NavLink to={Path.AmazonTop100KeywordAnalysis()}>\n                            <p className=\"mt-4 text-xl text-white\">Keyword Analysis</p>\n                        </NavLink>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default AsideNav\n","import {toPng} from \"html-to-image\";\nimport download from \"downloadjs\";\n\nexport async function downloadPng(current: HTMLDivElement | string, title: string) {\n    if (typeof current === 'string') return\n\n    const data = await toPng(current);\n    download(data, `${title}.png`);\n}\n","import {BarLine, BarLineChartData, PriceDistributionBarLineChart, PriceDistributionItem} from \"../types/market\";\n\nexport const takeIntervalAxisSetting = (list: number[], isPercentage?: boolean): { max: number; min: number; interval: number } => {\n    if (isPercentage) {\n        return {\n            min: 0,\n            max: 100,\n            interval: 20\n        }\n    }\n    const SPLIT_NUMBER = 5;\n    const _min = list.reduce((m, num) => m > num ? num : m, 0);\n    const _max = list.reduce((m, num) => m < num ? num : m, 0);\n    const min = _min > 5 ? _min - SPLIT_NUMBER + (_min % SPLIT_NUMBER) : 0;\n    const max = _max > 5 ? _max + SPLIT_NUMBER - (_max % SPLIT_NUMBER) : 5;\n    const interval = (max - min) / SPLIT_NUMBER;\n    return {\n        min,\n        max,\n        interval\n    }\n}\n\nexport function formatBarLineAxis(axis: string[], category?: string): string[] {\n    if (!category) return axis;\n    const copy = [...axis];\n    if (category === 'webcam') {\n        copy[0] = '10~20';\n    }\n    if (category === 'video projector') {\n        copy[0] = '17~30';\n    }\n    if (category === 'document camera') {\n        copy.splice(0, 1);\n        copy[0] = '21~40';\n    }\n    return copy\n}\n\nexport function filterFirstWhenDocumentCamera(data: number[], category?: string) {\n    if (category === 'document camera') {\n        const copy = [...data]\n        copy.splice(0, 1)\n        return copy\n    }\n    return data\n}\n\n\nexport function formatBarLineData(data: PriceDistributionBarLineChart | null, category?: string): BarLineChartData | null {\n    if (!data) return null;\n\n    const axis = formatBarLineAxis(data.info.x_axis, category)\n    const series: BarLine[] = [\n        {\n            type: 'bar',\n            name: 'Review Quantity',\n            data: filterFirstWhenDocumentCamera(\n                data.data.map((it: PriceDistributionItem) => it.sold),\n                category\n            ),\n            yAxisIndex: 0,\n        },\n        {\n            type: 'bar',\n            name: 'Product Model',\n            data: filterFirstWhenDocumentCamera(\n                data.data.map((it: PriceDistributionItem) => it.count),\n                category\n            ),\n            yAxisIndex: 0,\n        },\n        {\n            type: 'line',\n            name: 'Revenue(million USD)',\n            data: filterFirstWhenDocumentCamera(\n                data.data.map((it: PriceDistributionItem) => it.revenue),\n                category\n            ),\n            yAxisIndex: 1,\n        }\n    ];\n    return {axis, series}\n}\n\nexport const takeChartTypeData = (typeIndex: number, data: BarLineChartData | null): BarLine[] => {\n    return data ? data.series.filter((it: BarLine) => it.yAxisIndex === typeIndex) : []\n};\n\n\n","import React, {useEffect, useRef} from 'react'\nimport * as echarts from 'echarts/core'\nimport {LineChart, BarChart, LineSeriesOption, BarSeriesOption} from \"echarts/charts\";\nimport {\n    TitleComponent,\n    TitleComponentOption,\n    GridComponent,\n    GridComponentOption,\n    TooltipComponent,\n    TooltipComponentOption,\n    LegendComponent,\n    LegendComponentOption,\n    DataZoomComponent,\n    DataZoomComponentOption\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\nimport {HiDownload} from 'react-icons/hi'\nimport {downloadPng} from \"../utils/download\";\nimport {BarLine, BarLineChartData} from \"../types/market\";\nimport {takeChartTypeData, takeIntervalAxisSetting} from \"../utils/chart\";\n\nexport interface Total {\n    name: string;\n    fixed?: boolean;\n}\n\ninterface BarLineChartProps {\n    width?: string;\n    height?: string;\n    title?: string;\n    titleFontSize?: number;\n    data: BarLineChartData | null;\n    names?: string[];\n    onClick?(value: string): void;\n    inverse?: boolean;\n    totals?: Total[]\n}\n\ntype ECOption = echarts.ComposeOption<BarSeriesOption | LineSeriesOption | TitleComponentOption | GridComponentOption | TooltipComponentOption | LegendComponentOption | DataZoomComponentOption>;\n\necharts.use([LineChart, BarChart, TitleComponent, GridComponent, TooltipComponent, LegendComponent, CanvasRenderer, DataZoomComponent]);\n\nfunction BarLineChart(props: BarLineChartProps) {\n    const chartRef = useRef<HTMLDivElement | null>(null);\n    const {width = '100%', height = '400px', title = 'Title', titleFontSize = 24, data = null, names = [], onClick, inverse = false, totals = []} = props;\n\n    function getLegend(name: string) {\n        if (!data) return name;\n\n        if (totals.every((it: Total) => it.name !== name)) return name;\n\n        const target = data.series.find((it: BarLine) => it.name === name);\n        if (!target) return name;\n\n        const isFixed = totals.find((it: Total) => it.name === name)!.fixed;\n        const _total = target.data.reduce((result, num) => result + num, 0);\n        const total = isFixed ? _total.toFixed(2) : _total;\n        return `${name}, total: ${total}`\n    }\n\n    const leftAxisSetting = takeIntervalAxisSetting(\n        takeChartTypeData(0, data)\n            .reduce((arr: number[], list: BarLine) => [...arr, ...list.data], [])\n    );\n    const rightAxisSetting = takeIntervalAxisSetting(\n        takeChartTypeData(1, data)\n            .reduce((arr: number[], list: BarLine) => [...arr, ...list.data], []),\n    );\n\n    const option: ECOption = {\n        title: {\n            text: title,\n            textStyle: {\n                fontSize: titleFontSize\n            }\n        },\n        grid: {\n            backgroundColor: 'white',\n            top: 70,\n            right: 70,\n            left: 70,\n            bottom: 115\n        },\n        legend: {\n            bottom: 0,\n            formatter(name) {\n                return getLegend(name)\n            }\n        },\n        dataZoom: [\n            {\n                show: true,\n                realtime: true,\n                bottom: 60\n            },\n            {\n                type: 'inside',\n                show: true,\n                realtime: true,\n                bottom: 60\n            }\n        ],\n        tooltip: {\n            trigger: 'axis'\n        },\n        xAxis: [\n            {\n                type: 'category',\n                data: data ? data.axis : [],\n                axisLine: {\n                    show: !inverse\n                },\n                axisTick: {\n                    show: !inverse\n                },\n                boundaryGap: !inverse\n            }\n        ],\n        yAxis: [\n            {\n                type: 'value',\n                name: names[0],\n                min: leftAxisSetting.min,\n                max: leftAxisSetting.max,\n                interval: leftAxisSetting.interval,\n                show: typeof names[0] === 'string',\n                inverse\n            },\n            {\n                type: 'value',\n                name: names[1],\n                min: rightAxisSetting.min,\n                max: rightAxisSetting.max,\n                interval: rightAxisSetting.interval,\n                show: typeof names[1] === 'string'\n            }\n        ],\n        series: data ? data.series : []\n    };\n\n    useEffect(() => {\n        if (!chartRef.current) return;\n\n        const chart = echarts.init(chartRef.current, 'customed');\n        chart.setOption(option);\n        chart.on('click', (params) => {\n            if(onClick && params && data) {\n                onClick(data.axis[params.dataIndex])\n            }\n        })\n    });\n\n    const onDownload = async () => {\n        if (!chartRef.current) return;\n        await downloadPng(chartRef.current, title)\n    };\n\n    return (\n        <div className=\"relative\">\n            <HiDownload className=\"absolute right-0 top-0 text-3xl cursor-pointer z-30\" onClick={onDownload}/>\n            <div ref={chartRef} style={{width, height}}/>\n        </div>\n    )\n}\n\nexport default BarLineChart\n","import React, {useEffect, useRef} from 'react'\nimport * as echarts from 'echarts/core'\nimport {PieChart, PieSeriesOption} from \"echarts/charts\";\nimport {\n    GridComponent,\n    GridComponentOption,\n    TooltipComponent,\n    TooltipComponentOption,\n    LegendComponent,\n    LegendComponentOption\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\nimport {downloadPng} from \"../utils/download\";\nimport {HiDownload} from \"react-icons/hi\";\nimport {PieChartItem} from \"../types/chart\";\n\ninterface DoughnutChartProps {\n    width?: string;\n    height?: string;\n    title?: string;\n    titleFontSize?: number;\n    subtitle?: string;\n    subtitleFontSize?: number;\n    data: PieChartItem[];\n    hasLegend?: Boolean;\n    onClick?(value: string): void;\n}\n\ntype ECOption = echarts.ComposeOption<PieSeriesOption | GridComponentOption | TooltipComponentOption | LegendComponentOption>;\n\necharts.use([PieChart, GridComponent, TooltipComponent, LegendComponent, CanvasRenderer]);\n\nfunction DoughnutChart(props: DoughnutChartProps) {\n    const chartRef = useRef<HTMLDivElement | null>(null);\n    const {width = '100%', height = '400px', title = 'Title', titleFontSize = 24, subtitle = '', subtitleFontSize = 20, data = [], hasLegend = false, onClick} = props;\n    const option: ECOption = {\n        tooltip: {},\n        series: [\n            {\n                type: \"pie\",\n                center: ['50%', '50%'],\n                radius: [\"40%\", \"70%\"],\n                left: 'left',\n                label: {\n                    position: \"inner\",\n                    formatter: '{d}%',\n                    color: 'white'\n                },\n                labelLine: {\n                    show: false\n                },\n                data\n            }\n        ]\n    };\n\n    if (hasLegend) {\n        option.legend = {\n            orient: 'vertical',\n            right: '10%',\n            top: 'middle'\n        };\n        // @ts-ignore\n        option.series[0].center[0] = '35%'\n    }\n\n    useEffect(() => {\n        if (!chartRef.current || !data.length) return;\n        const chart = echarts.init(chartRef.current, 'customed');\n        chart.setOption(option);\n        chart.on('click', (params) => {\n            if(onClick && params) {\n                onClick(params.name)\n            }\n        })\n    }, [data, option, onClick]);\n\n    const onDownload = async () => {\n        if (!chartRef.current) return;\n        await downloadPng(chartRef.current, title)\n    };\n\n    return (\n        <div className=\"relative\">\n            <div className=\"flex items-center absolute left-0 top-0\">\n                <h3 className=\"font-bold mr-4 text-gray-700\" style={{fontSize: titleFontSize}}>{title}</h3>\n                <h3 className=\"font-bold text-gray-500\" style={{fontSize: subtitleFontSize}}>{subtitle}</h3>\n            </div>\n            <div ref={chartRef} style={{width, height}}/>\n            <HiDownload className=\"absolute right-0 top-0 text-3xl cursor-pointer z-30\" onClick={onDownload}/>\n        </div>\n    )\n}\n\nexport default DoughnutChart\n","import React, {useEffect, useRef} from 'react'\nimport * as echarts from 'echarts/core'\nimport {PieChart, PieSeriesOption} from \"echarts/charts\";\nimport {\n    TitleComponent,\n    TitleComponentOption,\n    TooltipComponent,\n    TooltipComponentOption,\n    LegendComponent,\n    LegendComponentOption\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\nimport {downloadPng} from \"../utils/download\";\nimport {HiDownload} from \"react-icons/hi\";\nimport {AiOutlineClose} from \"react-icons/ai\";\n\ninterface PercentageDoughnutChartProps {\n    width?: string;\n    height?: string;\n    title?: string;\n    titleFontSize?: number;\n    name?: string;\n    brand?: string;\n    color?: string;\n    percentage: number,\n    onClear: () => {}\n}\n\ntype ECOption = echarts.ComposeOption<PieSeriesOption | TitleComponentOption | TooltipComponentOption | LegendComponentOption>;\n\necharts.use([PieChart, TitleComponent, TooltipComponent, LegendComponent, CanvasRenderer]);\n\nfunction PercentageDoughnutChart(props: PercentageDoughnutChartProps) {\n    const chartRef = useRef<HTMLDivElement | null>(null);\n    const chartWrapperRef = useRef<HTMLDivElement | null>(null);\n\n    const {width = '100%', height = '400px', title = 'Title', titleFontSize = 24,  name = 'Done', percentage = 0, brand, color, onClear} = props;\n    const option: ECOption = {\n        tooltip: {},\n        series: [\n            {\n                type: \"pie\",\n                radius: [\"55%\", \"85%\"],\n                top: '15%',\n                label: {\n                    show: false,\n                    position: \"center\"\n                },\n                labelLine: {\n                    show: false\n                },\n                itemStyle: {\n                    // @ts-ignore\n                    color(params: any) {\n                        if (params.dataIndex) return '#acacac';\n                        return color;\n                    }\n                },\n                data: [\n                    {name, value: percentage},\n                    {name: 'None', value: 100 - percentage},\n                ]\n            }\n        ]\n    };\n\n    useEffect(() => {\n        if (!chartRef.current) return;\n\n        const chart = echarts.init(chartRef.current, 'customed');\n        chart.setOption(option)\n    });\n\n    const onDownload = async () => {\n        if (!chartWrapperRef.current) return;\n        await downloadPng(chartWrapperRef.current, title)\n    };\n\n    return (\n        <div className=\"relative\">\n            <div className=\"flex items-center absolute left-0 top-0\">\n                <h3 className=\"font-bold mr-4 text-gray-700\" style={{fontSize: titleFontSize}}>{title}</h3>\n            </div>\n            {\n                brand && (\n                    <div\n                        className=\"absolute left-0 top-7 flex items-center rounded p-1 z-50 cursor-pointer\"\n                        style={{backgroundColor: color, fontSize: '.6rem'}}\n                        onClick={onClear}\n                    >\n                        { brand }\n                        <AiOutlineClose className=\"ml-1\" />\n                    </div>\n                )\n            }\n            <div ref={chartWrapperRef}>\n                <div ref={chartRef} style={{width, height}}/>\n                <p className=\"absolute left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-primary text-3xl\"\n                   style={{top: '58%'}}\n                >{percentage}%</p>\n            </div>\n            <HiDownload className=\"absolute right-0 top-0 text-3xl cursor-pointer z-30\" onClick={onDownload}/>\n        </div>\n    )\n}\n\nexport default PercentageDoughnutChart\n","import React, {useEffect, useRef} from 'react'\nimport * as echarts from 'echarts/core'\nimport {BarChart, BarSeriesOption} from \"echarts/charts\";\nimport {\n    TitleComponent,\n    TitleComponentOption,\n    GridComponent,\n    GridComponentOption,\n    TooltipComponent,\n    TooltipComponentOption,\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\nimport {downloadPng} from \"../utils/download\";\nimport {HiDownload} from \"react-icons/hi\";\n\ninterface BarLineChartProps {\n    width?: string;\n    height?: string;\n    title?: string;\n    titleFontSize?: number;\n    data: [string[], {data: string, value: number}[]]\n    dataItemName: string;\n    onClick?(value: string): void;\n}\n\ntype ECOption = echarts.ComposeOption<BarSeriesOption | TitleComponentOption | GridComponentOption | TooltipComponentOption>;\n\necharts.use([BarChart, TitleComponent, GridComponent, TooltipComponent, CanvasRenderer]);\n\nfunction HorizontalBarChart(props: BarLineChartProps) {\n    const chartRef = useRef<HTMLDivElement | null>(null);\n    const {width = '100%', height = '400px', title = 'Title', titleFontSize = 24, data = [[],[]], dataItemName = '', onClick} = props;\n\n    const [yAxisData, seriesData] = data;\n\n    const option: ECOption = {\n        title: {\n            text: title,\n            textStyle: {\n                fontSize: titleFontSize\n            }\n        },\n        grid: {\n            top: 50,\n            right: 50,\n            bottom: 40,\n            left: 100,\n        },\n        tooltip: {\n            trigger: 'axis',\n            position: 'top',\n            confine: true,\n            formatter: \"<div style='display:block; word-break: break-all;word-wrap: break-word; white-space:pre-wrap; width: 400px;'>\" + \"{b} \" + \"</div>\" + \" <br/>{a}:{c}\"\n        },\n        xAxis: [\n            {\n                type: 'value',\n            }\n        ],\n        yAxis: [\n            {\n                type: 'category',\n                data: yAxisData,\n                inverse: true,\n                axisLabel: {\n                    width: 100,\n                    fontFamily: 'monospace',\n                    formatter(value: any) {\n                        const TOTAL = 11;\n                        let res = value;\n                        if(res.length > 9) {\n                            return res.substring(0, 8) + \"...\";\n                        }\n                        return res + Array(TOTAL - res.length).fill(' ').join('');\n                    }\n                }\n            }\n        ],\n        series: [\n            {\n                type: 'bar',\n                name: dataItemName,\n                yAxisIndex: 0,\n                data: seriesData\n            },\n        ]\n    };\n\n    useEffect(() => {\n        if (!chartRef.current) return;\n\n        const chart = echarts.init(chartRef.current, 'customed');\n        chart.setOption(option);\n        if (onClick) {\n            chart.on('click', (params) => {\n                if (onClick) {\n                    onClick(seriesData[params.dataIndex].data)\n                }\n            })\n        }\n    });\n\n    const onDownload = async () => {\n        if (!chartRef.current) return;\n        await downloadPng(chartRef.current, title)\n    };\n\n    return (\n        <div className=\"relative\">\n            <div ref={chartRef} style={{width, height}}/>\n            <HiDownload className=\"absolute right-0 top-0 text-3xl cursor-pointer z-30r\" onClick={onDownload}/>\n        </div>\n    )\n}\n\nexport default HorizontalBarChart\n","import React from 'react'\nimport {Card} from \"element-react\";\n\ninterface InfoCardProps {\n    height?: string;\n    title: string;\n    context: string;\n    reviewsContext: string\n}\n\nfunction InfoCard(props: InfoCardProps) {\n    const {height = '100px', title, context, reviewsContext} = props\n    return (\n        <Card>\n            <div style={{height}}>\n                <p className=\"text-xl font-medium text-context pb-4\">{title}</p>\n                <p className=\"text-xl font-medium text-context\">\n                    <span className=\"text-4xl font-bold text-black\">{context}</span> with <span\n                    className=\"text-black\">{reviewsContext}</span> new reviews\n                </p>\n            </div>\n        </Card>\n    )\n}\n\nexport default InfoCard\n","import React, {useEffect, useRef} from 'react'\nimport * as echarts from 'echarts/core'\nimport {BarChart, BarSeriesOption} from \"echarts/charts\";\nimport {\n    TitleComponent,\n    TitleComponentOption,\n    GridComponent,\n    GridComponentOption,\n    TooltipComponent,\n    TooltipComponentOption,\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\nimport {downloadPng} from \"../utils/download\";\nimport {HiDownload} from \"react-icons/hi\";\n\ninterface VerticalProgressBarChartProps {\n    width?: string;\n    height?: string;\n    title?: string;\n    titleFontSize?: number;\n    data: [string[], { name: string, data: string, value: number }[], number[]];\n    padding: string;\n\n    onClick?(value: string): void;\n}\n\ntype ECOption = echarts.ComposeOption<BarSeriesOption | TitleComponentOption | GridComponentOption | TooltipComponentOption>;\n\necharts.use([BarChart, TitleComponent, GridComponent, TooltipComponent, CanvasRenderer])\n\nfunction VerticalProgressBarChart(props: VerticalProgressBarChartProps) {\n    const chartRef = useRef<HTMLDivElement | null>(null)\n    const {width = '100%', height = '400px', title = 'Title', titleFontSize = 24, data, onClick, padding = ''} = props;\n    const [yAxisData, seriesData, ranks] = data;\n\n    const option: ECOption = {\n        title: {\n            text: title,\n            textStyle: {\n                fontSize: titleFontSize\n            }\n        },\n        grid: {\n            top: 70,\n            right: 20,\n            bottom: 80,\n            left: 50,\n        },\n        tooltip: {\n            trigger: 'axis',\n            position: 'top',\n            confine: true,\n            formatter: \"<div style='display:block; word-break: break-all;word-wrap: break-word; white-space:pre-wrap; width: 400px;'>\" + \"{b} \" + \"</div>\" + \" <br/>{a}: {c}\"\n        },\n        xAxis: [\n            {\n                type: 'category',\n                data: yAxisData,\n                axisLabel: {\n                    interval: 0,\n                    rotate: 20,\n                    formatter(value: any) {\n                        let res = value;\n                        if (res.length > 9) {\n                            res = res.substring(0, 8) + \"...\";\n                        }\n                        return res;\n                    }\n                }\n            }\n        ],\n        yAxis: [\n            {\n                type: 'value',\n                splitLine: {\n                    show: false\n                },\n                minInterval: 1\n            }\n        ],\n        series: [\n            {\n                type: 'bar',\n                name: 'Times',\n                yAxisIndex: 0,\n                showBackground: true,\n                data: seriesData.map(it => it.value),\n                barWidth: 20,\n                itemStyle: {\n                    color: '#ffc000',\n                }\n            },\n        ]\n    }\n\n    useEffect(() => {\n        if (!chartRef.current) return\n\n        const chart = echarts.init(chartRef.current, 'customed')\n        chart.setOption(option)\n        chart.on('click', (params) => {\n            if (onClick) {\n                onClick(seriesData[params.dataIndex].data)\n            }\n        })\n    })\n\n    const onDownload = async () => {\n        if (!chartRef.current) return\n\n        await downloadPng(chartRef.current, title)\n    }\n\n    return (\n        <div className=\"relative\">\n            <HiDownload className=\"absolute right-0 top-0 text-3xl cursor-pointer z-30\" onClick={onDownload}/>\n            <div ref={chartRef} style={{width, height}}/>\n            <h3 className=\"absolute left-0 bottom-0 text-primary\">Avg<br/>Rank</h3>\n            <div\n                className=\"absolute left-0 bottom-0 w-full flex\"\n                style={{padding}}\n            >\n                {\n                    ranks.map((rank: number, index: number) => <span className=\"text-primary text-center\" key={index} style={{width: `${100 / ranks.length}%`}}>#{rank}</span>)\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default VerticalProgressBarChart\n","import axios from \"axios\";\n// import {\n//     findToken,\n//     // clearToken\n// } from \"../utils/storage\";\n// import router from \"@/router\";\n// import { ElNotification } from \"element-plus\";\n// axios.defaults.baseURL = `${process.env.VUE_APP_DOMAIN}/api`;\n\n// axios.defaults.baseURL = `http://140.112.110.129:9090/api`;\naxios.defaults.baseURL = `https://fti.bilabasia.com/api`;\n\n// axios.interceptors.request.use(\n//     config => {\n//         const token = findToken();\n//         if (token) {\n//             config.headers.Authorization = `Bearer ${token}`;\n//         }\n//\n//         return config;\n//     },\n//     error => error\n// );\n\naxios.interceptors.response.use(\n    config => config,\n    async ({ response }) => {\n        // if (response && response.status == 401) {\n        //     // TODO Disabled Refresh Token. Reopen 研究一下邏輯。\n        //     if (response.data.code === \"token_not_valid\") {\n        //         removeToken();\n        //         removeRefreshToken();\n        //         await router.push({ name: \"Login\" });\n        //     }\n        //     return Promise.reject(response);\n        // }\n        //\n        // if (response && response.status === 403) {\n        //     ElNotification({\n        //         type: \"warning\",\n        //         title: \"No permission\",\n        //         message: response.data.message || response.data.reson\n        //     });\n        //     return Promise.reject(response);\n        // }\n        //\n        // ElNotification({\n        //     type: \"error\",\n        //     title: \"Error\",\n        //     message: response.data.message || response.data.reson\n        // });\n\n        return Promise.reject(response);\n    }\n);\n\nexport default axios;\n\n","import request from \"./https\";\nimport {AxiosPromise} from \"axios\";\nimport {ProductParams, ProductResponse, ProductsParams, ProductsResponse} from \"../types/product\";\nimport {SearchParams} from \"../types/market\";\n\nexport function getProducts(data: ProductsParams) {\n    return request({\n        url:'/products',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<ProductsResponse>\n}\n\nexport function getProduct(data: ProductParams) {\n    return request({\n        url:'/product',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<ProductResponse>\n}\n\nexport function getProductsDownloadUrl(data: SearchParams) {\n    return request({\n        url:'/products_xlsx',\n        method: 'GET',\n        params: data\n    })\n}\n","import React, {useState} from 'react'\nimport {Card, Tooltip} from \"element-react\";\nimport defaultImageUrl from '../assets/default.jpeg'\n\nexport interface ProductCardProps {\n    tagContext?: string;\n    imageUrl?: string;\n    name: string;\n    price: number;\n    code: string;\n    'Resoluion & Frame Rate': [];\n    Function: [];\n    Certification: [];\n    ranking: number;\n    mission: string;\n}\n\nfunction ProductCard(props: ProductCardProps) {\n    const {\n        imageUrl = defaultImageUrl,\n        name,\n        price,\n        code,\n        'Resoluion & Frame Rate': resolution,\n        Function,\n        Certification,\n        ranking,\n        mission\n    } = props;\n\n    const [hover, setHover] = useState(false);\n    return (\n        <Card className=\"relative cursor-pointer\" style={{overflow: 'visible'}}>\n            <div onMouseEnter={() => setHover(true)} onMouseLeave={() => setHover(false)}>\n                {/*Tag*/}\n                <div className=\"absolute top-0 left-0 flex\">\n                    <div\n                        className=\"pl-2 pr-4 py-1 bg-primary text-sm text-white text-center mr-4\"\n                        style={{width: '55px', clipPath: 'polygon(0% 0%, 0% 100%, 40px 100%, 100% 0%)'}}\n                    >\n                        <p>#{ranking}</p>\n                    </div>\n\n                    <div\n                        className=\"pl-4 pr-2 py-1 bg-primary text-sm text-white\"\n                        style={{clipPath: 'polygon(15px 0%, 0% 100%, 100% 100%, 100% 0%)'}}\n                    >\n                        <p>{mission}</p>\n                    </div>\n                </div>\n\n                <div className=\"bg-image my-4\" style={{\n                    width: '180px',\n                    height: '180px',\n                    backgroundImage: `url('${imageUrl}')`\n                }} />\n\n                <div className=\"flex justify-between items-center\">\n                    <Tooltip content={name} effect=\"light\" className=\"overflow-hidden\">\n                        <h2 className=\"text-base text-context text-ellipsis\">{name}</h2>\n                    </Tooltip>\n                    <p className=\"text-base text-context\">${price}</p>\n                </div>\n                <p className=\"text-base text-context\">{code}</p>\n\n                {/*Hover: Information*/}\n                {\n                    (resolution.length || Function.length || Certification.length)\n                        ?\n                        <div\n                            className={`absolute right-0 bottom-2 left-0 z-20 mt-4 px-5 pb-5 transform translate-y-full bg-white rounded ${hover ? '' : 'hidden'}`}\n                            style={{boxShadow: '0 4px 4px 0 rgb(0 0 0 / 12%), 0 6px 6px 0 rgb(0 0 0 / 4%)'}}\n                        >\n                            {\n                                resolution.length ? <p>Resolution: <span className=\"text-sm text-context\">{resolution.join(', ')}</span></p> : ''\n                            }\n                            {\n                                Function.length ? <p>Function: <span className=\"text-sm text-context\">{Function.join(', ')}</span></p> : ''\n                            }\n                            {\n                                Certification.length ? <p>Certification: <span className=\"text-sm text-context\">{Certification.join(', ')}</span></p> : ''\n                            }\n                        </div>\n                        : ''\n                }\n            </div>\n        </Card>\n    )\n}\n\nexport default ProductCard\n\n\n","export default \"data:image/jpeg;base64,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\"","import {useEffect, useState} from \"react\";\n\nexport function useUpdateEffect(cb: () => void, depend: any[]) {\n    const [status, setStatus] = useState(false);\n\n    useEffect(() => {\n        if(status) {\n            cb()\n        } else {\n            setStatus(true)\n        }\n    }, depend)\n}\n","import React, {useCallback, useEffect, useState} from 'react'\nimport {RiArrowDownSLine, RiSubtractLine} from 'react-icons/ri'\nimport {Button, Tag, Select} from 'element-react'\nimport {Adapter, OptionItem} from \"../types/common\";\nimport {CollapseProps, FormGroup, FormItem} from \"../types/filter\";\nimport {initDocumentCameraForm, initVideoProjectorForm, initWebcamForm} from \"../utils/common\";\n\nexport enum INPUT_TYPE {\n    BUTTON,\n    DROPDOWN,\n    SCROLL_BAR,\n}\n\ninterface CollapseItemProps {\n    label: string,\n    children: JSX.Element;\n}\n\nfunction CollapseItem(props: CollapseItemProps) {\n    const {\n        label,\n        children\n    } = props;\n\n    const [active, setActive] = useState(false);\n\n    const handleClick = () => {\n        setActive(value => !value);\n    };\n\n    return (\n        <div>\n            <div\n                className=\"flex justify-between items-center py-2 cursor-pointer border-b-2 border-solid\"\n                onClick={handleClick}\n            >\n                <h2>{label}</h2>\n                <div className=\"text-2xl\">\n                    {\n                        active ? <RiSubtractLine/> : <RiArrowDownSLine/>\n                    }\n                </div>\n            </div>\n            <div className={`h-0 ${active && 'h-auto'} overflow-y-hidden`}>\n                {children}\n            </div>\n        </div>\n    )\n}\n\nconst formatTags = (form: FormGroup[]): { label: string, keys: string[] }[] => {\n    const ary: { label: string, keys: string[] }[] = [];\n    form.forEach((group: FormGroup) => {\n        group.items.forEach((item: FormItem) => {\n            item.items.forEach((it: OptionItem) => {\n                if (it.checked) {\n                    ary.push({\n                        label: it.label,\n                        keys: [group.key, item.key, it.value]\n                    })\n                }\n            })\n        })\n    });\n    return ary\n};\n\nfunction Collapse(props: CollapseProps) {\n    const {height = '300px', type = 'webcam', onFilter} = props;\n    const [form, setForm] = useState<FormGroup[]>([]);\n\n    const resetForm = useCallback(() => {\n        const formAdapter: Adapter<() => FormGroup[]> = {\n            'webcam': initWebcamForm,\n            'video projector': initVideoProjectorForm,\n            'document camera': initDocumentCameraForm,\n            default: initWebcamForm\n        };\n        const formFn = formAdapter[type] || formAdapter.default;\n        setForm(formFn())\n    }, [type]);\n\n    useEffect(() => {\n        resetForm();\n    }, [type, resetForm]);\n\n    // 將 form 中 對應的 OptionItem 的 checked 改變。其他選項不動。\n    const handleClickButton = (keys: string[], value: boolean) => {\n        const _form = form.map((group: FormGroup): FormGroup => {\n            return {\n                ...group,\n                items: group.items.map((item: FormItem): FormItem => {\n                    return {\n                        ...item,\n                        items: item.items.map((it: OptionItem): OptionItem => {\n                            const isTarget = group.key === keys[0] && item.key === keys[1] && it.value === keys[2];\n                            return {\n                                ...it,\n                                checked: isTarget ? value : it.checked\n                            }\n                        })\n                    }\n                })\n            }\n        });\n        setForm(_form)\n    };\n\n    const handleChangeSelect = (keys: string[], value: string) => {\n        const _form = form.map((group: FormGroup): FormGroup => {\n            return {\n                ...group,\n                items: group.items.map((item: FormItem): FormItem => {\n                    return {\n                        ...item,\n                        items: item.items.map((it: OptionItem): OptionItem => {\n                            const isTarget = group.key === keys[0] && item.key === keys[1] && it.value === value;\n                            return {\n                                ...it,\n                                checked: isTarget\n                            }\n                        })\n                    }\n                })\n            }\n        });\n        setForm(_form)\n    };\n\n    const handleClear = () => {\n        resetForm()\n    };\n\n    const handleSearch = () => {\n        const result: any = {};\n        form.forEach((group: FormGroup) => {\n            group.items.forEach((item: FormItem) => {\n                let isFirst = true;\n                const value = item.items.reduce((value: string, it: OptionItem): string => {\n                    if (it.checked) {\n                        if (!isFirst) {\n                            value += `,`\n                        }\n                        isFirst = false;\n                        value += `${it.value}`\n                    }\n                    return value\n                }, '');\n                if (value) {\n                    result[item.key] = value\n                }\n            })\n        });\n        onFilter(result)\n    };\n\n    return (\n        <div className=\"flex flex-col justify-between overflow-y-scroll\" style={{height}}>\n            <div className=\"pr-4\">\n                <h2 className=\"text-2xl font-medium pb-2\">Advanced Filter</h2>\n                {\n                    form.map((group: FormGroup) => (\n                        <CollapseItem label={group.label}>\n                            <div className=\"p-4\">\n                                {\n                                    group.items.map((item: FormItem) => (\n                                        <>\n                                            <h2 className=\"my-2\">{item.label}</h2>\n\n                                            {\n                                                item.type === INPUT_TYPE.BUTTON && item.items.map((it: OptionItem) => (\n                                                    <Button\n                                                        className=\"cursor-pointer\"\n                                                        type={it.checked ? \"primary\" : \"info\"}\n                                                        size=\"small\"\n                                                        onClick={() => handleClickButton([group.key, item.key, it.value], !it.checked)}\n                                                        style={{marginLeft: 0, margin: '4px 5px'}}\n                                                    >\n                                                        {it.label}\n                                                    </Button>\n                                                ))\n                                            }\n                                            {\n                                                item.type === INPUT_TYPE.DROPDOWN && (\n                                                    <Select\n                                                        placeholder=\"Select\"\n                                                        value={\n                                                            item.items.find(it => it.checked)\n                                                                ? item.items.find(it => it.checked)!.value\n                                                                : undefined\n                                                        }\n                                                        clearable\n                                                        onChange={(value: string) => handleChangeSelect([group.key, item.key], value)}\n                                                    >\n                                                        {\n                                                            item.items.map((it: OptionItem) =>\n                                                                <Select.Option\n                                                                    key={it.value}\n                                                                    label={it.label}\n                                                                    value={it.value}\n                                                                />\n                                                            )\n                                                        }\n                                                    </Select>\n                                                )\n                                            }\n                                        </>\n                                    ))\n                                }\n                            </div>\n                        </CollapseItem>\n                    ))\n                }\n                <div className=\"py-4 flex justify-end\">\n                    <Button type=\"info\" onClick={handleClear}>Clear</Button>\n                    <Button type=\"primary\" onClick={handleSearch}>Search</Button>\n                </div>\n            </div>\n\n            <div className=\"border border-2 p-4\">\n                {\n                    formatTags(form).map((it: { label: string, keys: string[] }) => (\n                        <Tag\n                            className=\"mr-2\"\n                            type=\"primary\"\n                            closable={false}\n                            onClose={() => handleClickButton(it.keys, false)}\n                        >\n                            {it.label}\n                        </Tag>\n                    ))\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default Collapse\n","import dayjs from \"dayjs\";\nimport {FormGroup} from \"../types/filter\";\nimport {INPUT_TYPE} from \"../components/Collapse\";\n\nexport function formatDate(value: ElementReactLibs.dateType[]): [string, string] {\n    return [dayjs(value[0]).format('YYYY-MM-DD'), dayjs(value[1]).format('YYYY-MM-DD')]\n}\n\nexport function initCategoryOptions(): ElementReact.SelectOptionProps[] {\n    return [\n        {label: 'Webcam', value: 'webcam'},\n        {label: 'Doc cam', value: 'document camera'},\n        {label: 'Projector', value: 'video projector'},\n    ]\n}\n\nexport function initRegionOptions(): ElementReact.SelectOptionProps[] {\n    return [\n        {label: 'US', value: 'US'},\n        {label: 'UK', value: 'UK'},\n    ]\n}\n\nexport function initDate(): ElementReactLibs.dateType[] {\n    const startDate = dayjs().subtract(2, 'week').startOf('week').toDate()\n    const endDate = dayjs().subtract(1, 'week').startOf('week').toDate()\n    return [startDate, endDate];\n}\n\nexport function initWebcamForm(): FormGroup[] {\n    return [\n        {\n            label: 'Resolution & Frame Rate',\n            key: 'resolution',\n            items: [\n                {\n                    label: 'Resolution',\n                    key: 'webcam_resolution',\n                    type: INPUT_TYPE.BUTTON,\n                    items: [\n                        {label: '720p', value: '720p', checked: false},\n                        {label: '1080p', value: '1080p', checked: false},\n                        {label: '2K', value: '2K', checked: false},\n                        {label: '4K', value: '4K', checked: false},\n                    ]\n                },\n                {\n                    label: 'Frame Rate',\n                    key: 'webcam_framerate',\n                    type: INPUT_TYPE.BUTTON,\n                    items: [\n                        {label: '30fps', value: '30fps', checked: false},\n                        {label: '60fps', value: '60fps', checked: false},\n                        {label: '90fps', value: '90fps', checked: false},\n                    ]\n                }\n            ]\n        },\n        {\n            label: 'Function',\n            key: 'function',\n            items: [\n                {\n                    label: 'FOV',\n                    key: 'FOV',\n                    type: INPUT_TYPE.DROPDOWN,\n                    items: [\n                        {label: 'Normal', value: 'Normal', checked: false},\n                        {label: 'Wide', value: 'Wide', checked: false},\n                    ],\n                },\n                {\n                    label: 'Streaming Recording',\n                    key: 'streaming_recording',\n                    type: INPUT_TYPE.DROPDOWN,\n                    items: [\n                        {label: 'Streaming', value: 'Streaming', checked: false},\n                        {label: 'Recording', value: 'Recording', checked: false},\n                        {label: 'Streaming & Recording', value: 'StreamingAndRecording', checked: false},\n                        {label: 'Streaming or Recording', value: 'StreamingOrRecording', checked: false},\n                    ],\n                },\n                {\n\n                    label: 'Function',\n                    key: 'function',\n                    type: INPUT_TYPE.BUTTON,\n                    items: [\n                        {label: 'HDR/WDR', value: 'HDR/WDR', checked: false},\n                        {label: 'Adjustable FOV', value: 'Adjustable FOV', checked: false},\n                        {label: 'Auto Focus', value: 'Auto Focus', checked: false},\n                        {label: 'Digitial Zoom', value: 'Digitial Zoom', checked: false},\n                        {label: 'Pan+Tilt', value: 'Pan+Tilt', checked: false},\n                        {label: 'Dual Mics', value: 'Dual Mics', checked: false},\n                        {label: 'IR Technology', value: 'IR Technology', checked: false},\n                        {label: 'Universal Clip', value: 'Universal Clip', checked: false},\n                        {label: 'Tripod Thread', value: 'Tripod Thread', checked: false},\n                        {label: 'Privacy Shutter', value: 'Privacy Shutter', checked: false},\n                        {label: 'Included Tripod', value: 'Included Tripod', checked: false},\n                        {label: 'Glass Lens', value: 'Glass Lens', checked: false},\n                    ]\n                }\n            ]\n        },\n\n        {\n            label: 'Certification',\n            key: 'certification',\n            items: [\n                {\n                    label: '',\n                    key: 'certifiction',\n                    type: INPUT_TYPE.BUTTON,\n                    items: [\n                        {label: 'Zoom', value: 'Zoom', checked: false},\n                        {label: 'Micrsoft Teams', value: 'Micrsoft Teams', checked: false},\n                        {label: 'Google Meet', value: 'Google Meet', checked: false},\n                        {label: 'Ciscso WebEx', value: 'Ciscso WebEx', checked: false},\n                    ]\n                },\n            ]\n        },\n    ]\n}\n\nexport function initVideoProjectorForm(): FormGroup[] {\n    return [\n        {\n            label: 'Display Technology',\n            key: 'display-technology',\n            items: [\n                {\n                    label: '',\n                    key: 'framerate',\n                    type: INPUT_TYPE.BUTTON,\n                    items: [\n                        {label: 'DLP', value: 'DLP', checked: false},\n                        {label: '3LCD', value: '3LCD', checked: false},\n                        {label: 'LCD/LCoS', value: 'LCD/LCoS', checked: false},\n                    ]\n                }\n            ]\n        },\n        {\n            label: 'Resolution',\n            key: 'Resolution',\n            items: [\n                {\n                    label: '',\n                    key: 'shotting',\n                    type: INPUT_TYPE.BUTTON,\n                    items: [\n                        {label: '<720p', value: '<720p', checked: false},\n                        {label: '720p', value: '720p', checked: false},\n                        {label: '1080p', value: '1080p', checked: false},\n                        {label: '2K', value: '2K', checked: false},\n                        {label: '4K', value: '4K', checked: false},\n                    ],\n                },\n            ]\n        },\n        {\n            label: 'Brightness',\n            key: 'brightness',\n            items: [\n                {\n                    label: '',\n                    key: 'brightness',\n                    type: INPUT_TYPE.BUTTON,\n                    items: [\n                        {label: '<500 ANSI', value: '<500 ANSI', checked: false},\n                        {label: '500~1000 ANSI', value: '500~1000 ANSI', checked: false},\n                        {label: '1001~3000 ANSI', value: '1001~3000 ANSI', checked: false},\n                        {label: '>3000 ANSI', value: '>3000 ANSI', checked: false},\n                    ]\n                },\n            ]\n        },\n        {\n            label: 'Connectivity',\n            key: 'connectiviity',\n            items: [\n                {\n                    label: '',\n                    key: 'connectivity',\n                    type: INPUT_TYPE.BUTTON,\n                    items: [\n                        {label: 'HDMI', value: 'HDMI', checked: false},\n                        {label: 'Wifi', value: 'Wifi', checked: false},\n                        {label: 'TYPE C', value: 'TYPE C', checked: false},\n                        {label: 'VGA', value: 'VGA', checked: false},\n                        {label: 'USB A', value: 'USB A', checked: false},\n                        {label: 'Power Adapter', value: 'Power Adapter', checked: false},\n                    ]\n                },\n            ]\n        },\n        {\n            label: 'Other Function',\n            key: 'other-function',\n            items: [\n                {\n                    label: '',\n                    key: 'other',\n                    type: INPUT_TYPE.BUTTON,\n                    items: [\n                        {label: 'Auto Focus', value: 'Auto Focus', checked: false},\n                        {label: 'ToF', value: 'ToF', checked: false},\n                        {label: 'Auto Keystone Correction', value: 'Auto Keystone Correction', checked: false},\n                        {label: 'Work for Android', value: 'Work for Android', checked: false},\n                        {label: 'Built in Battery', value: 'Built in Battery', checked: false},\n                    ]\n                },\n            ]\n        },\n    ]\n}\n\nexport function initDocumentCameraForm(): FormGroup[] {\n    return [\n        {\n            label: 'Resolution & Frame Rate',\n            key: 'resolution',\n            items: [\n                {\n                    label: '',\n                    key: 'framerate',\n                    type: INPUT_TYPE.BUTTON,\n                    items: [\n                        {label: '1080p', value: '1080p', checked: false},\n                        {label: '2K', value: '2K', checked: false},\n                        {label: '4K or more', value: '4K or more', checked: false},\n                    ]\n                }\n            ]\n        },\n        {\n            label: 'Shooting Area',\n            key: 'shooting-area',\n            items: [\n                {\n                    label: '',\n                    key: 'shotting',\n                    type: INPUT_TYPE.BUTTON,\n                    items: [\n                        {label: '>11\" x 16.5\"', value: '>11\" x 16.5\"', checked: false},\n                        {label: '<=11\" x 16.5\"', value: '<=11\" x 16.5\"', checked: false},\n                    ],\n                },\n            ]\n        },\n        {\n            label: 'MIC / Microphone',\n            key: 'Mic/Microphone',\n            items: [\n                {\n                    label: '',\n                    key: 'mic',\n                    type: INPUT_TYPE.BUTTON,\n                    items: [\n                        {label: 'MIC/Microphone', value: 'MIC/Microphone', checked: false},\n                    ]\n                },\n            ]\n        },\n        {\n            label: 'Connectivity',\n            key: 'connectiviity',\n            items: [\n                {\n                    label: '',\n                    key: 'connect',\n                    type: INPUT_TYPE.BUTTON,\n                    items: [\n                        {label: 'USB', value: 'USB', checked: false},\n                        {label: 'HDMI out', value: 'HDMI out', checked: false},\n                        {label: 'VGA', value: 'VGA', checked: false},\n                        {label: 'HDMI in', value: 'HDMI in', checked: false},\n                    ]\n                },\n            ]\n        },\n    ]\n}\n","import React, {useEffect, useState} from 'react';\nimport {Button, Dialog, Pagination, Tag} from \"element-react\";\nimport {ProductItemResponse, ProductsResponse} from \"../types/product\";\nimport {getProducts} from \"../apis/product\";\nimport {Adapter, iDialog} from \"../types/common\";\nimport {ProductCardProps} from \"./ProductCard\";\nimport ProductCard from \"./ProductCard\";\nimport {useUpdateEffect} from \"../utils/hook\";\nimport {BsSquare, BsCheckSquare} from 'react-icons/bs'\nimport {formatDate} from \"../utils/common\";\n\ninterface ProductDialogProps extends iDialog {\n    params: any;\n    onDownload: (asin: string[]) => {};\n}\n\nfunction ProductsDownloadDialog(props: ProductDialogProps) {\n    const {visible, setVisible, params, onDownload} = props;\n    const [products, setProducts] = useState<ProductsResponse | null>(null);\n    const [asinValue, setAsinValue] = useState<string[]>([]);\n    const [page, setPage] = useState(1);\n    const [totalPage, setTotalPage] = useState(1);\n\n    const fetchData = async () => {\n        if (params.date) {\n            const [start_at, end_at] = formatDate(params.date);\n            params.start_at = start_at;\n            params.end_at = end_at;\n        }\n        if (params.stock) {\n            const adapter: Adapter<string> = {\n                'Available': 'unknown',\n                'High stock': 'height',\n                'Low stock': 'low',\n                'Out of stock': 'out',\n                default: ''\n            };\n            params.stock = adapter[params.stock]\n        }\n        const {data} = await getProducts({...params, page});\n        setProducts(data);\n        setTotalPage(data.info.max_page);\n    };\n\n    useEffect(() => {\n        if (!visible) return;\n        setPage(1);\n        setAsinValue([]);\n        if (page === 1) fetchData()\n    }, [visible]);\n\n    useUpdateEffect(() => {\n        fetchData()\n    }, [page]);\n\n    const handleSelectProduct = (asin: string) => {\n        if (asinValue.includes(asin)) {\n            setAsinValue(asinValue.filter((it: string) => it !== asin))\n        } else {\n            setAsinValue([...asinValue, asin])\n        }\n    };\n\n    const handleCloseTag = (asin: string) => {\n        setAsinValue(asinValue.filter((it: string) => it !== asin))\n    };\n\n    return (\n        <Dialog\n            top=\"30px\"\n            size=\"large\"\n            visible={visible}\n            onCancel={() => setVisible(false)}\n        >\n            <Dialog.Body>\n                <div className=\"w-full overflow-x-scroll\">\n                    <div className=\"main-container\">\n                        {products && products.prods.length\n                            ? (\n                                <div className=\"flex flex-wrap -mx-1 mt-4\">\n                                    {\n                                        products.prods.map((it: ProductItemResponse) => {\n                                            const props: ProductCardProps = {\n                                                name: it.name,\n                                                price: it.price,\n                                                code: it.ASIN,\n                                                imageUrl: it.image_url[0],\n                                                'Resoluion & Frame Rate': it['Resoluion & Frame Rate'],\n                                                Function: it.Function,\n                                                Certification: it.Certification,\n                                                ranking: it.ranking,\n                                                mission: it.mission,\n                                            };\n                                            return (\n                                                <div\n                                                    className=\"relative mx-1 mb-2\"\n                                                    style={{width: 'calc(20% - 0.5rem)'}}\n                                                    onClick={() => handleSelectProduct(it.ASIN)}\n                                                >\n                                                    <div className=\"absolute -right-1 -top-1 z-50 text-lg bg-white cursor-pointer\">\n                                                        { asinValue.includes(it.ASIN) ? <BsCheckSquare/> : <BsSquare /> }\n                                                    </div>\n                                                    <ProductCard {...props}/>\n                                                </div>\n                                            )\n                                        })\n                                    }\n                                </div>\n                            )\n                            : (\n                                <div className=\"flex justify-center items-center px-4 py-8\">\n                                    <h3 className=\"text-gray-400\">No Data</h3>\n                                </div>\n                            )\n                        }\n                        {\n                            totalPage >= 1 && (\n                                <div className=\"flex justify-center my-8\">\n                                    <Pagination\n                                        layout=\"prev, pager, next\"\n                                        pageCount={totalPage}\n                                        currentPage={page}\n                                        onCurrentChange={(value: number) => setPage(value)}/>\n                                </div>\n                            )\n                        }\n                    </div>\n                </div>\n\n                <div>\n                    <h3 className=\"text-lg\">Selected Products</h3>\n                    <div className=\"border border-2 p-4 mt-2\" style={{minHeight: '100px'}}>\n                        {\n                            asinValue.map((asin: string) => (\n                                <Tag\n                                    className=\"mr-2\"\n                                    type=\"primary\"\n                                    closable={false}\n                                    onClose={() => handleCloseTag(asin)}\n                                >\n                                    {asin}\n                                </Tag>\n                            ))\n                        }\n                    </div>\n                    <div className=\"mt-2 flex justify-end\">\n                        <Button type=\"primary\" onClick={() => onDownload(asinValue)}>Download</Button>\n                    </div>\n                </div>\n            </Dialog.Body>\n        </Dialog>\n    )\n}\n\nexport default ProductsDownloadDialog\n","import request from './https'\nimport { AxiosPromise } from \"axios\";\nimport {\n    NewCommentBarChart,\n    PriceDistributionBarLineChart,\n    ProductBarChart,\n    SearchParams,\n    StockChartData,\n    TopBrandBarChart,\n    TopBrandPieChart,\n    TableResponse,\n    PopularPriceRangeResponse,\n    PopularResolutionResponse,\n    TableTopProductResponse,\n    TableTopBrandResponse,\n} from \"../types/market\";\nimport {FtiRankingChartResponse} from \"../types/product\";\n\nexport function getTopBrandBarChart(data: SearchParams) {\n    return request({\n        url:'/market/get_top_brand_bar_chart',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<TopBrandBarChart>\n}\n\nexport function getTopBrandPieChart(data: SearchParams) {\n    return request({\n        url:'/market/get_top_brand_pie_chart',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<TopBrandPieChart>\n}\n\nexport function getTopProductBarChart(data: SearchParams) {\n    return request({\n        url:'/market/get_top_product_bar_chart',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<ProductBarChart>\n}\n\nexport function getNewCommentBarChart(data: SearchParams) {\n    return request({\n        url: '/market/new_comments_bar_chart',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<NewCommentBarChart>\n}\n\nexport function getPriceDistributionBarLineChart(data: SearchParams) {\n    return request({\n        url: '/market/price_distribution_barline_chart',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<PriceDistributionBarLineChart>\n}\n\nexport function getInstockStockChart(data: SearchParams) {\n    return request({\n        url: '/market/instock_stock_chart',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<StockChartData>\n}\n\nexport function getTable(data: SearchParams) {\n    return request({\n        url: '/market/get_table',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<TableResponse>\n}\n\nexport function getTableNewComments(data: SearchParams) {\n    return request({\n        url: '/market/get_table_new_comments',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<TableResponse>\n}\n\nexport function getTableTopBrand(data: SearchParams) {\n    return request({\n        url: '/market/get_table_top_brand',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<TableTopBrandResponse>\n}\n\nexport function getTableTopProduct(data: SearchParams) {\n    return request({\n        url: '/market/get_table_top_product',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<TableTopProductResponse>\n}\n\nexport function getPopularPriceRange(data: SearchParams) {\n    return request({\n        url: '/market/dashboard_popular_price_range',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<PopularPriceRangeResponse>\n}\n\nexport function getPopularResolutions(data: SearchParams) {\n    return request({\n        url: '/market/get_most_popular_resolutions',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<PopularResolutionResponse>\n}\n\nexport function getAmazonTop100DashBoardTime() {\n    return request({\n        url: `/market/dashboard_show_time`,\n        method: 'GET'\n    }) as AxiosPromise<{dashboard_time: string}>\n}\n\nexport function getDownloadTableTopBrand(dl: number) {\n    return request({\n        url: '/market/get_table_top_brand',\n        method:'GET',\n        params: {dl}\n    })\n}\n\nexport function getFtiRankingChart(data: SearchParams) {\n    return request({\n        url: '/market/get_FTI_rankings',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<FtiRankingChartResponse>\n}\n","import request from './https'\nimport {AxiosPromise} from 'axios'\nimport {\n    AmazonsChoice,\n    AmazonsChoiceRate, SearchSearchCloudParams,\n    SearchVolumeChartResponse,\n    Sponsored,\n    SponsoredAvg,\n    SponsoredRate, TableSearchCloudResponse, TableSponsoredResponse, WordCloudResponse\n} from \"../types/seo\";\nimport {SearchParams} from \"../types/market\";\n\nexport function getSponsored(data: SearchParams) {\n    return request({\n        url: '/SEO/sponsored',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<Sponsored>\n}\n\nexport function getSponsoredAvg(data: SearchParams) {\n    return request({\n        url: '/SEO/sponsored_avg_rank_increase',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<SponsoredAvg>\n}\n\nexport function getSponsoredRate(data: SearchParams) {\n    return request({\n        url: '/SEO/sponsored_rate',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<SponsoredRate>\n}\n\nexport function getAmazonsChoice(data: SearchParams) {\n    return request({\n        url: '/SEO/amazons_choice',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<AmazonsChoice>\n}\n\nexport function getAmazonsChoiceRate(data: SearchParams) {\n    return request({\n        url: '/SEO/amazons_choice_rate',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<AmazonsChoiceRate>\n}\n\nexport function getKeywordWordCloud(data: SearchParams) {\n    return request({\n        url: '/SEO/get_keyword_word_cloud',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<WordCloudResponse>\n}\n\nexport function getSearchVolumeBarChart(data: SearchParams) {\n    return request({\n        url: '/SEO/get_search_volumn_bar_chart',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<SearchVolumeChartResponse>\n}\n\nexport function getTableSponsored(data: SearchParams) {\n    return request({\n        url: '/SEO/get_table_sponsored',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<TableSponsoredResponse>\n}\n\nexport function getTableSearchCloud(data: SearchSearchCloudParams) {\n    return request({\n        url: '/SEO/get_table_search_cloud',\n        method: 'GET',\n        params: data\n    }) as AxiosPromise<TableSearchCloudResponse>\n}\n","import React, {useEffect, useRef} from 'react'\nimport * as echarts from \"echarts/core\";\nimport {HiDownload} from \"react-icons/hi\";\nimport {downloadPng} from \"../../../utils/download\";\nimport {LineChart, LineSeriesOption} from \"echarts/charts\";\nimport {\n    GridComponent,\n    GridComponentOption,\n    TooltipComponent,\n    TooltipComponentOption,\n    DataZoomComponent,\n    DataZoomComponentOption\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\n\ntype ECOption = echarts.ComposeOption<LineSeriesOption | GridComponentOption | TooltipComponentOption | DataZoomComponentOption>;\n\necharts.use([LineChart, GridComponent, TooltipComponent, DataZoomComponent, CanvasRenderer])\n\nfunction Review(props: {axis: string[]; data: string[]}) {\n    const {axis, data} = props;\n    const chartRef = useRef<HTMLDivElement | null>(null);\n    // const [selectValue, setSelectValue] = useState(1); // Unit: Month\n\n    const option: ECOption = {\n        grid: {\n            top: '10%',\n            right: '5%',\n            bottom: '20%',\n            left: '10%',\n        },\n        dataZoom: [\n            {\n                show: true,\n                realtime: true,\n            },\n            {\n                type: 'inside',\n                show: true,\n                realtime: true,\n            }\n        ],\n        tooltip: {\n            trigger: 'axis'\n        },\n        xAxis: [\n            {\n                type: 'category',\n                data: axis,\n            }\n        ],\n        yAxis: [\n            {\n                type: 'value',\n            }\n        ],\n        series: [\n            {\n                type: 'line',\n                name: 'Reviews',\n                data: data\n            },\n        ]\n    }\n\n    useEffect(() => {\n        if (!chartRef.current) return\n\n        const chart = echarts.init(chartRef.current, 'customed')\n        chart.setOption(option)\n    })\n\n    // const rangeChangeHandler = (value: number) => {\n    //     setSelectValue(value)\n    // }\n\n    const onDownload = async () => {\n        if (!chartRef.current) return\n\n        await downloadPng(chartRef.current, 'title')\n    }\n\n    return (\n        <div className=\"relative border-2 rounded mx-8 mt-10\" style={{height: '400px'}}>\n            <HiDownload className=\"absolute right-2 top-2 text-3xl cursor-pointe z-30r\" onClick={onDownload}/>\n            <div className=\"flex items-center mt-2 px-2\">\n                <h1 className=\"text-xl mr-4\">Review in Past</h1>\n                {/*<div className=\"flex\">*/}\n                    {/*<Button type={selectValue === 1 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(1)}*/}\n                    {/*>1 Month</Button>*/}\n                    {/*<Button type={selectValue === 3 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(3)}*/}\n                    {/*>3 Months</Button>*/}\n                    {/*<Button type={selectValue === 6 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(6)}*/}\n                    {/*>6 Months</Button>*/}\n                    {/*<Button type={selectValue === 12 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(12)}*/}\n                    {/*>1 Year</Button>*/}\n                {/*</div>*/}\n            </div>\n            <div ref={chartRef} style={{height: '350px', width: '570px'}}/>\n        </div>\n    )\n}\n\nexport default Review\n","import React, {useEffect, useRef} from 'react'\nimport * as echarts from \"echarts/core\";\nimport {HiDownload} from \"react-icons/hi\";\nimport {downloadPng} from \"../../../utils/download\";\nimport {LineChart, LineSeriesOption} from \"echarts/charts\";\nimport {\n    GridComponent,\n    GridComponentOption,\n    TooltipComponent,\n    TooltipComponentOption,\n    DataZoomComponent,\n    DataZoomComponentOption\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\n\ntype ECOption = echarts.ComposeOption<LineSeriesOption | GridComponentOption | TooltipComponentOption | DataZoomComponentOption>;\n\necharts.use([LineChart, GridComponent, TooltipComponent, DataZoomComponent, CanvasRenderer])\n\nfunction Rank(props: {axis: string[]; data: number[]}) {\n    const {axis, data} = props;\n    const chartRef = useRef<HTMLDivElement | null>(null);\n    // const [selectValue, setSelectValue] = useState(1); // Unit: Month\n\n    const option: ECOption = {\n        grid: {\n            top: '10%',\n            right: '5%',\n            bottom: '20%',\n            left: '15%',\n        },\n        dataZoom: [\n            {\n                show: true,\n                realtime: true,\n            },\n            {\n                type: 'inside',\n                show: true,\n                realtime: true,\n            }\n        ],\n        tooltip: {\n            trigger: 'axis'\n        },\n        xAxis: [\n            {\n                type: 'category',\n                data: axis,\n            }\n        ],\n        yAxis: [\n            {\n                type: 'value',\n                inverse: true,\n                position: 'top',\n                min: 1,\n            }\n        ],\n        series: [\n            {\n                type: 'line',\n                name: 'Rank',\n                data: data\n            },\n        ]\n    }\n\n    useEffect(() => {\n        if (!chartRef.current) return\n\n        const chart = echarts.init(chartRef.current, 'customed')\n        chart.setOption(option)\n    })\n\n    // const rangeChangeHandler = (value: number) => {\n    //     setSelectValue(value)\n    // }\n\n    const onDownload = async () => {\n        if (!chartRef.current) return\n\n        await downloadPng(chartRef.current, 'title')\n    }\n\n    return (\n        <div className=\"relative border-2 rounded mx-8 mt-10\" style={{height: '400px'}}>\n            <HiDownload className=\"absolute right-2 top-2 text-3xl cursor-pointer z-30\" onClick={onDownload}/>\n            <div className=\"flex items-center px-2\" style={{height: '50px'}}>\n                <h1 className=\"text-xl mr-4\">Rank in Past</h1>\n                {/*<div className=\"flex\">*/}\n                    {/*<Button type={selectValue === 1 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(1)}*/}\n                    {/*>1 Month</Button>*/}\n                    {/*<Button type={selectValue === 3 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(3)}*/}\n                    {/*>3 Months</Button>*/}\n                    {/*<Button type={selectValue === 6 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(6)}*/}\n                    {/*>6 Months</Button>*/}\n                    {/*<Button type={selectValue === 12 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(12)}*/}\n                    {/*>1 Year</Button>*/}\n                {/*</div>*/}\n            </div>\n            <div ref={chartRef} style={{height: '350px', width: '570px'}}/>\n            {/*/!*Bar*!/*/}\n            {/*<div style={{height: '100px'}}>*/}\n                {/*/!*<div className=\"border-2 rounded p-2 w-5/6 mx-auto flex\">*!/*/}\n                {/*/!*</div>*!/*/}\n            {/*</div>*/}\n        </div>\n    )\n}\n\nexport default Rank\n","import React, {useEffect, useRef} from 'react'\nimport * as echarts from \"echarts/core\";\nimport {HiDownload} from \"react-icons/hi\";\nimport {downloadPng} from \"../../../utils/download\";\nimport {LineChart, LineSeriesOption} from \"echarts/charts\";\nimport {\n    GridComponent,\n    GridComponentOption,\n    TooltipComponent,\n    TooltipComponentOption,\n    DataZoomComponent,\n    DataZoomComponentOption\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\n\ntype ECOption = echarts.ComposeOption<LineSeriesOption | GridComponentOption | TooltipComponentOption | DataZoomComponentOption>;\n\necharts.use([LineChart, GridComponent, TooltipComponent, DataZoomComponent, CanvasRenderer])\n\nfunction StockLevel(props: {axis: string[]; data: string[]}) {\n    const {axis, data} = props;\n    const chartRef = useRef<HTMLDivElement | null>(null);\n    // const [selectValue, setSelectValue] = useState(1); // Unit: Month\n\n    const option: ECOption = {\n        grid: {\n            top: '10%',\n            right: '5%',\n            bottom: '20%',\n            left: '15%',\n        },\n        dataZoom: [\n            {\n                show: true,\n                realtime: true,\n            },\n            {\n                type: 'inside',\n                show: true,\n                realtime: true,\n            }\n        ],\n        tooltip: {\n            trigger: 'axis'\n        },\n        xAxis: [\n            {\n                type: 'category',\n                data: axis\n            }\n        ],\n        yAxis: [\n            {\n                type: 'category',\n                data: ['High Stock', 'Low Stock', 'Out of Stocks'],\n                inverse: true\n            }\n        ],\n        series: [\n            {\n                type: 'line',\n                name: 'StockLevels',\n                data: data,\n            },\n        ]\n    }\n\n    useEffect(() => {\n        if (!chartRef.current) return\n\n        const chart = echarts.init(chartRef.current, 'customed')\n        chart.setOption(option)\n    })\n\n    // const rangeChangeHandler = (value: number) => {\n    //     setSelectValue(value)\n    // }\n\n    const onDownload = async () => {\n        if (!chartRef.current) return\n\n        await downloadPng(chartRef.current, 'title')\n    }\n\n    return (\n        <div className=\"relative border-2 rounded mx-8 mt-10\" style={{height: '400px'}}>\n            <HiDownload className=\"absolute right-2 top-2 text-3xl cursor-pointer z-30r\" onClick={onDownload}/>\n            <div className=\"flex items-center px-2\" style={{height: '50px'}}>\n                <h1 className=\"text-xl mr-4\">Stock Level in Past</h1>\n                {/*<div className=\"flex\">*/}\n                    {/*<Button type={selectValue === 1 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(1)}*/}\n                    {/*>1 Month</Button>*/}\n                    {/*<Button type={selectValue === 3 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(3)}*/}\n                    {/*>3 Months</Button>*/}\n                    {/*<Button type={selectValue === 6 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(6)}*/}\n                    {/*>6 Months</Button>*/}\n                    {/*<Button type={selectValue === 12 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(12)}*/}\n                    {/*>1 Year</Button>*/}\n                {/*</div>*/}\n            </div>\n            <div ref={chartRef} style={{height: '350px', width: '570px'}}/>\n        </div>\n    )\n}\n\nexport default StockLevel\n","import React, {useEffect, useRef} from 'react'\nimport * as echarts from \"echarts/core\";\nimport {HiDownload} from \"react-icons/hi\";\nimport {downloadPng} from \"../../../utils/download\";\nimport {LineChart, LineSeriesOption} from \"echarts/charts\";\nimport {\n    GridComponent,\n    GridComponentOption,\n    TooltipComponent,\n    TooltipComponentOption,\n    DataZoomComponent,\n    DataZoomComponentOption\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\n\ntype ECOption = echarts.ComposeOption<LineSeriesOption | GridComponentOption | TooltipComponentOption | DataZoomComponentOption>;\n\necharts.use([LineChart, GridComponent, TooltipComponent, DataZoomComponent, CanvasRenderer])\n\nfunction Price(props: {axis: string[]; data: number[]}) {\n    const {axis, data} = props;\n    const chartRef = useRef<HTMLDivElement | null>(null);\n    // const [selectValue, setSelectValue] = useState(1); // Unit: Month\n\n    const option: ECOption = {\n        grid: {\n            top: '10%',\n            right: '5%',\n            bottom: '20%',\n            left: '10%',\n        },\n        dataZoom: [\n            {\n                show: true,\n                realtime: true,\n            },\n            {\n                type: 'inside',\n                show: true,\n                realtime: true,\n            }\n        ],\n        tooltip: {\n            trigger: 'axis'\n        },\n        xAxis: [\n            {\n                type: 'category',\n                data: axis\n            }\n        ],\n        yAxis: [\n            {\n                type: 'value',\n            }\n        ],\n        series: [\n            {\n                type: 'line',\n                name: 'Price',\n                data: data\n            },\n        ]\n    }\n\n    useEffect(() => {\n        if (!chartRef.current) return\n\n        const chart = echarts.init(chartRef.current, 'customed')\n        chart.setOption(option)\n    })\n\n    // const rangeChangeHandler = (value: number) => {\n    //     setSelectValue(value)\n    // }\n\n    const onDownload = async () => {\n        if (!chartRef.current) return\n\n        await downloadPng(chartRef.current, 'title')\n    }\n\n    return (\n        <div className=\"relative border-2 rounded mx-8 mt-10\" style={{height: '400px'}}>\n            <HiDownload className=\"absolute right-2 top-2 text-3xl cursor-pointer z-30r\" onClick={onDownload}/>\n            <div className=\"flex items-center mt-2 px-2\">\n                <h1 className=\"text-xl mr-4\">Price in Past</h1>\n                {/*<div className=\"flex\">*/}\n                    {/*<Button type={selectValue === 1 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(1)}*/}\n                    {/*>1 Month</Button>*/}\n                    {/*<Button type={selectValue === 3 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(3)}*/}\n                    {/*>3 Months</Button>*/}\n                    {/*<Button type={selectValue === 6 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(6)}*/}\n                    {/*>6 Months</Button>*/}\n                    {/*<Button type={selectValue === 12 ? 'primary' : undefined}*/}\n                            {/*size=\"mini\"*/}\n                            {/*onClick={() => rangeChangeHandler(12)}*/}\n                    {/*>1 Year</Button>*/}\n                {/*</div>*/}\n            </div>\n            <div ref={chartRef} style={{height: '350px', width: '570px'}}/>\n        </div>\n    )\n}\n\nexport default Price\n","import React, {useEffect, useState} from 'react';\nimport {Card, Carousel, Dialog, Rate, Tooltip} from \"element-react\";\nimport {FaExternalLinkAlt} from 'react-icons/fa'\nimport defaultImage from '../../assets/default.jpeg'\nimport Review from \"./charts/Review\";\nimport Rank from \"./charts/Rank\";\nimport StockLevel from \"./charts/StockLevel\";\nimport Price from \"./charts/Price\";\nimport {iDialog} from '../../types/common'\nimport {getProduct} from \"../../apis/product\";\nimport {ProductParams, ProductResponse} from \"../../types/product\";\n\ninterface ProductDialogProps extends iDialog {\n    region: string;\n    asin: string;\n}\n\nfunction ProductDialog(props: ProductDialogProps) {\n    const {visible, setVisible, region = '', asin = ''} = props;\n    const [product, setProduct] = useState<ProductResponse | null>(null)\n\n    useEffect(() => {\n        if (!visible || !region || !asin) return;\n        const fetchData = async () => {\n            const params: ProductParams = {\n                region,\n                asin\n            }\n            const {data} = await getProduct(params);\n            setProduct(data)\n        }\n        fetchData()\n    }, [visible])\n\n    const linkToAmazonHandler = () => {\n      window.open(product ? product.product_detail.url : '')\n    }\n\n    return (\n        <Dialog\n            customClass=\"w-dialog h-dialog\"\n            visible={visible}\n            onCancel={() => setVisible(false)}\n        >\n            <Dialog.Body>\n                {\n                    product && (\n                        <>\n                            <div className=\"flex\">\n                                {/*Product Info*/}\n                                <div className=\"w-1/3\" style={{height: '450px'}}>\n                                    <Tooltip content={product.product_detail.name} effect=\"light\">\n                                      <h1 className=\"text-3xl text-context text-ellipsis\">{product.product_detail.name}</h1>\n                                    </Tooltip>\n                                    {/*<h2 className=\"text-3xl text-primary\">{product.product_detail.ASIN}</h2>*/}\n                                    <div className=\"bg-image w-full mt-4\" style={{\n                                        height: '350px',\n                                        backgroundImage: `url('${product.product_detail.image_url[0] || ''}')`\n                                    }} />\n                                    <div className=\"flex justify-between items-center\">\n                                        <Rate disabled={true} value={parseFloat(product.product_detail.average_rating)} showText={true}/>\n                                        <p className=\"text-2xl text-context\">${product.product_detail.price}</p>\n                                    </div>\n                                </div>\n\n                                {/*Swipers*/}\n                                <div className=\"w-2/3\" style={{height: '450px'}}>\n                                    <Carousel indicatorPosition=\"none\" autoplay={false} height={\"450px\"}>\n                                        <Carousel.Item>\n                                            <Price axis={product.price_chart.x_axis} data={product.price_chart.data}/>\n                                        </Carousel.Item>\n                                        <Carousel.Item>\n                                            <Review axis={product.review_number.x_axis} data={product.review_number.data}/>\n                                        </Carousel.Item>\n                                        <Carousel.Item>\n                                            <StockLevel axis={product.instock.x_axis} data={product.instock.data}/>\n                                        </Carousel.Item>\n                                        {/*<Carousel.Item>*/}\n                                            {/*<Keyword />*/}\n                                        {/*</Carousel.Item>*/}\n                                        <Carousel.Item>\n                                            <Rank axis={product.ranking.x_axis} data={product.ranking.data}/>\n                                        </Carousel.Item>\n                                    </Carousel>\n                                </div>\n                            </div>\n\n                            {/*Footer*/}\n                            <div className=\"flex justify-between items-end\" style={{height: '50px'}}>\n                                <p className=\"text-xl text-context\">ASIN: {product.product_detail.ASIN}</p>\n                                <div className=\"flex items-center cursor-pointer\" onClick={linkToAmazonHandler}>\n                                    <p className=\"text-xl text-context mr-2\">Amazon Page</p>\n                                    <FaExternalLinkAlt/>\n                                </div>\n                            </div>\n                        </>\n                    )\n                }\n\n\n            </Dialog.Body>\n        </Dialog>\n    )\n}\n\nexport default ProductDialog\n","import React, {Dispatch, SetStateAction, useState} from 'react'\nimport ProductCard, {ProductCardProps} from \"../components/ProductCard\";\nimport {Pagination} from \"element-react\";\nimport ProductDialog from \"./ProductDialog/index\";\nimport {ProductItemResponse} from \"../types/product\";\n\nexport interface ProductCardsProps {\n    region: string;\n    totalPage: number;\n    page: number;\n    data: ProductItemResponse[];\n    onChange: Dispatch<SetStateAction<number>>;\n}\n\nfunction ProductCards(props: ProductCardsProps) {\n    const {data = [], page = 1, totalPage = 1, region = '', onChange} = props;\n    const [asin, setAsin] = useState('')\n    const [dialogVisible, setDialogVisible] = useState(false)\n\n    const openDialogHandler = (asin: string) => {\n        setAsin(asin)\n        setDialogVisible(true)\n    };\n\n    return (\n        <div className=\"pb-16\">\n            {data.length\n                ? (\n                    <div className=\"flex flex-wrap -mx-1 mt-4\">\n                        {\n                            data.map((it: ProductItemResponse, index: number) => {\n                                const props: ProductCardProps = {\n                                    name: it.name,\n                                    price: it.price,\n                                    code: it.ASIN,\n                                    imageUrl: it.image_url[0],\n                                    'Resoluion & Frame Rate': it['Resoluion & Frame Rate'],\n                                    Function: it.Function,\n                                    Certification: it.Certification,\n                                    ranking: it.ranking,\n                                    mission: it.mission,\n                                }\n                                return (\n                                    <div\n                                        key={index}\n                                        className=\"mx-1 mb-2\"\n                                        style={{width: 'calc(20% - 0.5rem)'}}\n                                        onClick={() => openDialogHandler(it.ASIN)}\n                                    >\n                                        <ProductCard {...props}/>\n                                    </div>\n                                )\n                            })\n                        }\n                    </div>\n                )\n                    : (\n                    <div className=\"flex justify-center items-center px-4 py-8\">\n                        <h3 className=\"text-gray-400\">No Data</h3>\n                    </div>\n                )\n            }\n\n            {\n                totalPage >= 1 && (\n                    <div className=\"flex justify-center my-8\">\n                        <Pagination\n                            layout=\"prev, pager, next\"\n                            pageCount={totalPage}\n                            currentPage={page}\n                            onCurrentChange={(value: number) => onChange(value)}/>\n                    </div>\n                )\n            }\n\n\n            <ProductDialog visible={dialogVisible} region={region} asin={asin} setVisible={setDialogVisible}/>\n        </div>\n    )\n}\n\nexport default ProductCards\n","import React, {useEffect, useState} from 'react'\nimport {Button, Card, Loading, Select} from \"element-react\";\n\nimport BarLineChart from \"../components/BarLineChart\";\nimport DoughnutChart from \"../components/DoughnutChart\";\nimport PercentageDoughnutChart from \"../components/PercentageDoughnutChart\";\nimport HorizontalBarChart from \"../components/HorizontalBarChart\";\nimport InfoCard from '../components/InfoCard'\nimport VerticalProgressBarChart from \"../components/VerticalProgressBarChart\";\nimport ProductsDownloadDialog from \"../components/ProductsDownloadDialog\";\nimport {initCategoryOptions, initRegionOptions} from \"../utils/common\";\nimport {\n    getAmazonTop100DashBoardTime, getFtiRankingChart,\n    getNewCommentBarChart,\n    getPopularPriceRange,\n    getPopularResolutions,\n    getPriceDistributionBarLineChart,\n    getTopBrandPieChart,\n    getTopProductBarChart\n} from \"../apis/market\";\nimport {\n    BarLine,\n    BarLineChartData,\n    NewCommentBarChart,\n    NewCommentBarItem,\n    PopularPriceRangeResponse,\n    PopularResolutionResponse,\n    PriceDistributionBarLineChart,\n    ProductBarChart,\n    ProductBarItem,\n    SearchParams,\n    TopBrandPieItem\n} from \"../types/market\";\nimport {getAmazonsChoice, getSponsored} from \"../apis/seo\";\nimport {AmazonsChoice, Sponsored} from \"../types/seo\";\nimport {PieChartItem} from \"../types/chart\";\nimport ProductCards from \"../components/ProductCards\";\nimport {FtiRankingChartResponse, FtiRankingItemResponse, ProductsParams, ProductsResponse} from \"../types/product\";\nimport {getProducts} from \"../apis/product\";\nimport {formatBarLineData} from \"../utils/chart\";\n\nfunction formatData(data: NewCommentBarChart): [string[], { data: string, value: number }[]] {\n    const formatContent = data.items.content.sort((a: NewCommentBarItem, b: NewCommentBarItem) => b.review - a.review);\n    const yAxisData = formatContent.map((it: NewCommentBarItem) => it.name);\n    const seriesData = formatContent.map((it: NewCommentBarItem) => ({data: it.asin, value: it.review}));\n    return [yAxisData, seriesData]\n}\n\nfunction formatTopBrandData(data: ProductBarChart): [string[], { name: string, data: string, value: number }[], number[]] {\n    const formatContent = data.items.content.sort((a: ProductBarItem, b: ProductBarItem) => b.count - a.count);\n    const yAxisData = formatContent.map((it: ProductBarItem) => it.name);\n    const seriesData = formatContent.map((it: ProductBarItem) => ({name: it.name, data: it.ASIN, value: it.count}));\n    const ranks = formatContent.map((it: ProductBarItem) => it.avg_rank);\n    return [yAxisData, seriesData, ranks]\n}\n\nfunction formatFtiRankingChartData(data: FtiRankingChartResponse | null): BarLineChartData | null {\n    if (!data) return null;\n\n    const axis = data.data\n        .map((it: FtiRankingItemResponse) => it.mission)\n        .reduce((ary: string[], mission: string) => {\n            if (!ary.includes(mission)) {\n                ary.push(mission)\n            }\n            return ary\n        },[]);\n    const models = data.data\n        .map((it: FtiRankingItemResponse) => it.model)\n        .reduce((ary: string[], mode: string) => {\n            if (!ary.includes(mode)) {\n                ary.push(mode)\n            }\n            return ary\n        },[]);\n    ;\n    const series: BarLine[] = models.map((model: string) => {\n        const target = data.data\n            .filter((it: FtiRankingItemResponse) => it.model === model)\n            .map((it: FtiRankingItemResponse) => it.ranking);\n        return {\n            type: 'line',\n            name: model,\n            data:  target,\n            yAxisIndex: 0,\n        }\n    });\n    return {axis, series}\n}\n\nfunction AmazonTop100DashBoard() {\n    const [category, setCategory] = useState('webcam');\n    const [region, setRegion] = useState('US');\n    const [sorting, setSorting] = useState('ranking');\n\n    const [productsPage, setProductsPage] = useState(1);\n\n    const [time, setTime] = useState('');\n    const [distribution, setDistribution] = useState<PriceDistributionBarLineChart | null>(null);\n    const [amazonsChoice, setAmazonsChoice] = useState<AmazonsChoice | null>(null);\n    const [popularResolution, setPopularResolution] = useState<PopularResolutionResponse | null>(null);\n    const [popularPriceRange, setPopularPriceRange] = useState<PopularPriceRangeResponse | null>(null);\n    const [sponsored, setSponsored] = useState<Sponsored | null>(null);\n    const [topBrandData, setTopBrandData] = useState<PieChartItem[]>([]);\n    const [brandProducts, setBrandProducts] = useState<ProductBarChart | null>(null);\n    const [newComment, setNewComment] = useState<NewCommentBarChart | null>(null);\n    const [products, setProducts] = useState<ProductsResponse | null>(null);\n    const [amazonsBrandValue, setAmazonsBranValue] = useState('');\n    const [sponsoredBrandValue, setSponsoredBrandValue] = useState('');\n    const [ftiRanking, setFtiRanking] = useState<FtiRankingChartResponse | null>(null);\n\n    const [visible, setVisible] = useState(false);\n    const [chartLoading, setChartLoading] = useState(false);\n\n    const categoryOptions = initCategoryOptions();\n    const regionOptions = initRegionOptions();\n    const sortingOptions: ElementReact.SelectOptionProps[] = [\n        {label: 'Recent Ranking', value: 'ranking'},\n        {label: 'Recent Price', value: 'price'}\n    ];\n\n    useEffect(() => {\n        const fetchData = async () => {\n            const {data} = await getAmazonTop100DashBoardTime();\n            setTime(data.dashboard_time)\n        };\n        fetchData()\n    }, []);\n\n    useEffect(() => {\n        const fetchData = async () => {\n            setChartLoading(true);\n            const params: SearchParams = {\n                category,\n                region,\n            };\n            try {\n                setFtiRanking((await getFtiRankingChart(params)).data);\n                setDistribution((await getPriceDistributionBarLineChart(params)).data);\n                setAmazonsChoice((await getAmazonsChoice(params)).data);\n                setSponsored((await getSponsored(params)).data);\n                setTopBrandData((await getTopBrandPieChart(params)).data.items\n                    .map((it: TopBrandPieItem): PieChartItem => ({name: it.brand, value: it.count})));\n                setBrandProducts((await getTopProductBarChart(params)).data);\n                setNewComment((await getNewCommentBarChart(params)).data);\n                setPopularResolution((await getPopularResolutions(params)).data);\n                setPopularPriceRange((await getPopularPriceRange(params)).data)\n\n            } finally {\n                setChartLoading(false)\n            }\n        };\n        fetchData()\n    }, [category, region]);\n\n    useEffect(() => {\n        const fetchData = async () => {\n            const params: ProductsParams = {category, region, page: productsPage, sorting};\n            const {data} = await getProducts(params);\n            setProducts(data)\n        };\n        fetchData()\n    }, [category, region, sorting, productsPage]);\n\n    const handleClickTopBrandChart = async (brand: string) => {\n        const params: SearchParams = {\n            category,\n            region,\n            brand\n        };\n        if (brand === 'others') {\n            const {data} = await getTopBrandPieChart({...params, dashboard: 1});\n            // @ts-ignore\n            params.others = data.brands.reduce((str: string, item: string, index: number) => {\n                if (index) {\n                    return `${str},${item}`\n                } else {\n                    return item\n                }\n            }, '');\n        }\n        setAmazonsBranValue(brand);\n        setSponsoredBrandValue(brand);\n        setAmazonsChoice((await getAmazonsChoice(params)).data);\n        setSponsored((await getSponsored(params)).data)\n    };\n\n    const handleClearTopBrandChart = async (type: string) => {\n        const params: SearchParams = {\n            category,\n            region,\n        };\n        if (type === 'sponsored') {\n            setSponsoredBrandValue('');\n            setSponsored((await getSponsored(params)).data)\n        }\n\n        if (type === 'amazons') {\n            setAmazonsBranValue('');\n            setAmazonsChoice((await getAmazonsChoice(params)).data);\n        }\n    };\n\n    const handleDownloadProducts = async (asin: string[]) => {\n        const params: ProductsParams = {\n            category,\n            region,\n            dl: 1,\n            asin: asin.join(',')\n        };\n        const {request} = await getProducts(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    return (\n        <div>\n            {/* Search Bar */}\n            <div className=\"flex items-end mb-4\">\n                <Select className=\"mr-4\" value={category} placeholder=\"Select\" onChange={value => setCategory(value)}>\n                    {\n                        categoryOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <Select className=\"mr-4\" value={region} placeholder=\"Select\" onChange={value => setRegion(value)}>\n                    {\n                        regionOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n\n                <p className=\"text-xl text-context\">Last Update: {time}</p>\n            </div>\n\n            {/* Dash Board */}\n            {\n                chartLoading\n                    ? (\n                        <div className=\"bg-background flex justify-center items-center\" style={{minHeight: '300px'}}>\n                            <Loading/>\n                        </div>\n                    )\n                    : (\n                        <div>\n                            <div className=\"flex\">\n                                <div className=\"w-7/12 pr-2\">\n                                    <Card className=\"mb-4\">\n                                        <BarLineChart\n                                            title=\"Price Distribution\"\n                                            titleFontSize={18}\n                                            height=\"400px\"\n                                            names={['Quantity', 'Value (M in USD)']}\n                                            totals={[\n                                                {name: 'Review Quantity'},\n                                                {name: 'Product Model'},\n                                                {name: 'Revenue(million USD)', fixed: true}\n                                            ]}\n                                            data={formatBarLineData(distribution, category)}\n                                        />\n                                    </Card>\n                                    <div className=\"flex mb-4\">\n                                        <div className=\"w-1/2 pr-2\">\n                                            {\n                                                popularResolution &&\n                                                <InfoCard title=\"Most Popular Resolution\" context={popularResolution.tag}\n                                                          reviewsContext={`${popularResolution.review_number}`}/>\n                                            }\n                                        </div>\n                                        <div className=\"w-1/2 pl-2\">\n                                            {\n                                                popularPriceRange &&\n                                                <InfoCard title=\"Most Popular Price Range\" context={popularPriceRange.price}\n                                                          reviewsContext={`${popularPriceRange.review}`}/>\n                                            }\n                                        </div>\n                                    </div>\n                                    <Card>\n                                        {\n                                            newComment &&\n                                            <HorizontalBarChart\n                                                title=\"Top Product - New Reviews\"\n                                                titleFontSize={18}\n                                                height=\"400px\"\n                                                data={formatData(newComment)}\n                                                dataItemName='Reviews'\n                                            />\n                                        }\n                                    </Card>\n                                </div>\n                                <div className=\"w-5/12 pl-2\">\n                                    <Card className=\"mb-4\">\n                                        <DoughnutChart\n                                            title=\"Top Brand\"\n                                            titleFontSize={18}\n                                            subtitle=\"Product Models in Top 100\"\n                                            subtitleFontSize={16}\n                                            height=\"300px\"\n                                            data={topBrandData}\n                                            hasLegend\n                                            onClick={handleClickTopBrandChart}\n                                        />\n                                    </Card>\n                                    <div className=\"flex mb-4\">\n                                        <div className=\"w-1/2 pr-2\">\n                                            <Card>\n                                                <PercentageDoughnutChart\n                                                    height=\"200px\"\n                                                    title=\"Sponsored Rate\"\n                                                    titleFontSize={18}\n                                                    name=\"Sponsored\"\n                                                    brand={sponsoredBrandValue}\n                                                    color=\"#fb8c3b\"\n                                                    percentage={sponsored ? Math.round(sponsored.sponsored_rate * 100) : 0}\n                                                    onClear={() => handleClearTopBrandChart('sponsored')}\n                                                />\n                                            </Card>\n                                        </div>\n                                        <div className=\"w-1/2 pl-2\">\n                                            <Card>\n                                                <PercentageDoughnutChart\n                                                    height=\"200px\"\n                                                    title=\"Amazon's Choice\"\n                                                    titleFontSize={18}\n                                                    name=\"Amazon’s Choice\"\n                                                    brand={amazonsBrandValue}\n                                                    color=\"#2e78b4\"\n                                                    percentage={amazonsChoice ? Math.round(amazonsChoice.amazons_choice_rate * 100) : 0}\n                                                    onClear={() => handleClearTopBrandChart('amazons')}\n                                                />\n                                            </Card>\n                                        </div>\n                                    </div>\n                                    <Card>\n                                        {\n                                            brandProducts &&\n                                            <VerticalProgressBarChart\n                                              title=\"Top Product - No. of Times in Top 30\"\n                                              titleFontSize={18}\n                                              height=\"400px\"\n                                              data={formatTopBrandData(brandProducts)}\n                                              padding=\"0 20px 0 50px\"\n                                            />\n                                        }\n                                    </Card>\n                                </div>\n                            </div>\n                            <div className=\"w-7/12 pr-2 mt-4\">\n                                <Card>\n                                    <BarLineChart\n                                        title=\"FTI Ranking\"\n                                        titleFontSize={18}\n                                        height=\"400px\"\n                                        names={['']}\n                                        inverse\n                                        data={formatFtiRankingChartData(ftiRanking)}\n                                    />\n                                </Card>\n                            </div>\n                        </div>\n                    )\n            }\n\n\n            {/* Product Cards */}\n            <div className=\"mt-16\">\n                <div className=\"flex justify-between items-end\">\n                    <div className=\"flex\">\n                        <p className=\"text-2xl mr-2\">Top 100</p>\n                        <Button type=\"primary\" onClick={() => setVisible(true)}>Download</Button>\n                    </div>\n                    <Select value={sorting} placeholder=\"Select\" onChange={(value: string) => setSorting(value)}>\n                        {\n                            sortingOptions.map(it => {\n                                return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                            })\n                        }\n                    </Select>\n                </div>\n                {\n                    products &&\n                    <ProductCards\n                      data={products.prods}\n                      region={region}\n                      page={products.info.current_page}\n                      totalPage={products.info.max_page}\n                      onChange={setProductsPage}\n                    />\n                }\n            </div>\n\n            <ProductsDownloadDialog\n                visible={visible}\n                setVisible={setVisible}\n                params={{\n                    category,\n                    region\n                }}\n                onDownload={handleDownloadProducts}\n            />\n        </div>\n    )\n}\n\nexport default AmazonTop100DashBoard\n","import React, {Dispatch, SetStateAction, useRef} from 'react'\nimport {DateRangePicker} from 'element-react'\nimport { BsCalendarDate } from 'react-icons/bs'\n\ninterface DatePickerParams {\n    date: ElementReactLibs.dateType[],\n    setDate: Dispatch<SetStateAction<ElementReactLibs.dateType[]>>,\n    disabledDate(date: Date): boolean\n}\n\nfunction DatePicker(props: DatePickerParams) {\n    const {date, setDate, disabledDate} = props;\n    const refDatePicker = useRef();\n\n    const handleCalendarClick = () => {\n        // @ts-ignore\n        refDatePicker.current.refs.inputRoot.focus();\n    };\n\n    return (\n        <div className=\"relative mr-4\">\n            <DateRangePicker\n                // @ts-ignore\n                ref={refDatePicker}\n                isShowTrigger={false}\n                isReadOnly={true}\n                value={date}\n                disabledDate={disabledDate}\n                onChange={setDate}\n            />\n            <BsCalendarDate className=\"absolute right-2 top-1/2 transform -translate-y-1/2 text-primary cursor-pointer\" onClick={handleCalendarClick}/>\n        </div>\n    )\n}\n\nexport default DatePicker;\n","import {Dispatch, SetStateAction} from \"react\";\n\nexport interface OptionItem {\n    label: string;\n    value: any;\n    checked?: boolean\n}\n\nexport interface iDialog {\n    visible: boolean;\n    setVisible: Dispatch<SetStateAction<boolean>>\n}\n\nexport interface Adapter<T> {\n    [key: string]: T;\n    default: T;\n}\n\nexport enum CHART_TYPE {\n    CHART,\n    TABLE\n}\n","import React from 'react'\nimport {Table} from 'element-react'\nimport {HiDownload} from 'react-icons/hi'\nimport {\n    TableItemResponse, TableTopBrandItemResponse, TableTopProductItemResponse,\n} from \"../types/market\";\nimport {TableSearchCloudItemResponse, TableSponsoredItemResponse} from \"../types/seo\";\n\ninterface TableChartProps {\n    width?: string;\n    height?: string;\n    columns: ElementReact.TableColumn[];\n    data: TableItemResponse[] | TableTopProductItemResponse[] | TableTopBrandItemResponse[] | TableSponsoredItemResponse[] | TableSearchCloudItemResponse[];\n\n    onDownload?(): void\n}\n\nfunction TableChart(props: TableChartProps) {\n    const {width = '100%', height = '400px', columns = [], data = [], onDownload} = props;\n\n    return (\n        <div className=\"relative overflow-y-scroll\" style={{height}}>\n            <HiDownload className=\"absolute right-0 top-0 text-3xl cursor-pointer z-30\" onClick={onDownload}/>\n\n            <div style={{width}}>\n                <Table\n                    className=\"h-full pt-4\"\n                    style={{width}}\n                    columns={columns}\n                    data={data}\n                    border={true}\n                />\n            </div>\n        </div>\n    )\n}\n\nexport default TableChart\n","import React, {useEffect, useMemo, useState} from 'react'\nimport dayjs from 'dayjs'\nimport {Button, Card, Loading, Pagination, Select} from \"element-react\";\nimport {FaListAlt} from 'react-icons/fa'\nimport {RiBarChartBoxFill} from 'react-icons/ri'\n\nimport DatePicker from \"../components/DatePicker\";\nimport BarLineChart from \"../components/BarLineChart\";\nimport ProductCards from \"../components/ProductCards\";\nimport Collapse from \"../components/Collapse\";\nimport {formatDate, initCategoryOptions, initDate, initRegionOptions} from \"../utils/common\";\nimport {getPriceDistributionBarLineChart, getTable} from \"../apis/market\";\nimport {\n    PriceDistributionBarLineChart,\n    SearchParams,\n    TableResponse\n} from \"../types/market\";\nimport {getProducts} from \"../apis/product\";\nimport {ProductsParams, ProductsResponse} from \"../types/product\";\nimport {CHART_TYPE} from \"../types/common\";\nimport TableChart from \"../components/TableChart\";\nimport {useUpdateEffect} from \"../utils/hook\";\nimport {formatBarLineData} from \"../utils/chart\";\nimport ProductsDownloadDialog from \"../components/ProductsDownloadDialog\";\n\nfunction PriceDistribution() {\n    const [chartType, setChartType] = useState(CHART_TYPE.CHART);\n    const [isChartLoading, setIsChartLoading] = useState(false);\n\n    const [category, setCategory] = useState('webcam');\n    const [region, setRegion] = useState('US');\n    const [date, setDate] = useState<ElementReactLibs.dateType[]>(initDate());\n    const [filter, setFilter] = useState<any>({});\n    const [price, setPrice] = useState<string | null>(null);\n\n    const [page, setPage] = useState(1);\n    const [productsPage, setProductsPage] = useState(1);\n\n    const [visible, setVisible] = useState(false);\n    const [distribution, setDistribution] = useState<PriceDistributionBarLineChart | null>(null);\n    const [table, setTable] = useState<TableResponse | null>(null);\n    const [products, setProducts] = useState<ProductsResponse | null>(null);\n\n    const categoryOptions = initCategoryOptions();\n    const regionOptions = initRegionOptions();\n\n    const tableColumn: ElementReact.TableColumn[] = [\n        {label: 'Product', prop: 'Product'},\n        {label: 'Brand', prop: 'Brand'},\n        {label: 'Price', prop: 'Price'},\n        {label: 'Sales Volume', prop: 'Sales Volume'},\n        {label: 'Revenue', prop: 'Revenue'},\n    ];\n\n    const [minPrice, maxPrice] = useMemo(() => {\n        if (!price) return [-1, -1];\n        const matches = price.split('~');\n        return [parseInt(matches[0], 10), parseInt(matches[1], 10)]\n    }, [price]);\n\n    const fetchChart = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const searchParams: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page,\n            ...filter\n        };\n        setIsChartLoading(true)\n        const {data} = await getPriceDistributionBarLineChart(searchParams);\n        setDistribution(data);\n        setIsChartLoading(false)\n    };\n\n    const fetchTable = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const searchParams: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page,\n            ...filter\n        };\n        setIsChartLoading(true)\n        const {data} = await getTable(searchParams);\n        setTable(data);\n        setIsChartLoading(false)\n    };\n\n    const fetchProducts = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const productsParams: ProductsParams = {\n            category,\n            region,\n            page: productsPage,\n            start_at,\n            end_at,\n            ...filter\n        };\n        if (price) {\n            productsParams.min_price = minPrice;\n            productsParams.max_price = maxPrice;\n        }\n        const {data: products} = await getProducts(productsParams);\n        setProducts(products);\n    };\n\n    useEffect(() => {\n        setPage(1);\n        setProductsPage(1);\n\n        if (chartType === CHART_TYPE.CHART) fetchChart();\n        if (chartType === CHART_TYPE.TABLE && page === 1) fetchTable();\n        if (productsPage === 1) fetchProducts();\n    }, [region, date, filter]);\n\n    useUpdateEffect(() => {\n        setFilter({})\n    }, [category]);\n\n    useUpdateEffect(() => {\n        if (chartType === CHART_TYPE.CHART) fetchChart();\n        if (chartType === CHART_TYPE.TABLE) fetchTable();\n    }, [chartType, page]);\n\n    useUpdateEffect(() => {\n        fetchProducts()\n    }, [productsPage]);\n\n    useUpdateEffect(() => {\n        setProductsPage(1);\n        if (productsPage === 1) fetchProducts()\n    }, [price]);\n\n    const onChartTypeChange = () => {\n        if (chartType === CHART_TYPE.CHART) setChartType(CHART_TYPE.TABLE);\n        if (chartType === CHART_TYPE.TABLE) setChartType(CHART_TYPE.CHART)\n    };\n\n    const handleDownloadProducts = async (asin: string[]) => {\n        const [start_at, end_at] = formatDate(date);\n        const params: ProductsParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            asin: asin.join(','),\n            dl: 1,\n            ...filter\n        };\n        const {request} = await getProducts(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    const handleDownloadTable = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page,\n            dl: 1,\n            ...filter\n        };\n        const {request} = await getTable(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    return (\n        <div>\n            {/* Search Bar */}\n            <div className=\"flex items-center mb-4\">\n                <Select className=\"mr-4\" value={category} placeholder=\"Select\"\n                        onChange={(value: string) => setCategory(value)}>\n                    {\n                        categoryOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <Select className=\"mr-4\" value={region} placeholder=\"Select\"\n                        onChange={(value: string) => setRegion(value)}>\n                    {\n                        regionOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <DatePicker\n                    date={date}\n                    setDate={setDate}\n                    disabledDate={(_date: Date) => dayjs(_date).day() !== 0}\n                />\n                <div className=\"text-2xl cursor-pointer\" onClick={onChartTypeChange}>\n                    {\n                        chartType === CHART_TYPE.CHART && <FaListAlt/>\n                    }\n                    {\n                        chartType === CHART_TYPE.TABLE && <RiBarChartBoxFill/>\n                    }\n                </div>\n            </div>\n\n            <div className=\"flex\">\n                <div className=\"w-2/3 pr-2\">\n                    <Card className=\"mb-4\" style={{minHeight: '640px'}}>\n                        {\n                            isChartLoading && <div className=\"w-full h-dialog flex justify-center items-center\"><Loading /></div>\n                        }\n                        {\n                            chartType === CHART_TYPE.CHART && !isChartLoading &&\n                            <BarLineChart\n                              title=\"Price Distribution\"\n                              height=\"600px\"\n                              names={['Quantity', 'Value (M in USD)']}\n                              totals={[\n                                  {name: 'Review Quantity'},\n                                  {name: 'Product Model'},\n                                  {name: 'Revenue(million USD)', fixed: true}\n                              ]}\n                              data={formatBarLineData(distribution, category)}\n                              onClick={(value: string) => setPrice(value)}\n                            />\n                        }\n                        {\n                            chartType === CHART_TYPE.TABLE && table && !isChartLoading &&\n                            <>\n                              <TableChart\n                                height=\"572px\"\n                                columns={tableColumn}\n                                data={table.items.content}\n                                onDownload={handleDownloadTable}\n                              />\n                              <div className=\"flex justify-end\">\n                                <Pagination\n                                  layout=\"prev, pager, next\"\n                                  pageCount={table.info.max_page}\n                                  small={true}\n                                  currentPage={table.items.current_page}\n                                  onCurrentChange={(value: number) => setPage(value)}\n                                />\n                              </div>\n                            </>\n                        }\n                    </Card>\n                </div>\n\n                <div className=\"w-1/3 pl-2\">\n                    <Card>\n                        <Collapse height=\"600px\" type={category} onFilter={setFilter}/>\n                    </Card>\n                </div>\n            </div>\n\n            {/* Product Cards */}\n            <div className=\"mt-16\">\n                <div className=\"flex\">\n                    {\n                        price\n                            ? <p className=\"text-2xl mr-2\">${minPrice} ~ ${maxPrice} Products</p>\n                            : <p className=\"text-2xl mr-2\">Top 100 Products</p>\n                    }\n                    <Button type=\"primary\" onClick={() => setVisible(true)}>Download</Button>\n                    {\n                        price && <Button type=\"info\" onClick={() => setPrice(null)}>Top 100</Button>\n                    }\n                </div>\n                {\n                    products &&\n                    <ProductCards\n                      data={products.prods}\n                      region={region}\n                      page={products.info.current_page}\n                      totalPage={products.info.max_page}\n                      onChange={setProductsPage}\n                    />\n                }\n            </div>\n\n            <ProductsDownloadDialog\n                visible={visible}\n                setVisible={setVisible}\n                params={{\n                    category,\n                    region,\n                    date,\n                    ...filter\n                }}\n                onDownload={handleDownloadProducts}\n            />\n        </div>\n    )\n}\n\nexport default PriceDistribution\n","import React, {useEffect, useRef} from 'react'\nimport * as echarts from 'echarts/core'\nimport {LineChart, BarChart, LineSeriesOption, BarSeriesOption} from \"echarts/charts\";\nimport {\n    TitleComponent,\n    TitleComponentOption,\n    GridComponent,\n    GridComponentOption,\n    TooltipComponent,\n    TooltipComponentOption,\n    LegendComponent,\n    LegendComponentOption\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\nimport {HiDownload} from 'react-icons/hi'\n\nimport {downloadPng} from \"../utils/download\";\nimport {StockChartData, StockItem} from \"../types/market\";\n\ninterface BarLineChartProps {\n    width?: string;\n    height?: string;\n    title?: string;\n    titleFontSize?: number;\n    data: StockChartData | null;\n    onClick?(value: string): void;\n}\n\ntype ECOption = echarts.ComposeOption<BarSeriesOption | LineSeriesOption | TitleComponentOption | GridComponentOption | TooltipComponentOption | LegendComponentOption>;\n\necharts.use([LineChart, BarChart, TitleComponent, GridComponent, TooltipComponent, LegendComponent, CanvasRenderer]);\n\nfunction formatData(data: StockChartData | null): [string[], string[], any, number[]] {\n    if (!data) return [[], [], {}, []];\n    const legend = [\n        'Available, instock unknown',\n        'High stock',\n        'Low stock',\n        'Out of stock'\n    ];\n    const yAxisData = data.info.x_axis!;\n    const totals = data.items.map((it: StockItem) =>\n        // @ts-ignore\n        legend.reduce((sum: number, key: string) => sum + it[key], 0)\n    );\n    const seriesData = legend.reduce((obj: any, key: string) => {\n        // @ts-ignore\n        obj[key] = data.items.map((it: StockItem, index: number) => it[key] * 100 / totals[index]);\n        return obj\n    }, {});\n    return [legend, yAxisData, seriesData, totals]\n}\n\nfunction StockChart(props: BarLineChartProps) {\n    const chartRef = useRef<HTMLDivElement | null>(null);\n    const {width = '100%', height = '400px', title = 'Title', titleFontSize = 24, data = null, onClick} = props;\n\n    const [legend, yAxisData, seriesData, totals] = formatData(data);\n\n    const option: ECOption = {\n        title: {\n            text: title,\n            textStyle: {\n                fontSize: titleFontSize\n            }\n        },\n        grid: {\n            backgroundColor: 'white',\n            top: 70,\n            right: 50,\n            left: 50\n        },\n        legend: {\n            data: legend,\n            bottom: 0\n        },\n        tooltip: {\n            trigger: 'axis',\n            formatter(params: any) {\n                return `\n                    ${params[0].name} <br />\n                    ${params.map((it: any) => `\n                        <div  style=\"display: flex; justify-content: space-between;\">\n                            <span style=\"margin-right: 15px;\">${it.marker} ${it.seriesName}</span> ${Math.round(it.value * totals[it.dataIndex] / 100)} <br />\n                        </div>\n                    `)\n                    .join(\"\")}\n                `;\n            }\n        },\n        xAxis: [\n            {\n                type: 'category',\n                boundaryGap: false,\n                data: yAxisData\n            }\n        ],\n        yAxis: [\n            {\n                type: 'value',\n                min: 0,\n                max: 100,\n                axisLabel: {\n                    formatter: \"{value} %\"\n                }\n            },\n        ],\n        series: [\n            {\n                type: 'line',\n                name: 'Out of stock',\n                stack: 'stack',\n                data: seriesData['Out of stock'],\n                symbolSize: 8,\n                itemStyle: {\n                    color: '#FF5757'\n                },\n                areaStyle: {\n                    color: '#FF5757'\n                }\n            },\n            {\n                type: 'line',\n                name: 'Low stock',\n                stack: 'stack',\n                data: seriesData['Low stock'],\n                symbolSize: 8,\n                itemStyle: {\n                    color: '#FFC000'\n                },\n                areaStyle: {\n                    color: '#FFC000'\n                }\n            },\n            {\n                type: 'line',\n                name: 'High stock',\n                stack: 'stack',\n                data: seriesData['High stock'],\n                symbolSize: 8,\n                itemStyle: {\n                    color: '#9DC3E6'\n                },\n                areaStyle: {\n                    color: '#9DC3E6'\n                }\n            },\n            {\n                type: 'line',\n                name: 'Available, instock unknown',\n                stack: 'stack',\n                data: seriesData['Available, instock unknown'],\n                symbolSize: 8,\n                itemStyle: {\n                    color: '#ACACAC'\n                },\n                areaStyle: {\n                    color: '#ACACAC'\n                }\n            }\n        ]\n    };\n\n    useEffect(() => {\n        if (!chartRef.current) return;\n\n        const chart = echarts.init(chartRef.current, 'customed');\n        chart.setOption(option);\n\n        let lock = false;\n        chart.on('click', (params) => {\n            if (onClick && data && params) {\n                if (lock) return;\n                const date = data.info.x_axis![params.dataIndex];\n                const name = params.seriesName;\n                onClick(`${date}, ${name}`);\n                setTimeout(() => lock = false, 1000)\n            }\n        })\n    });\n\n    const onDownload = async () => {\n        if (!chartRef.current) return;\n\n        await downloadPng(chartRef.current, title)\n    };\n\n    return (\n        <div className=\"relative\">\n            <div ref={chartRef} style={{width, height}}/>\n            <HiDownload className=\"absolute right-0 top-0 text-3xl cursor-pointer z-30\" onClick={onDownload}/>\n        </div>\n    )\n}\n\nexport default StockChart\n","import React, {useEffect, useState} from 'react'\nimport dayjs from 'dayjs'\nimport {Button, Card, Loading, Pagination, Select, Tooltip} from \"element-react\";\nimport {AiFillInfoCircle} from 'react-icons/ai'\nimport {FaListAlt} from 'react-icons/fa'\nimport {RiBarChartBoxFill} from 'react-icons/ri'\n\nimport DatePicker from \"../components/DatePicker\";\nimport Collapse from \"../components/Collapse\";\nimport {initDate, initCategoryOptions, initRegionOptions} from \"../utils/common\";\nimport StockChart from \"../components/StockChart\";\nimport {getInstockStockChart, getTable} from \"../apis/market\";\nimport {SearchParams, StockChartData, TableResponse} from \"../types/market\";\nimport {formatDate} from \"../utils/common\";\nimport {Adapter, CHART_TYPE} from \"../types/common\";\nimport {ProductsParams, ProductsResponse} from \"../types/product\";\nimport {getProducts} from \"../apis/product\";\nimport ProductCards from \"../components/ProductCards\";\nimport TableChart from \"../components/TableChart\";\nimport {useUpdateEffect} from \"../utils/hook\";\nimport ProductsDownloadDialog from \"../components/ProductsDownloadDialog\";\n\nfunction Inventory() {\n    const [chartType, setChartType] = useState(CHART_TYPE.CHART);\n    const [isChartLoading, setIsChartLoading] = useState(false)\n    const [visible, setVisible] = useState(false);\n\n    const [category, setCategory] = useState('webcam');\n    const [region, setRegion] = useState('US');\n    const [date, setDate] = useState<ElementReactLibs.dateType[]>(initDate());\n    const [filter, setFilter] = useState<any>({});\n    const [stock, setStock] = useState<string | null>(null);\n    const [stockType, setStockType] = useState<string | null>(null);\n    const [productDate, setProductDate] = useState<ElementReactLibs.dateType[] | null>(null);\n\n    const [page, setPage] = useState(1);\n    const [productsPage, setProductsPage] = useState(1);\n\n    const [stockChartData, setStockChartData] = useState<StockChartData | null>(null);\n    const [table, setTable] = useState<TableResponse | null>(null);\n    const [products, setProducts] = useState<ProductsResponse | null>(null);\n\n    const categoryOptions = initCategoryOptions();\n    const regionOptions = initRegionOptions();\n\n    const tableColumn: ElementReact.TableColumn[] = [\n        {label: 'Product', prop: 'Product'},\n        {label: 'Brand', prop: 'Brand'},\n        {label: 'Stock Level', prop: 'Stock Level'},\n        {label: 'Date', prop: 'Date'},\n    ];\n\n    const fetchChart = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page,\n            ...filter\n        };\n        setIsChartLoading(true);\n        const {data} = await getInstockStockChart(params);\n        setStockChartData(data)\n        setIsChartLoading(false)\n    };\n\n    const fetchTable = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page,\n            ...filter\n        };\n        setIsChartLoading(true);\n        const {data} = await getTable(params);\n        setTable(data)\n        setIsChartLoading(false);\n    };\n\n    const fetchProducts = async () => {\n        console.log('stock', stock);\n        const adapter: Adapter<string> = {\n            'Available': 'unknown',\n            'High stock': 'high',\n            'Low stock': 'low',\n            'Out of stock': 'out',\n            default: ''\n        };\n        const [start_at, end_at] = productDate ? formatDate(productDate) : formatDate(date);\n        const params: ProductsParams = {\n            category,\n            region,\n            page: productsPage,\n            start_at,\n            end_at,\n            ...filter\n        };\n        if (stock) params.stock = adapter[stock];\n        const {data} = await getProducts(params);\n        setProducts(data);\n    };\n\n    useEffect(() => {\n        setPage(1);\n        setProductsPage(1);\n\n        if (chartType === CHART_TYPE.CHART) fetchChart();\n        if (chartType === CHART_TYPE.TABLE && page === 1) fetchTable();\n        if (productsPage === 1) fetchProducts();\n    }, [region, date, filter]);\n\n    useUpdateEffect(() => {\n        setFilter({})\n    }, [category]);\n\n    useUpdateEffect(() => {\n        if (chartType === CHART_TYPE.CHART) fetchChart();\n        if (chartType === CHART_TYPE.TABLE) fetchTable();\n    }, [chartType])\n\n    useUpdateEffect(() => {\n        if (chartType === CHART_TYPE.TABLE) fetchTable();\n    }, [page]);\n\n    useUpdateEffect(() => {\n        fetchProducts()\n    }, [productsPage]);\n\n    useUpdateEffect(() => {\n        if (productsPage === 1) fetchProducts();\n    }, [stock]);\n\n    const onChartTypeChange = () => {\n        if (chartType === CHART_TYPE.CHART) setChartType(CHART_TYPE.TABLE);\n        if (chartType === CHART_TYPE.TABLE) setChartType(CHART_TYPE.CHART)\n    };\n\n    const handleDownloadProducts = async (asin: string[]) => {\n        const [start_at, end_at] = formatDate(date);\n        const params: ProductsParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            dl: 1,\n            asin: asin.join(','),\n            ...filter,\n        };\n        const {request} = await getProducts(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    const handleDownloadTable = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page,\n            dl: 1,\n            ...filter\n        };\n        const {request} = await getTable(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    const handleStockChartClick = async (value: string) => {\n        setStockType(value);\n        setProductsPage(1);\n\n        if (value) {\n            const _date = dayjs(value.split(',')[0].trim()).toDate();\n            const stock = value.split(',')[1].trim();\n            setStock(stock);\n            setProductDate([_date, _date]);\n        } else {\n            setStock(null)\n            setProductDate(null)\n        }\n    };\n\n    return (\n        <div>\n            {/* Search Bar */}\n            <div className=\"flex items-center mb-4\">\n                <Select className=\"mr-4\" value={category} placeholder=\"Select\"\n                        onChange={(value: string) => setCategory(value)}>\n                    {\n                        categoryOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <Select className=\"mr-4\" value={region} placeholder=\"Select\"\n                        onChange={(value: string) => setRegion(value)}>\n                    {\n                        regionOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <DatePicker\n                    date={date}\n                    setDate={setDate}\n                    disabledDate={(_date: Date) => dayjs(_date).day() !== 0}\n                />\n                <Tooltip\n                    className=\"mr-4\"\n                    effect=\"dark\"\n                    content={\n                        <div style={{maxWidth: '200px'}}>\n                            The Stock level of each product is estimated by the maximum buying number limit in a single order. Thus, Identification between high stock and low stock may have certain deviation.\n                        </div>\n                    }\n                    placement=\"bottom\"\n                >\n                    <AiFillInfoCircle className=\"text-2xl\"/>\n                </Tooltip>\n                <div className=\"text-2xl cursor-pointer\" onClick={onChartTypeChange}>\n                    {\n                        chartType === CHART_TYPE.CHART && <FaListAlt/>\n                    }\n                    {\n                        chartType === CHART_TYPE.TABLE && <RiBarChartBoxFill/>\n                    }\n                </div>\n            </div>\n\n            <div className=\"flex\">\n                <div className=\"w-2/3 pr-2\">\n                    <Card className=\"mb-4\" style={{minHeight: '642px'}}>\n                        {\n                            isChartLoading && <div className=\"w-full h-dialog flex justify-center items-center\"><Loading /></div>\n                        }\n                        {\n                            chartType === CHART_TYPE.CHART && !isChartLoading &&\n                            <StockChart title=\"Stock Level\" height=\"600px\" data={stockChartData}\n                                        onClick={handleStockChartClick} />\n                        }\n                        {\n                            chartType === CHART_TYPE.TABLE && table && !isChartLoading &&\n                            <>\n                              <TableChart height=\"572px\" columns={tableColumn} data={table.items.content}\n                                          onDownload={handleDownloadTable}/>\n                              <div className=\"flex justify-end\">\n                                <Pagination\n                                  layout=\"prev, pager, next\"\n                                  pageCount={table.info.max_page}\n                                  small={true}\n                                  currentPage={table.items.current_page}\n                                  onCurrentChange={(value: number) => setPage(value)}\n                                />\n                              </div>\n                            </>\n                        }\n                    </Card>\n                </div>\n\n                <div className=\"w-1/3 pl-2\">\n                    <Card>\n                        <Collapse height=\"600px\" type={category} onFilter={setFilter}/>\n                    </Card>\n                </div>\n            </div>\n\n            {/* Product Cards */}\n            <div className=\"mt-16\">\n                <div className=\"flex\">\n                    {\n                        stockType\n                            ? <p className=\"text-2xl mr-2\">{stockType}</p>\n                            : <p className=\"text-2xl mr-2\">Top 100 Products</p>\n                    }\n                    <Button type=\"primary\" onClick={() => setVisible(true)}>Download</Button>\n                    {\n                        stockType && <Button type=\"info\" onClick={() => setStockType(null)}>Top 100</Button>\n                    }\n                </div>\n                {\n                    products &&\n                    <ProductCards\n                      data={products.prods}\n                      region={region}\n                      page={products.info.current_page}\n                      totalPage={products.info.max_page}\n                      onChange={setProductsPage}\n                    />\n                }\n            </div>\n\n            <ProductsDownloadDialog\n                visible={visible}\n                setVisible={setVisible}\n                params={{\n                    category,\n                    region,\n                    date,\n                    stock,\n                    ...filter\n                }}\n                onDownload={handleDownloadProducts}\n            />\n        </div>\n    )\n}\n\nexport default Inventory\n","import React, {useEffect, useState} from 'react'\nimport dayjs from 'dayjs'\nimport {Button, Card, Loading, Pagination, Select, Tooltip} from \"element-react\";\nimport {AiFillInfoCircle} from 'react-icons/ai'\nimport {FaListAlt} from 'react-icons/fa'\nimport {RiBarChartBoxFill} from 'react-icons/ri'\n\nimport DatePicker from \"../components/DatePicker\";\nimport Collapse from \"../components/Collapse\";\nimport {initDate, initCategoryOptions, initRegionOptions} from \"../utils/common\";\nimport HorizontalBarChart from \"../components/HorizontalBarChart\";\nimport {getNewCommentBarChart, getTableNewComments} from \"../apis/market\";\nimport {NewCommentBarChart, NewCommentBarItem, SearchParams, TableResponse} from \"../types/market\";\nimport {formatDate} from \"../utils/common\";\nimport {ProductsParams, ProductsResponse} from \"../types/product\";\nimport {getProducts} from \"../apis/product\";\nimport ProductCards from \"../components/ProductCards\";\nimport {CHART_TYPE} from \"../types/common\";\nimport TableChart from \"../components/TableChart\";\nimport {useUpdateEffect} from \"../utils/hook\";\nimport ProductsDownloadDialog from \"../components/ProductsDownloadDialog\";\n\nfunction formatData(data: NewCommentBarChart): [string[], {data: string, value: number}[]] {\n    const formatContent = data.items.content.sort((a: NewCommentBarItem, b: NewCommentBarItem) => b.review - a.review);\n    const yAxisData = formatContent.map((it: NewCommentBarItem) => it.name);\n    const seriesData = formatContent.map((it: NewCommentBarItem) => ({data: it.asin, value: it.review}));\n    return [yAxisData, seriesData]\n}\n\nfunction NewReviews() {\n    const [chartType, setChartType] = useState(CHART_TYPE.CHART);\n    const [isChartLoading, setIsChartLoading] = useState(false);\n    const [visible, setVisible] = useState(false);\n\n    const [category, setCategory] = useState('webcam');\n    const [region, setRegion] = useState('US');\n    const [date, setDate] = useState<ElementReactLibs.dateType[]>(initDate());\n    const [filter, setFilter] = useState<any>({});\n    const [asin, setAsin] = useState<string | null>(null);\n\n    const [chartPage, setChartPage] = useState(1);\n    const [tablePage, setTablePage] = useState(1);\n    const [productsPage, setProductsPage] = useState(1);\n\n    const [newComment, setNewComment] = useState<NewCommentBarChart | null>(null);\n    const [table, setTable] = useState<TableResponse | null>(null);\n    const [products, setProducts] = useState<ProductsResponse | null>(null);\n\n    const categoryOptions = initCategoryOptions();\n    const regionOptions = initRegionOptions();\n\n    const tableColumn: ElementReact.TableColumn[] = [\n        {label: 'Product', prop: 'Product'},\n        {label: 'Brand', prop: 'Brand'},\n        {label: 'Price', prop: 'Price', sortable: true},\n        {label: 'Total Reviews', prop: 'Total Reviews'},\n        {label: 'New Reviews', prop: 'New Reviews'},\n    ];\n\n    const fetchChart = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page: chartPage,\n            ...filter\n        };\n        setIsChartLoading(true);\n        const {data} = await getNewCommentBarChart(params);\n        setNewComment(data);\n        setIsChartLoading(false)\n    };\n\n    const fetchTable = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page: tablePage,\n            ...filter\n        };\n        setIsChartLoading(true);\n        const {data} = await getTableNewComments(params);\n        setTable(data);\n        setIsChartLoading(false)\n    };\n\n    const fetchProducts = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: ProductsParams = {\n            category,\n            region,\n            page: productsPage,\n            start_at,\n            end_at,\n            ...filter\n        };\n        if (asin) params.asin = asin;\n        const {data} = await getProducts(params);\n        setProducts(data)\n    };\n\n    useEffect(() => {\n        setChartPage(1);\n        setTablePage(1);\n        setProductsPage(1);\n\n        if (chartType === CHART_TYPE.CHART && chartPage === 1) fetchChart();\n        if (chartType === CHART_TYPE.TABLE && tablePage === 1) fetchTable();\n        if (productsPage === 1) fetchProducts();\n    }, [region, date, filter]);\n\n    useUpdateEffect(() => {\n        setFilter({})\n    }, [category]);\n\n    useUpdateEffect(() => {\n        if (chartType === CHART_TYPE.CHART) fetchChart();\n        if (chartType === CHART_TYPE.TABLE) fetchTable();\n    }, [chartType]);\n\n    useUpdateEffect(() => {\n        if (chartType === CHART_TYPE.CHART) fetchChart();\n        if (chartType === CHART_TYPE.TABLE) fetchTable();\n    }, [chartPage, tablePage]);\n\n    useUpdateEffect(() => {\n        fetchProducts()\n    }, [productsPage]);\n\n    useUpdateEffect(() => {\n        setProductsPage(1);\n        if (productsPage === 1) fetchProducts();\n    }, [asin]);\n\n    const onChartTypeChange = () => {\n        if (chartType === CHART_TYPE.CHART) setChartType(CHART_TYPE.TABLE);\n        if (chartType === CHART_TYPE.TABLE) setChartType(CHART_TYPE.CHART)\n    };\n\n    const handleDownloadProducts = async (asin: string[]) => {\n        const [start_at, end_at] = formatDate(date);\n        const params: ProductsParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            dl: 1,\n            asin: asin.join(','),\n            ...filter\n        };\n        const {request} = await getProducts(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    const handleDownloadTable = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page: chartPage,\n            dl: 1,\n            ...filter\n        };\n        const {request} = await getTableNewComments(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    return (\n        <div>\n            {/* Search Bar */}\n            <div className=\"flex items-center mb-4\">\n                <Select className=\"mr-4\" value={category} placeholder=\"Select\"\n                        onChange={(value: string) => setCategory(value)}>\n                    {\n                        categoryOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <Select className=\"mr-4\" value={region} placeholder=\"Select\"\n                        onChange={(value: string) => setRegion(value)}>\n                    {\n                        regionOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <DatePicker\n                    date={date}\n                    setDate={setDate}\n                    disabledDate={(_date: Date) => dayjs(_date).day() !== 0}\n                />\n                <Tooltip\n                    className=\"mr-4\"\n                    effect=\"dark\"\n                    content={\n                        <div style={{maxWidth: '200px'}}>\n                            The review numbers of products on Amazon may recount in certain situation, making some of the products' review numbers unavailable in certain period. Please notice that these products will not be shown on the table.\n                        </div>\n                    }\n                    placement=\"bottom\"\n                >\n                    <AiFillInfoCircle className=\"text-2xl\"/>\n                </Tooltip>\n                <div className=\"text-2xl cursor-pointer\" onClick={onChartTypeChange}>\n                    {\n                        chartType === CHART_TYPE.CHART && <FaListAlt/>\n                    }\n                    {\n                        chartType === CHART_TYPE.TABLE && <RiBarChartBoxFill/>\n                    }\n                </div>\n            </div>\n\n            <div className=\"flex\">\n                <div className=\"w-2/3 pr-2\">\n                    <Card className=\"mb-4\" style={{minHeight: '642px'}}>\n                        {\n                            isChartLoading && <div className=\"w-full h-dialog flex justify-center items-center\"><Loading /></div>\n                        }\n                        {\n                            chartType === CHART_TYPE.CHART && newComment && !isChartLoading &&\n                            <>\n                              <HorizontalBarChart\n                                title=\"Top Product - New Reviews\"\n                                height=\"572px\"\n                                data={formatData(newComment)}\n                                dataItemName=\"Reviews\"\n                                onClick={(value: string) => setAsin(value)}\n                              />\n                              <div className=\"flex justify-end\">\n                                <Pagination\n                                  layout=\"prev, pager, next\"\n                                  pageCount={newComment.info.max_page}\n                                  small={true}\n                                  currentPage={newComment.items.current_page}\n                                  onCurrentChange={(value: number) => setChartPage(value)}\n                                />\n                              </div>\n                            </>\n                        }\n                        {\n                            chartType === CHART_TYPE.TABLE && table && !isChartLoading &&\n                            <>\n                              <TableChart height=\"572px\" columns={tableColumn} data={table.items.content}\n                                          onDownload={handleDownloadTable}/>\n                              <div className=\"flex justify-end\">\n                                <Pagination\n                                  layout=\"prev, pager, next\"\n                                  pageCount={table.info.max_page}\n                                  small={true}\n                                  currentPage={table.items.current_page}\n                                  onCurrentChange={(value: number) => setTablePage(value)}\n                                />\n                              </div>\n                            </>\n                        }\n                    </Card>\n                </div>\n\n                <div className=\"w-1/3 pl-2\">\n                    <Card>\n                        <Collapse height=\"600px\" type={category} onFilter={setFilter}/>\n                    </Card>\n                </div>\n            </div>\n\n            {/* Product Cards */}\n            <div className=\"mt-16\">\n                <div className=\"flex\">\n                    {\n                        asin\n                            ? <p className=\"text-2xl mr-2\">{asin}</p>\n                            : <p className=\"text-2xl mr-2\">Top 100 Products</p>\n                    }\n                    <Button type=\"primary\" onClick={() => setVisible(true)}>Download</Button>\n                    {\n                        asin && <Button type=\"info\" onClick={() => setAsin(null)}>Top 100</Button>\n                    }\n                </div>\n                {\n                    products &&\n                    <ProductCards\n                      data={products.prods}\n                      region={region}\n                      page={products.info.current_page}\n                      totalPage={products.info.max_page}\n                      onChange={setProductsPage}\n                    />\n                }\n            </div>\n\n            <ProductsDownloadDialog\n                visible={visible}\n                setVisible={setVisible}\n                params={{\n                    category,\n                    region,\n                    date,\n                    asin\n                }}\n                onDownload={handleDownloadProducts}\n            />\n        </div>\n    )\n}\n\nexport default NewReviews\n","import React, {useEffect, useState} from 'react'\nimport dayjs from 'dayjs'\nimport {Card, Select, Tooltip, Pagination, Button, Loading} from \"element-react\";\nimport {AiFillInfoCircle} from 'react-icons/ai'\nimport {FaListAlt} from 'react-icons/fa'\nimport {RiBarChartBoxFill} from 'react-icons/ri'\n\nimport DatePicker from \"../components/DatePicker\";\nimport Collapse from \"../components/Collapse\";\nimport ProductCards from \"../components/ProductCards\";\nimport {initDate, initCategoryOptions, initRegionOptions} from \"../utils/common\";\nimport VerticalProgressBarChart from \"../components/VerticalProgressBarChart\";\nimport {getTableTopProduct, getTopProductBarChart} from \"../apis/market\";\nimport {ProductBarChart, ProductBarItem, SearchParams, TableTopProductResponse} from \"../types/market\";\nimport {formatDate} from \"../utils/common\";\nimport {CHART_TYPE} from \"../types/common\";\nimport {ProductsParams, ProductsResponse} from \"../types/product\";\nimport {getProducts} from \"../apis/product\";\nimport TableChart from \"../components/TableChart\";\nimport {useUpdateEffect} from \"../utils/hook\";\nimport ProductsDownloadDialog from \"../components/ProductsDownloadDialog\";\n\nfunction formatTopBrandData(data: ProductBarChart): [string[], {name: string, data: string, value: number}[], number[]] {\n    const formatContent = data.items.content.sort((a: ProductBarItem, b: ProductBarItem) => b.count - a.count);\n    const yAxisData = formatContent.map((it: ProductBarItem) => it.name);\n    const seriesData = formatContent.map((it: ProductBarItem) => ({name: it.name, data: it.ASIN, value: it.count}));\n    const ranks = formatContent.map((it: ProductBarItem) => it.avg_rank);\n    return [yAxisData, seriesData, ranks]\n}\n\nfunction ProductsRanking() {\n    const [chartType, setChartType] = useState(CHART_TYPE.CHART);\n    const [isChartLoading, setIsChartLoading] = useState(false);\n    const [visible, setVisible] = useState(false);\n\n    const [category, setCategory] = useState('webcam');\n    const [region, setRegion] = useState('US');\n    const [date, setDate] = useState<ElementReactLibs.dateType[]>(initDate());\n    const [filter, setFilter] = useState<any>({});\n    const [asin, setAsin] = useState<string | null>(null);\n\n    const [chartPage, setChartPage] = useState(1);\n    const [tablePage, setTablePage] = useState(1);\n    const [productsPage, setProductsPage] = useState(1);\n\n    const [rankings, setRankings] = useState<ProductBarChart | null>(null);\n    const [table, setTable] = useState<TableTopProductResponse | null>(null);\n    const [products, setProducts] = useState<ProductsResponse | null>(null);\n\n    const categoryOptions = initCategoryOptions();\n    const regionOptions = initRegionOptions();\n\n    const tableColumn: ElementReact.TableColumn[] = [\n        {label: 'Rank', prop: 'rank'},\n        {label: 'Product', prop: 'name'},\n        {label: 'Brand', prop: 'brand'},\n        {label: 'ASIN', prop: 'ASIN'},\n        {label: 'Sales', prop: 'sales', sortable: true},\n        {label: 'Times in Top 30', prop: 'count'},\n    ];\n\n    const fetchChart = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page: chartPage,\n            ...filter\n        };\n        const {data} = await getTopProductBarChart(params);\n        setRankings(data);\n    };\n\n    const fetchTable = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page: tablePage,\n            ...filter\n        };\n        const {data} = await getTableTopProduct(params);\n        setTable(data)\n    };\n\n    const fetchProducts = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: ProductsParams = {\n            category,\n            region,\n            page: productsPage,\n            start_at,\n            end_at,\n            top_product: 1,\n            ...filter,\n        };\n        if (asin) params.asin = asin;\n        const {data} = await getProducts(params);\n        setProducts(data)\n    };\n\n    useEffect(() => {\n        setChartPage(1);\n        setTablePage(1);\n        setProductsPage(1);\n        setAsin(null);\n\n        if (chartType === CHART_TYPE.CHART && chartPage === 1) fetchChart();\n        if (chartType === CHART_TYPE.TABLE && tablePage === 1) fetchTable();\n        if (productsPage === 1 && asin === null) fetchProducts();\n    }, [region, date, filter]);\n\n    useUpdateEffect(() => {\n        setFilter({})\n    }, [category]);\n\n    useUpdateEffect(() => {\n        if (chartType === CHART_TYPE.CHART) fetchChart();\n        if (chartType === CHART_TYPE.TABLE) fetchTable();\n    }, [chartType, chartPage, tablePage]);\n\n    useUpdateEffect(() => {\n        fetchProducts()\n    }, [productsPage]);\n\n    useUpdateEffect(() => {\n        setProductsPage(1);\n        if(productsPage === 1) fetchProducts()\n    }, [asin]);\n\n    const handleDownloadProducts = async (asin: string[]) => {\n        const [start_at, end_at] = formatDate(date);\n        const params: ProductsParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            top_product: 1,\n            dl: 1,\n            asin: asin.join(','),\n            ...filter\n        };\n        const {request} = await getProducts(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    const handleDownloadTable = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page: chartPage,\n            dl: 1,\n            ...filter\n        };\n        const {request} = await getTableTopProduct(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    const onChartTypeChange = () => {\n        if (chartType === CHART_TYPE.CHART) setChartType(CHART_TYPE.TABLE);\n        if (chartType === CHART_TYPE.TABLE) setChartType(CHART_TYPE.CHART)\n    };\n\n    return (\n        <div>\n            {/* Search Bar */}\n            <div className=\"flex items-center mb-4\">\n                <Select className=\"mr-4\" value={category} placeholder=\"Select\"\n                        onChange={(value: string) => setCategory((value))}>\n                    {\n                        categoryOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <Select className=\"mr-4\" value={region} placeholder=\"Select\"\n                        onChange={(value: string) => setRegion(value)}>\n                    {\n                        regionOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <DatePicker\n                    date={date}\n                    setDate={setDate}\n                    disabledDate={(_date: Date) => dayjs(_date).day() !== 0}\n                />\n                <Tooltip\n                    className=\"mr-4\"\n                    effect=\"dark\"\n                    content={\n                        <div style={{maxWidth: '200px'}}>\n                            Sold Amount is estimated by multiplaying new reviews in each price range by 100.\n                        </div>\n                    }\n                    placement=\"bottom\"\n                >\n                    <AiFillInfoCircle className=\"text-2xl\"/>\n                </Tooltip>\n                <div className=\"text-2xl cursor-pointer\" onClick={onChartTypeChange}>\n                    {\n                        chartType === CHART_TYPE.CHART && <FaListAlt/>\n                    }\n                    {\n                        chartType === CHART_TYPE.TABLE && <RiBarChartBoxFill/>\n                    }\n                </div>\n            </div>\n\n            <div className=\"flex\">\n                <div className=\"w-2/3 pr-2\">\n                    <Card className=\"mb-4\" style={{minHeight: '642px'}}>\n                        {\n                            isChartLoading && <div className=\"w-full h-dialog flex justify-center items-center\"><Loading /></div>\n                        }\n                        {\n                            chartType === CHART_TYPE.CHART && rankings && !isChartLoading &&\n                            <div>\n                              <VerticalProgressBarChart\n                                title=\"Product - No. of Times in Top 30\"\n                                height=\"572px\"\n                                data={formatTopBrandData(rankings)}\n                                onClick={(value: string) => setAsin(value)}\n                                padding=\"0 20px 0 50px\"\n                              />\n                              <div className=\"flex justify-end\">\n                                <Pagination\n                                  layout=\"prev, pager, next\"\n                                  pageCount={rankings.info.max_page}\n                                  small={true}\n                                  currentPage={rankings.items.current_page}\n                                  onCurrentChange={(value: number) => setChartPage(value)}\n                                />\n                              </div>\n                            </div>\n                        }\n                        {\n                            chartType === CHART_TYPE.TABLE && table && !isChartLoading &&\n                            <>\n                              <TableChart height=\"572px\" columns={tableColumn} data={table.items.content}\n                                          onDownload={handleDownloadTable}/>\n                              <div className=\"flex justify-end\">\n                                <Pagination\n                                  layout=\"prev, pager, next\"\n                                  pageCount={table.info.max_page}\n                                  small={true}\n                                  currentPage={table.items.current_page}\n                                  onCurrentChange={(value: number) => setChartPage(value)}\n                                />\n                              </div>\n                            </>\n                        }\n                    </Card>\n                </div>\n\n                <div className=\"w-1/3 pl-2\">\n                    <Card>\n                        <Collapse height=\"600px\" type={category} onFilter={setFilter}/>\n                    </Card>\n                </div>\n            </div>\n\n            {/* Product Cards */}\n            <div className=\"mt-16\">\n                <div className=\"flex\">\n                    {\n                        asin\n                            ? <p className=\"text-2xl mr-2\">{asin}</p>\n                            : <p className=\"text-2xl mr-2\">Top 30 Products</p>\n                    }\n                    <Button type=\"primary\" onClick={() => setVisible(true)}>Download</Button>\n                    {\n                        asin && <Button type=\"info\" onClick={() => setAsin(null)}>Top 30</Button>\n                    }\n                </div>\n                {\n                    products &&\n                    <ProductCards\n                      data={products.prods}\n                      region={region}\n                      page={products.info.current_page}\n                      totalPage={products.info.max_page}\n                      onChange={setProductsPage}\n                    />\n                }\n            </div>\n\n            <ProductsDownloadDialog\n                visible={visible}\n                setVisible={setVisible}\n                params={{\n                    category,\n                    region,\n                    date,\n                    top_product: 1,\n                    asin,\n                    ...filter\n                }}\n                onDownload={handleDownloadProducts}\n            />\n        </div>\n    )\n}\n\nexport default ProductsRanking\n","import React, {useEffect, useRef} from 'react'\nimport * as echarts from 'echarts/core'\nimport {PieChart, PieSeriesOption} from \"echarts/charts\";\nimport {\n    TitleComponent,\n    TitleComponentOption,\n    GridComponent,\n    GridComponentOption,\n    TooltipComponent,\n    TooltipComponentOption,\n    LegendComponent,\n    LegendComponentOption\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\nimport {downloadPng} from \"../utils/download\";\nimport {HiDownload} from \"react-icons/hi\";\nimport {PieChartItem} from \"../types/chart\";\n\ninterface DoughnutChartProps {\n    width?: string;\n    height?: string;\n    title?: string;\n    titleFontSize?: number;\n    subtitle?: string;\n    subtitleFontSize?: number;\n    data: PieChartItem[]\n}\n\ntype ECOption = echarts.ComposeOption<PieSeriesOption | TitleComponentOption | GridComponentOption | TooltipComponentOption | LegendComponentOption>;\n\necharts.use([PieChart, TitleComponent, GridComponent, TooltipComponent, LegendComponent, CanvasRenderer]);\n\nfunction VerticalDoughnutChart(props: DoughnutChartProps) {\n    const chartRef = useRef<HTMLDivElement | null>(null);\n    const {width = '100%', height = '400px', title = 'Title', titleFontSize = 20, subtitle = '', subtitleFontSize = 24, data = []} = props;\n    const option: ECOption = {\n        legend: {\n            bottom: '15%',\n            textStyle: {\n                fontSize: 20\n            }\n        },\n        tooltip: {},\n        series: [\n            {\n                type: \"pie\",\n                center: ['50%', '40%'],\n                radius: [\"40%\", \"70%\"],\n                left: 'left',\n                label: {\n                    position: \"inner\",\n                    formatter: '{d}%',\n                    color: 'white'\n                },\n                labelLine: {\n                    show: false\n                },\n                data\n            }\n        ]\n    };\n    useEffect(() => {\n        if (!chartRef.current) return;\n\n        const chart = echarts.init(chartRef.current, 'customed');\n        chart.setOption(option)\n    });\n\n    const onDownload = async () => {\n        if (!chartRef.current) return;\n\n        await downloadPng(chartRef.current, title)\n    };\n\n    return (\n        <div className=\"relative\">\n            <div className=\"absolute left-0 top-0\">\n                <h3 className=\"font-bold mr-4 text-gray-700\" style={{fontSize: titleFontSize}}>{title}</h3>\n                <h3 className=\"font-bold text-gray-500\" style={{fontSize: subtitleFontSize}}>{subtitle}</h3>\n            </div>\n            <HiDownload className=\"absolute right-0 top-0 text-3xl cursor-pointer z-30r\" onClick={onDownload}/>\n            <div ref={chartRef} style={{width, height}}/>\n        </div>\n    )\n}\n\nexport default VerticalDoughnutChart\n","import React, {useEffect, useState} from 'react'\nimport dayjs from 'dayjs'\nimport {Button, Card, Loading, Pagination, Select, Tooltip} from \"element-react\";\nimport {AiFillInfoCircle} from 'react-icons/ai'\nimport {FaListAlt} from 'react-icons/fa'\nimport {RiBarChartBoxFill} from 'react-icons/ri'\n\nimport {initDate, initCategoryOptions, initRegionOptions} from \"../utils/common\";\nimport HorizontalBarChart from \"../components/HorizontalBarChart\";\nimport VerticalDoughnutChart from \"../components/VerticalDoughnutChart\";\nimport DatePicker from \"../components/DatePicker\";\nimport {\n    getTableTopBrand,\n    getTopBrandBarChart,\n    getTopBrandPieChart,\n} from \"../apis/market\";\nimport {PieChartItem} from \"../types/chart\";\nimport {\n    SearchParams,\n    TableTopBrandResponse,\n    TopBrandBarChart,\n    TopBrandPieItem\n} from \"../types/market\";\nimport {formatDate} from \"../utils/common\";\nimport {CHART_TYPE} from \"../types/common\";\nimport {ProductsParams, ProductsResponse} from \"../types/product\";\nimport {getProducts} from \"../apis/product\";\nimport ProductCards from \"../components/ProductCards\";\nimport TableChart from \"../components/TableChart\";\nimport {useUpdateEffect} from \"../utils/hook\";\nimport ProductsDownloadDialog from \"../components/ProductsDownloadDialog\";\n\nfunction formatData(data: TopBrandBarChart | null): [string[], { data: string, value: number }[]] {\n    if (!data) return [[], []];\n    const formatContent = data.items.content.sort((a: TopBrandPieItem, b: TopBrandPieItem) => b.count - a.count);\n    const yAxisData = formatContent.map((it: TopBrandPieItem) => it.brand);\n    const seriesData = formatContent.map((it: TopBrandPieItem) => ({data: it.brand, value: it.count}));\n    return [yAxisData, seriesData]\n}\n\nfunction BrandRanking() {\n    const [chartType, setChartType] = useState(CHART_TYPE.CHART);\n    const [isChartLoading, setIsChartLoading] = useState(false);\n    const [visible, setVisible] = useState(false);\n\n    const [category, setCategory] = useState('webcam');\n    const [region, setRegion] = useState('US');\n    const [date, setDate] = useState<ElementReactLibs.dateType[]>(initDate());\n    const [brand, setBrand] = useState<string | null>(null);\n\n    const [chartPage, setChartPage] = useState(1);\n    const [tablePage, setTablePage] = useState(1);\n    const [productsPage, setProductsPage] = useState(1);\n\n    const [brandProducts, setBrandProducts] = useState<TopBrandBarChart | null>(null);\n    const [table, setTable] = useState<TableTopBrandResponse | null>(null);\n    const [topBrandData, setTopBrandData] = useState<PieChartItem[]>([]);\n    const [products, setProducts] = useState<ProductsResponse | null>(null);\n\n    const categoryOptions = initCategoryOptions();\n    const regionOptions = initRegionOptions();\n\n    const tableColumn: ElementReact.TableColumn[] = [\n        {label: 'Brand', prop: 'brand'},\n        {label: 'Products in Top 100', prop: 'count', sortable: true},\n        {label: 'Sales Volume', prop: 'sales'},\n        {label: 'Revenue', prop: 'revenue'},\n        {label: 'Best Product Ranking', prop: 'rank'},\n    ];\n    const fetchChart = async (isSetBrand?: boolean) => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n        };\n\n        setIsChartLoading(true);\n        const {data: products} = await getTopBrandBarChart({...params, page: chartPage});\n        const {data: pie} = await getTopBrandPieChart(params);\n        const pieChartItems = pie.items.map((it: TopBrandPieItem): PieChartItem => ({\n            name: it.brand,\n            value: it.count\n        }));\n        setBrandProducts(products);\n        setTopBrandData(pieChartItems);\n\n        if (isSetBrand) {\n            const brand = products.items.content[0]!.brand;\n            setBrand(brand);\n        }\n        setIsChartLoading(false)\n    };\n\n    const fetchTable = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n        };\n        setIsChartLoading(true);\n        const {data} = await getTableTopBrand({...params, page: tablePage});\n        setTable(data);\n        setIsChartLoading(false)\n    };\n\n    const fetchProducts = async (_brand?: string) => {\n        const [start_at, end_at] = formatDate(date);\n        const params: ProductsParams = {\n            category,\n            region,\n            page: productsPage,\n            start_at,\n            end_at\n        };\n        if (brand) params.brand = brand;\n        if (_brand) params.brand = _brand;\n        const {data} = await getProducts(params);\n        setProducts(data)\n    };\n\n    useEffect(() => {\n        setChartPage(1);\n        setTablePage(1);\n        setProductsPage(1);\n\n        if (chartType === CHART_TYPE.CHART && chartPage === 1) fetchChart(true);\n        if (chartType === CHART_TYPE.TABLE && tablePage === 1) fetchTable();\n    }, [category, region, date]);\n\n    useUpdateEffect(() => {\n        if (chartType === CHART_TYPE.CHART) fetchChart();\n        if (chartType === CHART_TYPE.TABLE) fetchTable();\n    }, [chartType, chartPage, tablePage]);\n\n    useUpdateEffect(() => {\n        fetchProducts()\n    }, [productsPage, brand]);\n\n    useUpdateEffect(() => {\n        setProductsPage(1);\n        if (productsPage === 1) fetchProducts()\n    }, [brand]);\n\n\n    const onChartTypeChange = () => {\n        if (chartType === CHART_TYPE.CHART) setChartType(CHART_TYPE.TABLE);\n        if (chartType === CHART_TYPE.TABLE) setChartType(CHART_TYPE.CHART)\n    };\n\n    const handleDownloadProducts = async (asin: string[]) => {\n        const [start_at, end_at] = formatDate(date);\n        const params: ProductsParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            dl: 1,\n            asin: asin.join(','),\n        };\n        const {request} = await getProducts(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    const handleDownloadTable = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page: chartPage,\n            dl: 1,\n        };\n        const {request} = await getTableTopBrand(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    return (\n        <div>\n            {/* Search Bar */}\n            <div className=\"flex items-center mb-4\">\n                <Select className=\"mr-4\" value={category} placeholder=\"Select\"\n                        onChange={(value: string) => setCategory(value)}>\n                    {\n                        categoryOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <Select className=\"mr-4\" value={region} placeholder=\"Select\"\n                        onChange={(value: string) => setRegion(value)}>\n                    {\n                        regionOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <DatePicker\n                    date={date}\n                    setDate={setDate}\n                    disabledDate={(_date: Date) => dayjs(_date).day() !== 0}\n                />\n                <Tooltip\n                    className=\"mr-4\"\n                    effect=\"dark\"\n                    content={\n                        <div style={{maxWidth: '200px'}}>\n                            Sold Amount is estimated by multiplaying new reviews in each price range by 100.\n                        </div>\n                    }\n                    placement=\"bottom\"\n                >\n                    <AiFillInfoCircle className=\"text-2xl\"/>\n                </Tooltip>\n                <div className=\"text-2xl cursor-pointer\" onClick={onChartTypeChange}>\n                    {\n                        chartType === CHART_TYPE.CHART && <FaListAlt/>\n                    }\n                    {\n                        chartType === CHART_TYPE.TABLE && <RiBarChartBoxFill/>\n                    }\n                </div>\n            </div>\n\n            <div className=\"flex\">\n                <div className=\"w-2/3 pr-2\">\n                    <Card className=\"mb-4\" style={{minHeight: '642px'}}>\n                        {\n                            isChartLoading && <div className=\"w-full h-dialog flex justify-center items-center\"><Loading /></div>\n                        }\n                        {\n                            chartType === CHART_TYPE.CHART && brandProducts && !isChartLoading &&\n                            <>\n                              <HorizontalBarChart\n                                title=\"Brand's Products in Top 100\"\n                                height=\"572px\"\n                                data={formatData(brandProducts)}\n                                dataItemName=\"Products\"\n                                onClick={(value: string) => setBrand(value)}\n                              />\n                              <div className=\"flex justify-end\">\n                                <Pagination\n                                  layout=\"prev, pager, next\"\n                                  pageCount={brandProducts.info.max_page}\n                                  small={true}\n                                  currentPage={brandProducts.items.current_page}\n                                  onCurrentChange={(value: number) => setChartPage(value)}\n                                />\n                              </div>\n                            </>\n                        }\n                        {\n                            chartType === CHART_TYPE.TABLE && table && !isChartLoading &&\n                            <>\n                              <TableChart height=\"572px\" columns={tableColumn} data={table.data.content}\n                                          onDownload={handleDownloadTable}/>\n                              <div className=\"flex justify-end\">\n                                <Pagination\n                                  layout=\"prev, pager, next\"\n                                  pageCount={table.info.max_page}\n                                  small={true}\n                                  currentPage={table.data.current_page}\n                                  onCurrentChange={(value: number) => setChartPage(value)}\n                                />\n                              </div>\n                            </>\n                        }\n                    </Card>\n                </div>\n\n                <div className=\"w-1/3 pl-2\">\n                    <Card>\n                        <VerticalDoughnutChart\n                            title=\"Top 5 Brands -\"\n                            titleFontSize={22}\n                            subtitle=\"Models in Top 100\"\n                            subtitleFontSize={18}\n                            height=\"600px\"\n                            data={topBrandData}/>\n                    </Card>\n                </div>\n            </div>\n\n            {/* Product Cards */}\n            <div className=\"mt-16\">\n                <div className=\"flex\">\n                    <p className=\"text-2xl mr-2\">{brand}</p>\n                    <Button type=\"primary\" onClick={() => setVisible(true)}>Download</Button>\n                </div>\n                {\n                    products &&\n                    <ProductCards\n                      data={products.prods}\n                      region={region}\n                      page={products.info.current_page}\n                      totalPage={products.info.max_page}\n                      onChange={setProductsPage}\n                    />\n                }\n            </div>\n\n            <ProductsDownloadDialog\n                visible={visible}\n                setVisible={setVisible}\n                params={{\n                    category,\n                    region,\n                    date,\n                    brand\n                }}\n                onDownload={handleDownloadProducts}\n            />\n        </div>\n    )\n}\n\nexport default BrandRanking\n","import React, {useMemo} from 'react'\n\ninterface Item {\n    source: string;\n    count: number;\n}\n\ninterface ProgressChartProps {\n    title?: string;\n    data: Item[];\n    colors: string[];\n    onClick?(value: number): void;\n}\n\nfunction ProgressChart(props: ProgressChartProps) {\n    const {title = '', colors = ['', ''], data, onClick} = props;\n    const total = useMemo(() => data.reduce((prev, curr) => prev + curr.count, 0), [data]);\n\n    const handleClickProgress = (source: number) => {\n        if (onClick) {\n            onClick(source)\n        }\n    }\n\n    const getNameColorStyles = (index: number) => ({\n        backgroundColor: colors[index]\n    });\n\n    const getBarStyles = (count: number, index: number) => {\n        return {\n            background: colors[index],\n            width: total ? `calc(100% / ${total} * ${count})` : '50%',\n        };\n    };\n\n    return (\n        <div>\n            {title && <h1 className=\"text-2xl\">{title}</h1>}\n            <div className=\"pt-4\">\n                <div className=\"mx-auto\">\n                    <div className=\"flex justify-start\" style={{height: '100px'}}>\n                        {\n                            data.map((item: Item, index: number) => (\n                                <div className=\"flex justify-center items-center cursor-pointer\"\n                                     key={index}\n                                     style={getBarStyles(item.count, index)}\n                                     onClick={() => handleClickProgress(index ? 0 : 1)}\n                                >\n                                    <p className=\"text-2xl text-white\">{item.count ? Math.round(item.count / total * 100) : 0}%</p>\n                                </div>\n                            ))\n                        }\n                    </div>\n                </div>\n                <div className=\"flex justify-center items-center mt-4\">\n                    {\n                        data.map((item: Item, index: number) => (\n                            <div className=\"flex mr-8\" key={index}>\n                                <div className=\"w-4 h-4 mr-2\" style={getNameColorStyles(index)}/>\n                                <h2>From {item.source}</h2>\n                            </div>\n                        ))\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ProgressChart\n","import React, {useEffect, useRef} from 'react'\nimport * as echarts from 'echarts/core'\nimport {LineChart, BarChart, LineSeriesOption, BarSeriesOption} from \"echarts/charts\";\nimport {\n    TitleComponent,\n    TitleComponentOption,\n    GridComponent,\n    GridComponentOption,\n    TooltipComponent,\n    TooltipComponentOption,\n    LegendComponent,\n    LegendComponentOption,\n    DataZoomComponent,\n    DataZoomComponentOption\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\nimport {HiDownload} from 'react-icons/hi'\nimport {downloadPng} from \"../utils/download\";\nimport {BarLine, BarLineChartData} from \"../types/market\";\nimport {takeChartTypeData, takeIntervalAxisSetting} from \"../utils/chart\";\n\ninterface BarLineChartProps {\n    width?: string;\n    height?: string;\n    title?: string;\n    titleFontSize?: number;\n    data: BarLineChartData | null;\n    names?: string[];\n    yAxisLabel?: string;\n\n    onClick?(value: string): void;\n}\n\ntype ECOption = echarts.ComposeOption<BarSeriesOption | LineSeriesOption | TitleComponentOption | GridComponentOption | TooltipComponentOption | LegendComponentOption | DataZoomComponentOption>;\n\necharts.use([LineChart, BarChart, TitleComponent, GridComponent, TooltipComponent, LegendComponent, CanvasRenderer, DataZoomComponent]);\n\nfunction BarLineChart(props: BarLineChartProps) {\n    const chartRef = useRef<HTMLDivElement | null>(null);\n    const {width = '100%', height = '400px', title = 'Title', titleFontSize = 24, data = null, names = [], onClick, yAxisLabel} = props;\n\n    function getLegend(name: string) {\n        if (!data) return name;\n\n        const target = data.series.find((it: BarLine) => it.name === name);\n        if (!target) return name;\n\n        if (target.name.includes('Rate')) return name;\n\n        const total = target.data.reduce((result, num) => result + num, 0).toFixed(2);\n        return `${name}, total: ${total}`\n    }\n\n    function mixingStackBarDataToList(list: BarLine[]): number[] {\n        return list.reduce((result: number[], it: BarLine) => {\n            it.data.forEach((value: number, index: number) => {\n                if (result[index]) {\n                    result[index] += value\n                } else {\n                    result[index] = value\n                }\n            })\n            return result\n        }, [])\n    }\n    const leftAxisSetting = takeIntervalAxisSetting(\n        mixingStackBarDataToList(\n            takeChartTypeData(0, data)\n        )\n    );\n    const rightAxisSetting = takeIntervalAxisSetting(\n        [],\n        true\n    );\n\n    const option: ECOption = {\n        title: {\n            text: title,\n            textStyle: {\n                fontSize: titleFontSize\n            }\n        },\n        grid: {\n            backgroundColor: 'white',\n            top: 70,\n            right: 70,\n            left: 70,\n            bottom: 60\n        },\n        legend: {\n            bottom: 0,\n            formatter(name) {\n                return getLegend(name)\n            }\n        },\n        tooltip: {\n            trigger: 'axis',\n            formatter(params: any) {\n                return `\n                    <div style=\"min-width: 200px;\">\n                        ${params[0].name} <br />\n                        ${params.filter((it: any) => !isNaN(it.value)).map((it: any) => `\n                            <div  style=\"display: flex; justify-content: space-between;\">\n                                <span>${it.marker} ${it.seriesName}</span> ${it.value}${it.seriesName.includes('Rate') ? '%' : ''} <br />\n                            </div>\n                        `).join('')}\n                    </div>\n                `\n            }\n        },\n        xAxis: [\n            {\n                type: 'category',\n                data: data ? data.axis : [],\n            }\n        ],\n        yAxis: [\n            {\n                type: 'value',\n                name: names[0] || 'Quantity',\n                min: leftAxisSetting.min,\n                max: leftAxisSetting.max,\n                interval: leftAxisSetting.interval\n            },\n            {\n                type: 'value',\n                name: names[1] || 'Value',\n                min: rightAxisSetting.min,\n                max: rightAxisSetting.max,\n                interval: rightAxisSetting.interval,\n                axisLabel: {\n                    formatter(name: any): string {\n                        return name + '%'\n                    }\n                }\n            }\n        ],\n        series: data ? data.series : []\n    };\n\n    useEffect(() => {\n        if (!chartRef.current) return;\n\n        const chart = echarts.init(chartRef.current, 'customed');\n        chart.setOption(option);\n        chart.on('click', (params) => {\n            if (onClick && params && data) {\n                onClick(data.axis[params.dataIndex])\n            }\n        })\n    });\n\n    const onDownload = async () => {\n        if (!chartRef.current) return;\n        await downloadPng(chartRef.current, title)\n    };\n\n    return (\n        <div className=\"relative w-full\">\n            <HiDownload className=\"absolute right-0 top-0 text-3xl cursor-pointer z-30\" onClick={onDownload}/>\n            <div ref={chartRef} style={{width, height}} />\n            {\n                yAxisLabel && <p className=\"absolute bottom-5 left-1/2 text-sm transform -translate-x-1/2\">{ yAxisLabel }</p>\n            }\n        </div>\n    )\n}\n\nexport default BarLineChart\n","import {Carousel} from 'element-react';\nimport React, {useRef} from 'react'\nimport {HiDownload} from \"react-icons/hi\";\nimport {downloadPng} from \"../../utils/download\";\nimport ProgressChart from \"../../components/ProgressChart\";\nimport SeoBarLineChart from \"../../components/SeoBarLineChart\";\nimport {AmazonsChoice, AmazonsChoiceRate} from \"../../types/seo\";\nimport {BarLine, BarLineChartData} from \"../../types/market\";\n\ninterface RankBoxProps {\n    title: string;\n    rank: number;\n    color?: string\n}\n\nfunction RankBox(props: RankBoxProps) {\n    const {title, rank, color = '#ACACAC'} = props;\n    return (\n        <div className=\"inline-flex flex-col justify-center items-center border-4 border-solid rounded py-4 px-8 mx-4\"\n             style={{color, borderColor: color, width: '300px'}}>\n            {\n                title === 'Amazon\\'s Choice'\n                    ? <h2 className=\"text-3xl pb-2 text-center\">{title}</h2>\n                    : <h2 className=\"text-5xl pb-2 text-center\">{title}</h2>\n            }\n            <p className=\"text-2xl pb-2\">Average ranking</p>\n            <p className=\"text-8xl pb-2\">{rank}</p>\n        </div>\n    )\n}\n\ninterface RankComparisonProps {\n    height?: string;\n    title?: string;\n    onClick?(value: number): void;\n    data: AmazonsChoice | null;\n    rate: AmazonsChoiceRate | null;\n}\n\nfunction formatBarLineData(data: AmazonsChoiceRate | null): BarLineChartData | null {\n    console.log('data', data);\n    if (!data) return null;\n    const axis = data.info.x_axis;\n    const series: BarLine[] = [\n        {\n            type: 'bar',\n            name: 'Amazon\\'s Choice',\n            // @ts-ignore\n            data: Object.keys(data.amazons_choice).map((key: string) => data.amazons_choice[key]),\n            yAxisIndex: 0,\n            stack: 'one',\n        },\n        {\n            type: 'bar',\n            name: 'Not Amazon\\'s Choice',\n            // @ts-ignore\n            data: Object.keys(data.not_amazons_choice).map((key: string) => data.not_amazons_choice[key]),\n            yAxisIndex: 0,\n            stack: 'one',\n        },\n        {\n            type: 'line',\n            name: 'Amazon\\'s Choice Rate',\n            // @ts-ignore\n            data: Object.keys(data.amazons_choice).map((key: string) => Math.round(data.amazons_choice[key] * 100 / (data.amazons_choice[key] + data.not_amazons_choice[key]))),\n            yAxisIndex: 1,\n        }\n    ]\n    return {axis, series}\n}\n\nfunction RankComparison(props: RankComparisonProps) {\n    const shotWrapperRef = useRef<HTMLDivElement | null>(null)\n\n    const {title = 'Title', height = '300px', data = null, rate = null, onClick} = props;\n\n    const onDownload = async () => {\n        if (!shotWrapperRef.current) return;\n        await downloadPng(shotWrapperRef.current, title)\n    }\n\n    return (\n        <div ref={shotWrapperRef} className=\"relative\" style={{height}}>\n            <Carousel className=\"mt-4\" indicatorPosition=\"none\" autoplay={false}>\n                <Carousel.Item>\n                    <h1 className=\"text-2xl\">Amazon Choice Rank Comparison</h1>\n                    <HiDownload className=\"absolute right-0 top-0 text-3xl cursor-pointer z-30r\" onClick={onDownload}/>\n                    <div className=\"flex justify-center mt-4\" style={{height: '250px'}}>\n                        {\n                            data && <RankBox title=\"Amazon's Choice\" rank={data.amazons_choice_avg} color=\"#2e78b4\"/>\n                        }\n                        {\n                            data && <RankBox title=\"Others\" rank={data.unamazons_choice_avg}/>\n                        }\n                    </div>\n                </Carousel.Item>\n                <Carousel.Item>\n                    <SeoBarLineChart\n                        height=\"300px\"\n                        width=\"728px\"\n                        title=\"Amazon's Choice Rate\"\n                        names={['Amount', 'Amazon\\'s Choice Rate']}\n                        data={formatBarLineData(rate)}\n                        yAxisLabel={'Ranking'}\n                    />\n                </Carousel.Item>\n            </Carousel>\n            <div className=\"mt-8\">\n                {\n                    data &&\n                    <ProgressChart\n                      title=\"Top Amazon Choice Ratio\"\n                      colors={[\"#2e78b4\", \"#ACACAC\"]}\n                      data={[{source: 'Amazon Choice', count: data.amazons_choice_rate}, {\n                          source: 'Others',\n                          count: data.unamazons_choice_rate\n                      }]}\n                      onClick={onClick}\n                    />\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default RankComparison\n","import React, {useEffect, useState} from 'react'\nimport dayjs from \"dayjs\";\nimport {Button, Card, Pagination, Select} from \"element-react\";\nimport {FaListAlt} from 'react-icons/fa'\nimport {RiBarChartBoxFill} from 'react-icons/ri'\n\nimport DatePicker from \"../../components/DatePicker\";\nimport Collapse from \"../../components/Collapse\";\nimport RankComparison from \"./RankComparison\";\n\nimport {initDate, initCategoryOptions, initRegionOptions} from \"../../utils/common\";\nimport {AmazonsChoice, AmazonsChoiceRate} from \"../../types/seo\";\nimport {getAmazonsChoice, getAmazonsChoiceRate,} from \"../../apis/seo\";\nimport {CHART_TYPE} from \"../../types/common\";\nimport {ProductsParams, ProductsResponse} from \"../../types/product\";\nimport {formatDate} from \"../../utils/common\";\nimport {getProducts} from \"../../apis/product\";\nimport ProductCards from \"../../components/ProductCards\";\nimport {SearchParams, TableResponse} from \"../../types/market\";\nimport {getTable} from \"../../apis/market\";\nimport TableChart from \"../../components/TableChart\";\nimport ProductsDownloadDialog from \"../../components/ProductsDownloadDialog\";\n\nfunction Index() {\n    const [chartType, setChartType] = useState(CHART_TYPE.CHART);\n    const [visible, setVisible] = useState(false);\n\n    const [category, setCategory] = useState('webcam');\n    const [region, setRegion] = useState('US');\n    const [date, setDate] = useState<ElementReactLibs.dateType[]>(initDate());\n    const [filter, setFilter] = useState<any>({});\n    const [ac, setAc] = useState<number>(1);\n\n    const [page, setPage] = useState(1);\n    const [productsPage, setProductsPage] = useState(1);\n\n    const [amazonsChoice, setAmazonsChoice] = useState<AmazonsChoice | null>(null);\n    const [table, setTable] = useState<TableResponse | null>(null);\n    const [rate, setRate] = useState<AmazonsChoiceRate | null>(null);\n    const [products, setProducts] = useState<ProductsResponse | null>(null);\n\n    const tableColumn: ElementReact.TableColumn[] = [\n        {label: 'Product', prop: 'Product'},\n        {label: 'Brand', prop: 'Brand', sortable: true},\n        {label: 'Rank', prop: 'Rank'},\n        {label: \"Amazon's Choice\", prop: \"Amazon's Choice\"},\n    ];\n\n    const categoryOptions = initCategoryOptions();\n    const regionOptions = initRegionOptions();\n\n    useEffect(() => {\n        const fetchData = async () => {\n            const [start_at, end_at] = formatDate(date);\n            const params: SearchParams = {\n                category,\n                region,\n                start_at,\n                end_at,\n                page,\n                ...filter\n            };\n            const {data} = await getAmazonsChoice(params);\n            const {data: table} = await getTable(params);\n            const {data: rate} = await getAmazonsChoiceRate(params);\n            setAmazonsChoice(data);\n            setTable(table);\n            setRate(rate)\n        };\n        fetchData()\n    }, [category, region, date, filter, page]);\n\n    useEffect(() => {\n        const fetchProductsData = async () => {\n            const [start_at, end_at] = formatDate(date);\n            const params: ProductsParams = {\n                category,\n                region,\n                page: productsPage,\n                start_at,\n                end_at,\n                ac,\n                ...filter,\n            };\n            const {data} = await getProducts(params);\n            setProducts(data)\n        };\n        fetchProductsData()\n    }, [category, region, date, filter, productsPage, ac]);\n\n    const onChartTypeChange = () => {\n        if (chartType === CHART_TYPE.CHART) setChartType(CHART_TYPE.TABLE);\n        if (chartType === CHART_TYPE.TABLE) setChartType(CHART_TYPE.CHART)\n    };\n\n    const handleDownloadProducts = async (asin: string[]) => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            dl: 1,\n            asin: asin.join(','),\n            ac,\n            ...filter\n        };\n        const {request} = await getProducts(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    const handleDownloadTable = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page,\n            dl: 1,\n            ...filter\n        };\n        const {request} = await getTable(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    return (\n        <div>\n            {/* Search Bar */}\n            <div className=\"flex items-center mb-4\">\n                <Select className=\"mr-4\" value={category} placeholder=\"Select\"\n                        onChange={(value: string) => setCategory(value)}>\n                    {\n                        categoryOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <Select className=\"mr-4\" value={region} placeholder=\"Select\"\n                        onChange={(value: string) => setRegion(value)}>\n                    {\n                        regionOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <DatePicker\n                    date={date}\n                    setDate={setDate}\n                    disabledDate={(_date: Date) => dayjs(_date).day() !== 0}\n                />\n                <div className=\"text-2xl cursor-pointer\" onClick={onChartTypeChange}>\n                    {\n                        chartType === CHART_TYPE.CHART && <FaListAlt/>\n                    }\n                    {\n                        chartType === CHART_TYPE.TABLE && <RiBarChartBoxFill/>\n                    }\n                </div>\n            </div>\n\n            <div className=\"flex\">\n                <div className=\"w-2/3 pr-2\">\n                    <Card className=\"mb-4\">\n                        {\n                            chartType === CHART_TYPE.CHART &&\n                            <RankComparison height=\"585px\" data={amazonsChoice} rate={rate} onClick={(value: number) => setAc(value)}/>\n                        }\n                        {\n                            chartType === CHART_TYPE.TABLE && table &&\n                            <>\n                              <TableChart height=\"572px\" columns={tableColumn} data={table.items.content}\n                                          onDownload={handleDownloadTable}/>\n                              <div className=\"flex justify-end\">\n                                <Pagination\n                                  layout=\"prev, pager, next\"\n                                  pageCount={table.info.max_page}\n                                  small={true}\n                                  currentPage={table.items.current_page}\n                                  onCurrentChange={(value: number) => setPage(value)}\n                                />\n                              </div>\n                            </>\n                        }\n                    </Card>\n                </div>\n\n                <div className=\"w-1/3 pl-2\">\n                    <Card>\n                        <Collapse height=\"600px\" type={category} onFilter={setFilter}/>\n                    </Card>\n                </div>\n            </div>\n\n            {/* Product Cards */}\n            <div className=\"mt-16\">\n                <div className=\"flex\">\n                    <p className=\"text-2xl mr-2\">{ac ? 'Amazon’s Choice' : 'Not Amazon’s Choice'}</p>\n                    <Button type=\"primary\" onClick={() => setVisible(true)}>Download</Button>\n                </div>\n                {\n                    products &&\n                    <ProductCards\n                      data={products.prods}\n                      region={region}\n                      page={products.info.current_page}\n                      totalPage={products.info.max_page}\n                      onChange={setProductsPage}\n                    />\n                }\n            </div>\n\n            <ProductsDownloadDialog\n                visible={visible}\n                setVisible={setVisible}\n                params={{\n                    category,\n                    region,\n                    date,\n                    ac,\n                    ...filter\n                }}\n                onDownload={handleDownloadProducts}\n            />\n        </div>\n    )\n}\n\nexport default Index\n","import React, {useEffect, useRef} from 'react'\nimport * as echarts from 'echarts/core'\nimport {LineChart, LineSeriesOption} from \"echarts/charts\";\nimport {\n    TitleComponent,\n    TitleComponentOption,\n    GridComponent,\n    GridComponentOption,\n    TooltipComponent,\n    TooltipComponentOption,\n    LegendComponent,\n    LegendComponentOption\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\nimport {HiDownload} from 'react-icons/hi'\n\nimport {downloadPng} from \"../utils/download\";\nimport {SponsoredAvg} from \"../types/seo\";\n\ninterface BarLineChartProps {\n    width?: string;\n    height?: string;\n    data: SponsoredAvg | null\n}\n\ntype ECOption = echarts.ComposeOption<LineSeriesOption | TitleComponentOption | GridComponentOption | TooltipComponentOption | LegendComponentOption>;\n\necharts.use([LineChart, TitleComponent, GridComponent, TooltipComponent, LegendComponent, CanvasRenderer])\n\nfunction takeLegendData(data: SponsoredAvg) {\n    const target = data.data.reduce((target: Object, obj: Object) => Object.keys(obj).length > Object.keys(target).length ? obj : target, {})\n    return Object.keys(target).filter(it => it !== 'mission').map((key: string) => `Start at ${key}`)\n}\n\nfunction takeSeriesData(data: SponsoredAvg) {\n    const target = data.data.reduce((target: Object, obj: Object) => Object.keys(obj).length > Object.keys(target).length ? obj : target, {})\n    return Object.keys(target).filter(it => it !== 'mission').map((key: string) => ({\n        type: 'line',\n        name: `Start at ${key}`,\n        // @ts-ignore\n        data: data.data.map((obj: Object) => obj[key] ? obj[key] : null)\n    }))\n}\n\nfunction AverageChart(props: BarLineChartProps) {\n    const chartRef = useRef<HTMLDivElement | null>(null);\n    const {width = '100%', height = '400px', data = null} = props;\n    const title = `Average Rank Increase between ${data ? data.info.x_axis[0] : ''} to ${data ? data.info.x_axis[data.info.x_axis.length - 1] : ''} sponsored`\n    const option: ECOption = {\n        title: {\n            text: title,\n            textStyle: {\n                fontSize: 18\n            }\n        },\n        grid: {\n            backgroundColor: 'white',\n            top: 70,\n            right: 50,\n            left: 50\n        },\n        legend: {\n            data: data ? takeLegendData(data) : [],\n            bottom: 0\n        },\n        tooltip: {\n            trigger: 'axis'\n        },\n        xAxis: [\n            {\n                type: 'category',\n                data: data ? data.info.x_axis : []\n            }\n        ],\n        yAxis: [\n            {\n                type: 'value',\n                name: 'Average Rank'\n            },\n        ],\n        // @ts-ignore\n        series: data ? takeSeriesData(data) : []\n    }\n\n    useEffect(() => {\n        if (!chartRef.current) return\n\n        const chart = echarts.init(chartRef.current, 'customed')\n        chart.setOption(option)\n    })\n\n    const onDownload = async () => {\n        if (!chartRef.current) return\n\n        await downloadPng(chartRef.current, title)\n    }\n\n    return (\n        <div className=\"relative\">\n            <HiDownload className=\"absolute right-0 top-0 text-3xl cursor-pointer z-30r\" onClick={onDownload}/>\n\n            <div ref={chartRef} style={{width, height}}/>\n        </div>\n    )\n}\n\nexport default AverageChart\n","import {Carousel} from 'element-react';\nimport React, {useRef} from 'react'\nimport {HiDownload} from \"react-icons/hi\";\nimport {downloadPng} from \"../../utils/download\";\nimport ProgressChart from \"../../components/ProgressChart\";\nimport AverageChart from \"../../components/AverageChart\";\nimport SeoBarLineChart from \"../../components/SeoBarLineChart\";\nimport {Sponsored, SponsoredAvg, SponsoredRate} from \"../../types/seo\";\nimport {BarLine, BarLineChartData} from \"../../types/market\";\n\ninterface RankBoxProps {\n    title: string;\n    rank: number;\n    color?: string\n}\n\nfunction RankBox(props: RankBoxProps) {\n    const {title, rank, color = '#ACACAC'} = props;\n    return (\n        <div className=\"inline-flex flex-col justify-center items-center border-4 border-solid rounded py-4 px-8 mx-4\"\n             style={{color, borderColor: color, width: '300px'}}>\n            <h2 className=\"text-5xl pb-2\">{title}</h2>\n            <p className=\"text-2xl pb-2\">Average ranking</p>\n            <p className=\"text-8xl pb-2\">{rank}</p>\n        </div>\n    )\n}\n\ninterface RankComparisonProps {\n    height?: string;\n    title?: string;\n    data: Sponsored | null;\n    rate: SponsoredRate | null;\n    avg: SponsoredAvg | null;\n\n    onClick?(value: number): void;\n}\n\nfunction formatBarLineData(data: SponsoredRate | null): BarLineChartData | null {\n    if (!data) return null;\n    const axis = data.info.x_axis;\n    const series: BarLine[] = [\n        {\n            type: 'bar',\n            name: 'Sponsored',\n            // @ts-ignore\n            data: Object.keys(data.sponsored).map((key: string) => data.sponsored[key]),\n            yAxisIndex: 0,\n            stack: 'one',\n        },\n        {\n            type: 'bar',\n            name: 'Not Sponsored',\n            // @ts-ignore\n            data: Object.keys(data.no_sponsored).map((key: string) => data.no_sponsored[key]),\n            yAxisIndex: 0,\n            stack: 'one',\n        },\n        {\n            type: 'line',\n            name: 'Sponsored Rate',\n            // @ts-ignore\n            data: Object.keys(data.sponsored).map((key: string) => Math.round(data.sponsored[key] * 100 / (data.sponsored[key] + data.no_sponsored[key]))),\n            yAxisIndex: 1,\n        }\n    ]\n    return {axis, series}\n}\n\nfunction formatAverageData(data: SponsoredAvg | null) {\n    if (!data) return null;\n    return data\n}\n\nfunction RankComparison(props: RankComparisonProps) {\n    const shotWrapperRef = useRef<HTMLDivElement | null>(null)\n\n    const {title = 'Title', height = '300px', data = null, rate = null, avg = null, onClick} = props;\n\n    const onDownload = async () => {\n        if (!shotWrapperRef.current) return;\n        await downloadPng(shotWrapperRef.current, title)\n    }\n\n    return (\n        <div ref={shotWrapperRef} className=\"relative\" style={{height}}>\n            <Carousel className=\"mt-4\" indicatorPosition=\"none\" autoplay={false}>\n                <Carousel.Item>\n                    <h1 className=\"text-2xl\">Sponsored Average Rank Comparison</h1>\n                    <HiDownload className=\"absolute right-0 top-0 text-3xl cursor-pointer z-30r\" onClick={onDownload}/>\n                    <div className=\"flex justify-center mt-4\" style={{height: '250px'}}>\n                        {\n                            data && <RankBox title=\"Sponsored\" rank={data.sponsored_avg} color=\"#FB8C3B\"/>\n                        }\n                        {\n                            data && <RankBox title=\"Others\" rank={data.unsponsored_avg}/>\n                        }\n                    </div>\n                </Carousel.Item>\n                <Carousel.Item>\n                    <SeoBarLineChart\n                        height=\"300px\"\n                        width=\"728px\"\n                        title=\"Sponsored Rate\"\n                        names={['Amount', 'Sponsored Rate']}\n                        data={formatBarLineData(rate)}\n                        yAxisLabel={'Ranking'}\n                    />\n                </Carousel.Item>\n                <Carousel.Item>\n                    <AverageChart\n                        height=\"300px\"\n                        width=\"728px\"\n                        data={formatAverageData(avg)}\n                    />\n                </Carousel.Item>\n            </Carousel>\n            <div className=\"mt-8\">\n                {\n                    data &&\n                    <ProgressChart\n                      title=\"Top Sponsored Ratio\"\n                      colors={[\"#FB8C3B\", \"#ACACAC\"]}\n                      data={[{source: 'Sponsored', count: data.sponsored_rate}, {\n                          source: 'Others',\n                          count: data.unsponsored_rate\n                      }]}\n                      onClick={onClick}\n                    />\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default RankComparison\n","import React, {useEffect, useState} from 'react'\nimport dayjs from \"dayjs\";\nimport {Button, Card, Pagination, Select, Tooltip} from \"element-react\";\nimport {AiFillInfoCircle} from 'react-icons/ai'\nimport {FaListAlt} from 'react-icons/fa'\nimport {RiBarChartBoxFill} from 'react-icons/ri'\n\nimport DatePicker from '../../components/DatePicker';\nimport Collapse from \"../../components/Collapse\";\nimport {initDate, initCategoryOptions, initRegionOptions} from \"../../utils/common\";\nimport RankComparison from \"./RankComparison\";\nimport {getSponsored, getSponsoredAvg, getSponsoredRate, getTableSponsored} from \"../../apis/seo\";\nimport {Sponsored, SponsoredAvg, SponsoredRate, TableSponsoredResponse} from \"../../types/seo\";\nimport {CHART_TYPE} from \"../../types/common\";\nimport {ProductsParams, ProductsResponse} from \"../../types/product\";\nimport {formatDate} from \"../../utils/common\";\nimport {getProducts} from \"../../apis/product\";\nimport ProductCards from \"../../components/ProductCards\";\nimport {SearchParams} from \"../../types/market\";\nimport TableChart from \"../../components/TableChart\";\nimport ProductsDownloadDialog from \"../../components/ProductsDownloadDialog\";\n\nfunction Index() {\n    const [chartType, setChartType] = useState(CHART_TYPE.CHART);\n    const [visible, setVisible] = useState(false);\n\n    const [category, setCategory] = useState('webcam');\n    const [region, setRegion] = useState('US');\n    const [date, setDate] = useState<ElementReactLibs.dateType[]>(initDate());\n    const [filter, setFilter] = useState<any>({});\n    const [sp, setSp] = useState<number>(1);\n\n    const [page, setPage] = useState(1);\n    const [productsPage, setProductsPage] = useState(1);\n\n    const [sponsored, setSponsored] = useState<Sponsored | null>(null);\n    const [table, setTable] = useState<TableSponsoredResponse | null>(null);\n    const [rate, setRate] = useState<SponsoredRate | null>(null);\n    const [avg, setAvg] = useState<SponsoredAvg | null>(null);\n    const [products, setProducts] = useState<ProductsResponse | null>(null);\n\n    const tableColumn: ElementReact.TableColumn[] = [\n        {label: 'Product', prop: 'product'},\n        {label: 'Brand', prop: 'brand', sortable: true},\n        {label: 'Average Rank', prop: 'avg_rank'},\n        {label: \"Sponsored period\", prop: \"sponsored\"},\n    ];\n\n    const categoryOptions = initCategoryOptions();\n    const regionOptions = initRegionOptions();\n\n    useEffect(() => {\n        const fetchData = async () => {\n            const [start_at, end_at] = formatDate(date);\n            const params: SearchParams = {\n                category,\n                region,\n                start_at,\n                end_at,\n                page,\n                ...filter\n            };\n            const {data} = await getSponsored(params);\n            const {data: table} = await getTableSponsored(params);\n            const {data: rate} = await getSponsoredRate(params);\n            const {data: avg} = await getSponsoredAvg(params);\n            setSponsored(data);\n            setTable(table);\n            setRate(rate);\n            setAvg(avg)\n        };\n        fetchData()\n    }, [category, region, date, filter, page]);\n\n    useEffect(() => {\n        const fetchData = async () => {\n            const [start_at, end_at] = formatDate(date);\n            const params: ProductsParams = {\n                category,\n                region,\n                page: productsPage,\n                start_at,\n                end_at,\n                sp,\n                ...filter,\n            };\n            const {data} = await getProducts(params);\n            setProducts(data)\n        };\n        fetchData()\n    }, [category, region, date, filter, productsPage, sp]);\n\n    const onChartTypeChange = () => {\n        if (chartType === CHART_TYPE.CHART) setChartType(CHART_TYPE.TABLE);\n        if (chartType === CHART_TYPE.TABLE) setChartType(CHART_TYPE.CHART)\n    };\n\n    const handleDownloadProducts = async (asin: string[]) => {\n        const [start_at, end_at] = formatDate(date);\n        const params: ProductsParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            dl: 1,\n            sp,\n            asin: asin.join(','),\n            ...filter\n        };\n        const {request} = await getProducts(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    const handleDownloadTable = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchParams = {\n            category,\n            region,\n            start_at,\n            end_at,\n            page,\n            sp,\n            dl: 1,\n            ...filter\n        };\n        const {request} = await getTableSponsored(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    return (\n        <div>\n            {/* Search Bar */}\n            <div className=\"flex items-center mb-4\">\n                <Select className=\"mr-4\" value={category} placeholder=\"Select\"\n                        onChange={(value: string) => setCategory(value)}>\n                    {\n                        categoryOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <Select className=\"mr-4\" value={region} placeholder=\"Select\"\n                        onChange={(value: string) => setRegion(value)}>\n                    {\n                        regionOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <DatePicker\n                    date={date}\n                    setDate={setDate}\n                    disabledDate={(_date: Date) => dayjs(_date).day() !== 0}\n                />\n                <Tooltip\n                    className=\"mr-4\"\n                    effect=\"dark\"\n                    content={\n                        <div style={{maxWidth: '200px'}}>\n                            The Stock level of each product is estimated by the maximum buying number limit in a single order. Identification between high stock and low stock may have certain deviation.\n                        </div>\n                    }\n                    placement=\"bottom\"\n                >\n                    <AiFillInfoCircle className=\"text-2xl\"/>\n                </Tooltip>\n                <div className=\"text-2xl cursor-pointer\" onClick={onChartTypeChange}>\n                    {\n                        chartType === CHART_TYPE.CHART && <FaListAlt/>\n                    }\n                    {\n                        chartType === CHART_TYPE.TABLE && <RiBarChartBoxFill/>\n                    }\n                </div>\n            </div>\n\n            <div className=\"flex\">\n                <div className=\"w-2/3 pr-2\">\n                    <Card className=\"mb-4\">\n                        {\n                            chartType === CHART_TYPE.CHART &&\n                            <RankComparison height=\"585px\" data={sponsored} rate={rate} avg={avg}\n                                            onClick={(value: number) => setSp(value)}/>\n                        }\n                        {\n                            chartType === CHART_TYPE.TABLE && table &&\n                            <>\n                              <TableChart height=\"572px\" columns={tableColumn} data={table.data.content}\n                                          onDownload={handleDownloadTable}/>\n                              <div className=\"flex justify-end\">\n                                <Pagination\n                                  layout=\"prev, pager, next\"\n                                  pageCount={table.info.max_page}\n                                  small={true}\n                                  currentPage={table.data.current_page}\n                                  onCurrentChange={(value: number) => setPage(value)}\n                                />\n                              </div>\n                            </>\n                        }\n                    </Card>\n                </div>\n\n                <div className=\"w-1/3 pl-2\">\n                    <Card>\n                        <Collapse height=\"600px\" type={category} onFilter={setFilter}/>\n                    </Card>\n                </div>\n            </div>\n\n            {/* Product Cards */}\n            <div className=\"mt-16\">\n                <div className=\"flex\">\n                    <p className=\"text-2xl mr-2\">{sp ? 'Sponsored Product' : 'Not Sponsored Product'}</p>\n                    <Button type=\"primary\" onClick={() => setVisible(true)}>Download</Button>\n                </div>\n                {\n                    products &&\n                    <ProductCards\n                      data={products.prods}\n                      region={region}\n                      page={products.info.current_page}\n                      totalPage={products.info.max_page}\n                      onChange={setProductsPage}\n                    />\n                }\n            </div>\n\n            <ProductsDownloadDialog\n                visible={visible}\n                setVisible={setVisible}\n                params={{\n                    category,\n                    region,\n                    date,\n                    sp,\n                    ...filter\n                }}\n                onDownload={handleDownloadProducts}\n            />\n        </div>\n    )\n}\n\nexport default Index\n","import React, {useEffect, useRef} from 'react'\nimport * as echarts from 'echarts/core'\nimport 'echarts-wordcloud'\nimport {LineChart, BarChart} from \"echarts/charts\";\nimport {\n    TitleComponent,\n    GridComponent,\n    TooltipComponent,\n    LegendComponent,\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\nimport {HiDownload} from 'react-icons/hi'\n\nimport {downloadPng} from \"../utils/download\";\n\ninterface WordCloudChartProps {\n    width?: string;\n    height?: string;\n    title?: string;\n    titleFontSize?: number;\n    data: {name: string; value: string; color: string;}[];\n    onClick?(value: string): void;\n}\n\necharts.use([LineChart, BarChart, TitleComponent, GridComponent, TooltipComponent, LegendComponent, CanvasRenderer]);\n\nfunction WordCloudChart(props: WordCloudChartProps) {\n    const chartRef = useRef<HTMLDivElement | null>(null);\n    const {width = '100%', height = '400px', title = 'Title', titleFontSize = 24, data = [], onClick} = props;\n    const option = {\n        title: {\n            text: title,\n            textStyle: {\n                fontSize: titleFontSize\n            }\n        },\n\n        grid: {\n            backgroundColor: 'white',\n            top: 0,\n            right: 0,\n            bottom: 0,\n            left: 0\n        },\n        tooltip: {},\n        series: [\n            {\n                type: 'wordCloud',\n                rotationRange: [0, 0],\n                data: data.map((it: {name: string; value: string; color: string;}) => ({\n                    name: it.name,\n                    value: it.value,\n                    textStyle: {\n                        color: it.color,\n                    }\n                }))\n            }\n        ]\n    };\n\n    useEffect(() => {\n        if (!chartRef.current) return;\n\n        const chart = echarts.init(chartRef.current, 'customed');\n        chart.setOption(option)\n\n        let lock = false;\n        chart.on('click', (param) => {\n            if (onClick && param) {\n                if (lock) return;\n                lock = true;\n                onClick(param.name);\n                setTimeout(() => lock = false, 1000)\n            }\n        })\n    }, [data]);\n\n    const onDownload = async () => {\n        if (!chartRef.current) return;\n        await downloadPng(chartRef.current, title)\n    };\n\n    return (\n        <div className=\"relative\">\n            <HiDownload className=\"absolute right-0 top-0 text-3xl cursor-pointer z-30r\" onClick={onDownload}/>\n            <div ref={chartRef} style={{width, height}}/>\n        </div>\n    )\n}\n\nexport default WordCloudChart\n","import React, {useEffect, useMemo, useRef, useState} from 'react'\nimport dayjs from 'dayjs'\nimport {Card, DatePicker, DateRangePicker, Pagination, Select} from \"element-react\";\nimport {FaListAlt} from 'react-icons/fa'\nimport {RiBarChartBoxFill} from 'react-icons/ri'\n\nimport {initDate, initCategoryOptions, initRegionOptions} from \"../utils/common\";\nimport HorizontalBarChart from \"../components/HorizontalBarChart\";\nimport WordCloudChart from '../components/WordCloudChart';\nimport {CHART_TYPE} from \"../types/common\";\nimport {formatDate} from \"../utils/common\";\nimport {SearchParams} from \"../types/market\";\nimport {getKeywordWordCloud, getSearchVolumeBarChart, getTableSearchCloud} from \"../apis/seo\";\nimport {SearchSearchCloudParams, SearchVolumeChartResponse, TableSearchCloudResponse} from \"../types/seo\";\nimport TableChart from \"../components/TableChart\";\nimport {useUpdateEffect} from \"../utils/hook\";\nimport {BsCalendarDate} from \"react-icons/bs\";\n\nfunction formatData(data: SearchVolumeChartResponse): [string[], { data: string, value: number }[]] {\n    const seriesData = data.data.map((it: string, index: number) => ({\n        data: it,\n        value: parseInt(it, 10),\n        itemStyle: {\n            color: data.color[index]\n        }\n    }));\n    return [data.x_axis, seriesData]\n}\n\nfunction KeywordAnalysis() {\n    const refDatePicker = useRef();\n    const [chartType, setChartType] = useState(CHART_TYPE.CHART);\n\n    const [category, setCategory] = useState('webcam');\n    const [region, setRegion] = useState('US');\n    const [date, setDate] = useState<ElementReactLibs.dateType>(initDate()[1]);\n\n    const [page, setPage] = useState(1);\n\n    const [words, setWords] = useState<{ name: string, value: string, color: string; }[]>([]);\n    const [table, setTable] = useState<TableSearchCloudResponse | null>(null);\n    const [volume, setVolume] = useState<SearchVolumeChartResponse | null>(null);\n    const [word, setWord] = useState('');\n\n    const categoryOptions = initCategoryOptions();\n    const regionOptions = initRegionOptions();\n\n    const tableColumn: ElementReact.TableColumn[] = [\n        {label: \"Keyword\", prop: \"Phrase\"},\n        {label: 'Search Volume', prop: 'Search Volume'},\n        {\n            label: 'Search Volume Trend', prop: 'Search Volume Trend', width: 190,\n            render(data: any) {\n                const trend: string = data['Search Volume Trend'];\n                const isNegative = trend.includes('-');\n                return (\n                    <span style={{color: isNegative ? 'red' : 'green'}}>\n                        {trend}\n                    </span>\n                )\n            }\n        },\n        {label: 'Competing Products', prop: 'Competing Products'},\n    ];\n\n    const fetchChart = async () => {\n        const [start_at, end_at] = formatDate([date, date]);\n        const params: SearchParams = {category, region, start_at, end_at};\n        const {data: words} = await getKeywordWordCloud(params);\n        setWords(words.data);\n    };\n\n    const fetchTable = async () => {\n        const [start_at] = formatDate([date, date]);\n        const params: SearchSearchCloudParams = {\n            category,\n            start_at,\n            page,\n            dl: 0\n        };\n        const {data} = await getTableSearchCloud(params);\n        setTable(data)\n    };\n\n    const fetchVolume = async () => {\n        const [start_at, end_at] = formatDate([date, date]);\n        const params: SearchParams = {category, region, start_at, end_at};\n        if (word) params.word = word;\n        const {data: volume} = await getSearchVolumeBarChart(params);\n        setVolume(volume)\n    };\n\n    useEffect(() => {\n        setPage(1);\n        setWord('');\n\n        if (chartType === CHART_TYPE.CHART) fetchChart();\n        if (chartType === CHART_TYPE.TABLE && page === 1) fetchTable();\n        if (!word) fetchVolume();\n    }, [region, category, date]);\n\n    useUpdateEffect(() => {\n        if (chartType === CHART_TYPE.CHART) fetchChart();\n        if (chartType === CHART_TYPE.TABLE) fetchTable();\n    }, [chartType, page]);\n\n    useUpdateEffect(() => {\n        fetchVolume()\n    }, [word]);\n\n    const onChartTypeChange = () => {\n        if (chartType === CHART_TYPE.CHART) setChartType(CHART_TYPE.TABLE);\n        if (chartType === CHART_TYPE.TABLE) setChartType(CHART_TYPE.CHART)\n    };\n\n    const handleDownloadTable = async () => {\n        const [start_at] = formatDate([date, date]);\n        const params: SearchSearchCloudParams = {\n            category,\n            start_at,\n            dl: 1\n        };\n        const {request} = await getTableSearchCloud(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    const handleCalendarClick = () => {\n        // @ts-ignore\n        refDatePicker.current.refs.inputRoot.focus();\n    };\n\n    return (\n        <div>\n            {/* Search Bar */}\n            <div className=\"flex items-center mb-4\">\n                <Select className=\"mr-4\" value={category} placeholder=\"Select\"\n                        onChange={(value: string) => setCategory(value)}>\n                    {\n                        categoryOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <Select className=\"mr-4\" value={region} placeholder=\"Select\"\n                        onChange={(value: string) => setRegion(value)}>\n                    {\n                        regionOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n\n                <div className=\"relative mr-4\">\n                    <DatePicker\n                        // @ts-ignore\n                        ref={refDatePicker}\n                        isShowTrigger={false}\n                        isReadOnly={true}\n                        value={date}\n                        disabledDate={(_date: Date) => dayjs(_date).day() !== 0 || dayjs(_date).isBefore('2021-11-21', 'day')}\n                        onChange={setDate}\n                    />\n                    <BsCalendarDate className=\"absolute right-2 top-1/2 transform -translate-y-1/2 text-primary cursor-pointer\" onClick={handleCalendarClick}/>\n                </div>\n                <div className=\"text-2xl cursor-pointer mr-4\" onClick={onChartTypeChange}>\n                    {\n                        chartType === CHART_TYPE.CHART && <FaListAlt/>\n                    }\n                    {\n                        chartType === CHART_TYPE.TABLE && <RiBarChartBoxFill/>\n                    }\n                </div>\n            </div>\n\n            <Card className=\"mb-4\" style={{minHeight: '642px'}}>\n                {\n                    chartType === CHART_TYPE.CHART &&\n                    <WordCloudChart\n                        title=\"Keyword Cloud\"\n                        height=\"600px\"\n                        data={words}\n                        onClick={(value: string) => setWord(value)}\n                    />\n                }\n                {\n                    chartType === CHART_TYPE.TABLE && table &&\n                    <>\n                      <TableChart height=\"572px\" columns={tableColumn} data={table.data.content}\n                                  onDownload={handleDownloadTable}/>\n                      <div className=\"flex justify-end\">\n                          <Pagination\n                              layout=\"prev, pager, next\"\n                              pageCount={table.info.max_page}\n                              small={true}\n                              currentPage={table.info.current_page}\n                              onCurrentChange={(value: number) => setPage(value)}\n                          />\n                      </div>\n                    </>\n                }\n            </Card>\n\n            <Card style={{minHeight: '642px'}}>\n                {\n                    volume &&\n                    <HorizontalBarChart\n                      title=\"Search Volume\"\n                      height=\"600px\"\n                      data={formatData(volume)}\n                      dataItemName=\"Volume\"\n                    />\n                }\n            </Card>\n        </div>\n    )\n}\n\nexport default KeywordAnalysis\n","import React from 'react'\nimport {Route, Switch} from \"react-router\";\n\nimport Breadcrumb from '../components/Breadcrumb'\nimport AsideNav from \"../components/AsideNav\";\nimport AmazonTop100DashBoard from './AmazonTop100DashBoard'\nimport PriceDistribution from './PriceDistribution'\nimport Inventory from './Inventory'\nimport NewReviews from \"./NewReviews\";\nimport ProductsRanking from \"./ProductsRanking\";\nimport BrandRanking from \"./BrandRanking\";\nimport AmazonsChoice from \"./AmazonsChoice/index\";\nimport Sponsored from \"./Sponsored/index\";\nimport KeywordAnalysis from \"./KeywordAnalysis\";\nimport Path from \"../router/Path\";\n\nfunction AmazonTop100() {\n    return (\n        <div className=\"bg-background relative\">\n            <AsideNav/>\n            <div className=\"main-container p-4\">\n                <Breadcrumb/>\n                <Switch>\n                    <Route path={Path.AmazonTop100PriceDistribution()}>\n                        <PriceDistribution/>\n                    </Route>\n                    <Route path={Path.AmazonTop100Inventory()}>\n                        <Inventory/>\n                    </Route>\n                    <Route path={Path.AmazonTop100NewReviews()}>\n                        <NewReviews/>\n                    </Route>\n                    <Route path={Path.AmazonTop100BrandRanking()}>\n                        <BrandRanking/>\n                    </Route>\n                    <Route path={Path.AmazonTop100ProductsRanking()}>\n                        <ProductsRanking/>\n                    </Route>\n                    <Route path={Path.AmazonTop100AmazonsChoice()}>\n                        <AmazonsChoice/>\n                    </Route>\n                    <Route path={Path.AmazonTop100Sponsored()}>\n                        <Sponsored/>\n                    </Route>\n                    <Route path={Path.AmazonTop100KeywordAnalysis()}>\n                        <KeywordAnalysis/>\n                    </Route>\n                    <Route path={Path.AmazonTop100DashBoard()}>\n                        <AmazonTop100DashBoard/>\n                    </Route>\n                </Switch>\n            </div>\n        </div>\n    )\n}\n\nexport default AmazonTop100\n","import React, {useEffect, useRef, useState} from 'react'\nimport * as echarts from 'echarts/core'\nimport {LineChart, BarChart, LineSeriesOption, BarSeriesOption} from \"echarts/charts\";\nimport {\n    TitleComponent,\n    TitleComponentOption,\n    GridComponent,\n    GridComponentOption,\n    TooltipComponent,\n    TooltipComponentOption,\n    LegendComponent,\n    LegendComponentOption,\n} from \"echarts/components\";\nimport {CanvasRenderer} from \"echarts/renderers\";\nimport {HiDownload} from 'react-icons/hi'\nimport {downloadPng} from \"../../utils/download\";\nimport {BarLine, BarLineChartData} from \"../../types/market\";\nimport {takeIntervalAxisSetting} from \"../../utils/chart\";\nimport {Button} from \"element-react\";\nimport {Adapter} from \"../../types/common\";\n\ninterface BarLineChartProps {\n    width?: string;\n    height?: string;\n    data: BarLineChartData | null;\n}\n\ntype ECOption = echarts.ComposeOption<BarSeriesOption | LineSeriesOption | TitleComponentOption | GridComponentOption | TooltipComponentOption | LegendComponentOption>;\n\necharts.use([LineChart, BarChart, TitleComponent, GridComponent, TooltipComponent, LegendComponent, CanvasRenderer])\n\nconst adapter: Adapter<string> = {\n    weight: 'Weight',\n    value: 'Value',\n    default: ''\n}\n\nfunction BarLineChart(props: BarLineChartProps) {\n    const {width = '100%', height = '400px', data = null} = props;\n    const chartRef = useRef<HTMLDivElement | null>(null);\n\n    const [type, setType] = useState('value');\n\n    function getLegend(name: string) {\n        if (!data) return name;\n\n        const target = data.series.find((it: BarLine) => it.name === name)\n        if (!target) return name;\n\n        const total = target.data.reduce((result, num) => result + num, 0).toFixed(2);\n        return `${name}, total: ${total}`\n    }\n\n    const title = `${type === 'value' ? 'Value' : 'Weight'} and Bill of Lading`;\n    const leftAxisSetting = takeIntervalAxisSetting(data ? data.series.filter((it: BarLine) => it.yAxisIndex === 0 && it.name === adapter[type]).reduce((arr: number[], list: BarLine) => [...arr, ...list.data], []) : [])\n    const rightAxisSetting = takeIntervalAxisSetting(data ? data.series.filter((it: BarLine) => it.yAxisIndex === 1).reduce((arr: number[], list: BarLine) => [...arr, ...list.data], []) : [])\n\n    const option: ECOption = {\n        title: {\n            text: title,\n            textStyle: {\n                fontSize: 20\n            }\n        },\n        grid: {\n            backgroundColor: 'white',\n            top: 90,\n            right: 50,\n            left: 70,\n            bottom: 80\n        },\n        legend: {\n            bottom: 0,\n            formatter(name) {\n                return getLegend(name)\n            }\n        },\n        tooltip: {\n            trigger: 'axis'\n        },\n        xAxis: [\n            {\n                type: 'category',\n                data: data ? data.axis : [],\n                axisLabel: {\n                    interval: 0,\n                    rotate: 15,\n                    formatter(name: any) {\n                        const MAX_LENGTH = 15\n                        if (name.length <= MAX_LENGTH) return name\n                        return name.slice(0, MAX_LENGTH - 1) + '...'\n                    }\n                },\n            }\n        ],\n        yAxis: [\n            {\n                type: 'value',\n                name: type === 'value' ? 'Value\\n(USD)' : 'Weight\\n(Kg)',\n                min: leftAxisSetting.min,\n                max: leftAxisSetting.max,\n                interval: leftAxisSetting.interval\n            },\n            {\n                type: 'value',\n                name: 'BOL',\n                min: rightAxisSetting.min,\n                max: rightAxisSetting.max,\n                interval: rightAxisSetting.interval,\n            }\n        ],\n        series: data ? data.series.filter((it: BarLine) => it.yAxisIndex !== 0 || it.name === adapter[type]) : []\n    }\n\n    useEffect(() => {\n        if (!chartRef.current) return\n\n        const chart = echarts.init(chartRef.current, 'customed')\n        chart.setOption(option)\n    })\n\n    const onDownload = async () => {\n        if (!chartRef.current) return\n\n        await downloadPng(chartRef.current, title)\n    }\n\n    return (\n        <div className=\"relative\">\n            <div className=\"flex absolute right-4 top-0 z-30\">\n                <Button type={type === 'value' ? \"primary\" : undefined} size=\"small\"\n                        onClick={() => setType('value')}>Value</Button>\n                <Button type={type === 'weight' ? \"primary\" : undefined} size=\"small\"\n                        onClick={() => setType('weight')}>Weight</Button>\n                <HiDownload className=\"text-3xl cursor-pointer ml-2\" onClick={onDownload}/>\n            </div>\n            <div ref={chartRef} style={{width, height}}/>\n        </div>\n    )\n}\n\nexport default BarLineChart\n","import request from './https'\nimport {AxiosPromise} from 'axios'\nimport {FilterResponse, PieResponse, SearchCustomParams, TableResponse} from \"../types/custom\";\nimport {BarLineChartData} from \"../types/market\";\n\nexport function getCustomFilters() {\n    return request({\n        url:'/customs/importer/filters',\n        method: 'GET',\n    }) as AxiosPromise<FilterResponse>\n}\n\nexport function getCustomValuePie(data: SearchCustomParams) {\n    const params: any = {}\n    if (data.exporter) params.exporter = data.exporter;\n    if (data.hs_code) params.hs_code = data.hs_code;\n    if (data.start_at) params.start_at = data.start_at;\n    if (data.end_at) params.end_at = data.end_at;\n    return request({\n        url:'/customs/importer/value_pie',\n        method: 'GET',\n        params\n    }) as AxiosPromise<PieResponse>\n}\n\nexport function getCustomBillPie(data: SearchCustomParams) {\n    const params: any = {}\n    if (data.exporter) params.exporter = data.exporter;\n    if (data.hs_code) params.hs_code = data.hs_code;\n    if (data.start_at) params.start_at = data.start_at;\n    if (data.end_at) params.end_at = data.end_at;\n    return request({\n        url:'/customs/importer/bill_pie',\n        method: 'GET',\n        params\n    }) as AxiosPromise<PieResponse>\n}\n\nexport function getCustomValueBillBarLine(data: SearchCustomParams) {\n    const params: any = {}\n    if (data.exporter) params.exporter = data.exporter;\n    if (data.hs_code) params.hs_code = data.hs_code;\n    if (data.start_at) params.start_at = data.start_at;\n    if (data.end_at) params.end_at = data.end_at;\n    return request({\n        url:'/customs/importer/value_bill_bar_line',\n        method: 'GET',\n        params\n    }) as AxiosPromise<BarLineChartData>\n}\n\nexport function getCustomTable(data: SearchCustomParams) {\n    const params: any = {}\n    if (data.exporter) params.exporter = data.exporter;\n    if (data.hs_code) params.hs_code = data.hs_code;\n    if (data.start_at) params.start_at = data.start_at;\n    if (data.end_at) params.end_at = data.end_at;\n    if (data.page) params.page = data.page;\n    return request({\n        url:'/customs/importer/value_bill_table',\n        method: 'GET',\n        params\n    }) as AxiosPromise<TableResponse>\n}\n\nexport function getCustomTableDownload(data: SearchCustomParams) {\n    const params: any = {}\n    if (data.exporter) params.exporter = data.exporter;\n    if (data.hs_code) params.hs_code = data.hs_code;\n    if (data.start_at) params.start_at = data.start_at;\n    if (data.end_at) params.end_at = data.end_at;\n    if (data.page) params.page = data.page;\n    return request({\n        url:'/customs/importer/value_bill_table',\n        method: 'GET',\n        params: { ...params, is_excel_download: true }\n    }) as AxiosPromise<string>\n}\n\n","import React, {useEffect, useState} from 'react'\nimport dayjs from 'dayjs'\nimport {Card, Pagination, Select, Table} from \"element-react\";\nimport {HiDownload} from \"react-icons/hi\";\nimport BarLineChart from './BarLineChart';\nimport DoughnutChart from \"../../components/DoughnutChart\";\nimport DatePicker from \"../../components/DatePicker\";\nimport {\n    getCustomBillPie,\n    getCustomFilters,\n    getCustomTable, getCustomTableDownload,\n    getCustomValueBillBarLine,\n    getCustomValuePie\n} from \"../../apis/custom\";\nimport {SearchCustomParams} from \"../../types/custom\";\nimport {formatDate} from \"../../utils/common\";\nimport {TableResponse} from \"../../types/custom\";\nimport {PieChartItem} from \"../../types/chart\";\nimport {BarLine, BarLineChartData} from \"../../types/market\";\nimport {Adapter} from \"../../types/common\";\n\nconst formatData = (data: BarLineChartData | null): BarLineChartData | null => {\n    if (!data) return null;\n    const adapter: Adapter<number> = {\n        'Weight': 0,\n        'Bill of Lading': 1,\n        'Value': 0,\n        default: 0\n    };\n    const series: BarLine[] = data.series.map((it: BarLine) => ({\n        ...it,\n        yAxisIndex: adapter[it.name] || adapter.default\n    }));\n    return {...data, series}\n};\n\nfunction Index() {\n    const [exporter, setExporter] = useState('');\n    const [code, setCode] = useState('');\n\n    // Date range initial value is between today and  1 year ago.\n    const [date, setDate] = useState<ElementReactLibs.dateType[]>([dayjs().subtract(1, 'year').toDate(), dayjs().toDate()]);\n\n    const [exporterOptions, setExporterOptions] = useState<ElementReact.SelectOptionProps[]>([]);\n    const [codeOptions, setCodeOptions] = useState<ElementReact.SelectOptionProps[]>([]);\n\n    const [page, setPage] = useState(1);\n\n    const [valuePie, setValuePie] = useState<PieChartItem[]>([]);\n    const [billPie, setBillPie] = useState<PieChartItem[]>([]);\n    const [barLine, setBarLine] = useState<BarLineChartData | null>(null);\n    const [table, setTable] = useState<TableResponse | null>(null);\n\n    const columns: ElementReact.TableColumn[] = [\n        {label: 'Exporter', prop: 'Exporter'},\n        {label: 'HS Code', prop: 'HS Code'},\n        {label: 'Importer', prop: 'Importer'},\n        {label: 'Destination Country', prop: 'Destination Country', width: 180},\n        {label: 'Value', prop: 'Value'},\n        {label: 'Quantity', prop: 'Quantity'},\n        {label: 'Quantity Unit', prop: 'Quantity Unit'},\n        {label: 'Unit Price', prop: 'Unit Price'},\n    ];\n\n    useEffect(() => {\n        const fetchData = async () => {\n            const {data} = await getCustomFilters();\n            setExporterOptions(data.exporters.map((value: string): ElementReact.SelectOptionProps => ({\n                label: value,\n                value\n            })));\n            setExporter(data.exporters.length ? data.exporters[0] : '');\n\n            setCodeOptions([\n                {\n                  label: 'All',\n                  value: ''\n                },\n                ...data.hs_codes.map((value: string): ElementReact.SelectOptionProps => ({\n                  label: value,\n                  value\n                }))\n            ])\n        };\n        fetchData()\n    }, []);\n\n    useEffect(() => {\n        const fetchData = async () => {\n            if (!exporter) return;\n            const [start_at, end_at] = formatDate(date);\n            const params: SearchCustomParams = {\n                exporter,\n                hs_code: code,\n                start_at,\n                end_at,\n                page,\n            };\n            setTable((await getCustomTable(params)).data)\n        };\n        fetchData()\n    }, [exporter, code, date, page]);\n\n    useEffect(() => {\n        const fetchData = async () => {\n            if (!exporter) return;\n            const [start_at, end_at] = formatDate(date);\n            const params: SearchCustomParams = {\n                exporter,\n                hs_code: code,\n                start_at,\n                end_at,\n            };\n            const {data: value} = await getCustomValuePie(params);\n            const {data: bill} = await getCustomBillPie(params);\n            setBarLine((await getCustomValueBillBarLine(params)).data);\n            setValuePie(value.series.data);\n            setBillPie(bill.series.data)\n        };\n        fetchData()\n    }, [exporter, code, date]);\n\n    const handleDownloadTable = async () => {\n        const [start_at, end_at] = formatDate(date);\n        const params: SearchCustomParams = {\n            exporter,\n            hs_code: code,\n            start_at,\n            end_at\n        };\n        const {request} = await getCustomTableDownload(params);\n        window.open(request.responseURL, '__blank')\n    };\n\n    return (\n        <div>\n            {/* Search Bar */}\n            <div className=\"flex items-end mb-4\">\n                <Select className=\"mr-4\" value={exporter} placeholder=\"Select\" onChange={(value: string) => setExporter(value)}>\n                    {\n                        exporterOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <Select className=\"mr-4\" value={code} placeholder=\"Select\" onChange={(value: string) => setCode(value)}>\n                    {\n                        codeOptions.map(it => {\n                            return <Select.Option key={it.value} label={it.label} value={it.value}/>\n                        })\n                    }\n                </Select>\n                <DatePicker\n                    date={date}\n                    setDate={setDate}\n                    disabledDate={() => false}\n                />\n            </div>\n\n            {/* Dashboard Charts */}\n            <Card className=\"mb-12\">\n                <div className=\"flex\">\n                    <div className=\"w-2/3\">\n                        <BarLineChart\n                            height=\"600px\"\n                            data={formatData(barLine)}\n                        />\n                    </div>\n                    <div className=\"w-1/3\">\n                        <DoughnutChart title=\"Top Importer by Import Value\" titleFontSize={20} height=\"300px\" data={valuePie}/>\n                        <DoughnutChart title=\"Top Importer by Bill of Lading\" titleFontSize={20} height=\"300px\" data={billPie}/>\n                    </div>\n                </div>\n            </Card>\n\n            {/* Dashboard Table */}\n            <Card className=\"relative mb-12 pt-8\">\n                <HiDownload className=\"absolute right-4 top-4 text-3xl cursor-pointer z-30\" onClick={handleDownloadTable}/>\n                {\n                    table &&\n                        <>\n                          <Table\n                            style={{width: '100%'}}\n                            columns={columns}\n                            data={table.items}\n                          />\n                          <div className=\"flex justify-center pt-4\">\n                            <Pagination\n                              layout=\"prev, pager, next\"\n                              pageCount={table.info.max_page}\n                              currentPage={table.info.current_page}\n                              onCurrentChange={(value: number) => setPage(value)}\n                            />\n                          </div>\n                        </>\n                }\n            </Card>\n        </div>\n    )\n}\n\nexport default Index\n","import React from 'react'\nimport {Switch, Route} from 'react-router-dom'\n\nimport Breadcrumb from '../components/Breadcrumb'\nimport Index from \"./CustomsDataDashBoard/index\";\nimport Path from \"../router/Path\";\n\nfunction CustomsData() {\n    return (\n        <div className=\"bg-background\">\n            <div className=\"main-container p-4\">\n                <Breadcrumb/>\n                <Switch>\n                    <Route path={Path.CustomsDataDashBoard()}>\n                        <Index/>\n                    </Route>\n                </Switch>\n            </div>\n        </div>\n    )\n}\n\nexport default CustomsData\n","import React from 'react';\nimport {BrowserRouter as Router, Switch, Route, Redirect} from 'react-router-dom'\n\nimport Header from './components/Header'\n// import Home from './pages/Home'\n// import Login from './pages/Login'\nimport AmazonTop100 from './pages/AmazonTop100'\nimport CustomsData from \"./pages/CustomsData\";\nimport Path from \"./router/Path\";\n\nfunction App() {\n    return (\n        <Router>\n            <Header/>\n            <main className=\"h-main bg-background overflow-y-scroll\">\n                <Switch>\n                    {/*<Route path={Path.LogIn()}>*/}\n                    {/*<Login/>*/}\n                    {/*</Route>*/}\n                    <Route path={Path.AmazonTop100DashBoard()}>\n                        <AmazonTop100/>\n                    </Route>\n                    <Route path={Path.CustomsDataDashBoard()}>\n                        <CustomsData/>\n                    </Route>\n                    {/*<Route path={Path.DashBoard()}>*/}\n                    {/*<Home/>*/}\n                    {/*</Route>*/}\n                    <Route exact path=\"*\">\n                        <Redirect to={Path.AmazonTop100DashBoard()}/>\n                    </Route>\n                </Switch>\n            </main>\n        </Router>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as echarts from 'echarts/core'\nimport {Provider} from \"react-redux\";\n\nimport reportWebVitals from './reportWebVitals';\nimport store from './store/store'\nimport App from './App';\n\nimport './index.css';\nimport './theme/element/index.css'\nimport echartTheme from './theme/echarts/theme.json'\n\necharts.registerTheme('customed', echartTheme);\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <App/>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}